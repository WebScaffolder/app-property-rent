"use strict";(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[706],{1706:function(t,e,a){a.r(e),a.d(e,{UserPermissionsSettingModule:function(){return B}});var i=a(39895),n=a(22238),o=a(99692),r=a(11494),s=a(22759),c=a(66682),l=a(54395),m=a(87519),u=a(68307),d=a(1581);class p extends d.y{constructor(t){super(t)}}var f=a(3679),g=a(37716),h=a(6874),Z=a(57404),b=a(98295),x=a(49983),v=a(38583),A=a(51095),q=a(12178);function T(t,e){if(1&t&&(g.TgZ(0,"mat-error",15),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.Oqu(t.formErrors.name)}}function _(t,e){if(1&t&&(g.TgZ(0,"mat-error",15),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.Oqu(t.formErrors.display_name)}}function S(t,e){if(1&t&&(g.TgZ(0,"mat-error",15),g._uU(1),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.Oqu(t.formErrors.description)}}function w(t,e){1&t&&(g.TgZ(0,"div",16),g._UZ(1,"mat-progress-bar",17),g.qZA())}let N=(()=>{class t{constructor(t,e,a,i,n){this.fb=e,this.permissionService=a,this.notification=i,this.dialogRef=n,this.loader=!1,this.permission=t.permission}ngOnInit(){this.form=this.fb.group({name:[{value:this.permission.name,disabled:!0},[f.kI.required,f.kI.minLength(3)]],display_name:[this.permission.display_name,[f.kI.required,f.kI.minLength(3)]],description:[this.permission.description,[f.kI.required,f.kI.minLength(3)]]})}close(){this.dialogRef.close()}update(){const t=Object.assign({},this.permission,this.form.value);this.loader=!0,this.permissionService.update(t).subscribe(t=>{this.loader=!1,this.dialogRef.close(this.form.value),this.notification.showNotification("success","Success !! Permission has been updated.")},t=>{if(this.loader=!1,0!==t.permission&&(this.formErrors=t,this.formErrors))for(const e in this.formErrors)this.form&&this.form.controls[e].setErrors({incorrect:!0})})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(n.WI),g.Y36(f.qu),g.Y36(h._),g.Y36(Z.g),g.Y36(n.so))},t.\u0275cmp=g.Xpm({type:t,selectors:[["robi-edit-permission"]],decls:33,vars:9,consts:[["mat-dialog-title",""],[1,"mat-dialog-data",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],["color","primary","appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Name"],["align","start","class","form__error",4,"ngIf"],["matInput","","formControlName","display_name","placeholder","Display Name"],["formControlName","description","matInput","","placeholder","Description","maxlength","150","rows","2"],["description",""],["align","end"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["align","center"],["mat-button","","color","accent",1,"mr-2",3,"disabled","mat-dialog-close","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["align","start",1,"form__error"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,e){if(1&t&&(g.TgZ(0,"h5",0),g._uU(1,"Edit Permission"),g.qZA(),g.TgZ(2,"mat-dialog-content",1),g.NdJ("ngSubmit",function(){return e.update()}),g.TgZ(3,"div",2),g.TgZ(4,"div",3),g.TgZ(5,"mat-form-field",4),g.TgZ(6,"mat-label"),g._uU(7,"Name"),g.qZA(),g._UZ(8,"input",5),g.YNc(9,T,2,1,"mat-error",6),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"div",2),g.TgZ(11,"div",3),g.TgZ(12,"mat-form-field",4),g.TgZ(13,"mat-label"),g._uU(14,"Display Name"),g.qZA(),g._UZ(15,"input",7),g.YNc(16,_,2,1,"mat-error",6),g.qZA(),g.qZA(),g.qZA(),g.TgZ(17,"div",2),g.TgZ(18,"div",3),g.TgZ(19,"mat-form-field",4),g.TgZ(20,"mat-label"),g._uU(21,"Description"),g.qZA(),g._UZ(22,"textarea",8,9),g.TgZ(24,"mat-hint",10),g._uU(25),g.qZA(),g.YNc(26,S,2,1,"mat-error",6),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(27,w,2,0,"div",11),g.TgZ(28,"mat-dialog-actions",12),g.TgZ(29,"button",13),g.NdJ("click",function(){return e.close()}),g._uU(30,"Cancel"),g.qZA(),g.TgZ(31,"button",14),g.NdJ("click",function(){return e.update()}),g._uU(32,"Save"),g.qZA(),g.qZA()),2&t){const t=g.MAs(23);g.xp6(2),g.Q6J("formGroup",e.form),g.xp6(7),g.Q6J("ngIf",null==e.formErrors?null:e.formErrors.name),g.xp6(7),g.Q6J("ngIf",null==e.formErrors?null:e.formErrors.display_name),g.xp6(9),g.hij("",t.value.length," / 150"),g.xp6(1),g.Q6J("ngIf",null==e.formErrors?null:e.formErrors.description),g.xp6(1),g.Q6J("ngIf",e.loader),g.xp6(2),g.Q6J("disabled",e.loader)("mat-dialog-close",!0),g.xp6(2),g.Q6J("disabled",!e.form.valid||e.loader)}},directives:[n.uh,n.xY,f.JL,f.sg,b.KE,b.hX,x.Nt,f.Fj,f.JJ,f.u,v.O5,f.nD,b.bx,n.H8,A.lW,n.ZT,b.TO,q.pW],encapsulation:2}),t})();var y=a(32789),I=a(76627),U=a(33935);const C=["search"];function D(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",27),g.NdJ("click",function(){return g.CHM(t),g.oxw().clearSearch()}),g.TgZ(1,"mat-icon"),g._uU(2,"close"),g.qZA(),g.qZA()}}function j(t,e){1&t&&(g.TgZ(0,"mat-header-cell",28),g._uU(1," Name "),g.qZA())}function Y(t,e){if(1&t&&(g.TgZ(0,"mat-cell"),g._uU(1),g.qZA()),2&t){const t=e.$implicit;g.xp6(1),g.hij(" ",t.name," ")}}function J(t,e){1&t&&(g.TgZ(0,"mat-header-cell",28),g._uU(1," Display Name "),g.qZA())}function k(t,e){if(1&t&&(g.TgZ(0,"mat-cell"),g._uU(1),g.qZA()),2&t){const t=e.$implicit;g.xp6(1),g.hij(" ",t.display_name," ")}}function E(t,e){1&t&&(g.TgZ(0,"mat-header-cell"),g._uU(1," Actions "),g.qZA())}function Q(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"mat-cell",29),g.TgZ(1,"button",30),g.TgZ(2,"mat-icon"),g._uU(3,"more_vert"),g.qZA(),g.qZA(),g.TgZ(4,"mat-menu",null,31),g.TgZ(6,"button",32),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw().editDialog(e)}),g.TgZ(7,"mat-icon",33),g._uU(8,"edit"),g.qZA(),g.TgZ(9,"span"),g._uU(10,"Edit"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=g.MAs(5);g.xp6(1),g.Q6J("matMenuTriggerFor",t)}}function O(t,e){1&t&&g._UZ(0,"mat-header-row")}function R(t,e){1&t&&g._UZ(0,"mat-row")}function M(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,"No Data"),g.qZA())}function H(t,e){1&t&&(g.TgZ(0,"div",34),g._UZ(1,"mat-progress-bar",35),g.qZA())}const G=i.Bz.forChild([{path:"",component:(()=>{class t{constructor(t,e,a){this.service=t,this.notification=e,this.dialog=a,this.displayedColumns=["name","display_name","actions"],this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100]}ngOnInit(){this.dataSource=new p(this.service),this.dataSource.meta$.subscribe(t=>this.meta=t),this.dataSource.load("",0,0,"name","asc")}editDialog(t){const e=new n.vA;e.disableClose=!0,e.autoFocus=!0,e.data={permission:t},e.width="550px",e.height="450px",this.dialog.open(N,e).afterClosed().subscribe(t=>{t&&this.loadData()})}loadData(){this.dataSource.load(this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction)}ngAfterViewInit(){(0,s.R)(this.search.nativeElement,"keyup").pipe((0,l.b)(1e3),(0,m.x)(),(0,u.b)(()=>{this.paginator.pageIndex=0,this.loadData()})).subscribe(),this.paginator.page.pipe((0,u.b)(()=>this.loadData())).subscribe(),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,c.T)(this.sort.sortChange,this.paginator.page).pipe((0,u.b)(()=>this.loadData())).subscribe()}clearSearch(){this.search.nativeElement.value="",this.loadData()}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(h._),g.Y36(Z.g),g.Y36(n.uw))},t.\u0275cmp=g.Xpm({type:t,selectors:[["robi-user-permission-setting"]],viewQuery:function(t,e){if(1&t&&(g.Gf(C,7),g.Gf(o.NW,7),g.Gf(r.YE,7)),2&t){let t;g.iGM(t=g.CRH())&&(e.search=t.first),g.iGM(t=g.CRH())&&(e.paginator=t.first),g.iGM(t=g.CRH())&&(e.sort=t.first)}},decls:30,vars:12,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","search-form-section"],[1,"col-3"],[1,"col-9"],[1,"search-form-field"],["matInput","","placeholder","Search","autocomplete","off",3,"disabled"],["search",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-responsive"],["matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","display_name"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["class","button-row",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSizeOptions"],["pagination",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-sort-header",""],[1,"button-row"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","accent"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,e){if(1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g._UZ(5,"div",5),g.TgZ(6,"div",6),g.TgZ(7,"mat-form-field",7),g._UZ(8,"input",8,9),g.YNc(10,D,3,0,"button",10),g.qZA(),g.qZA(),g.qZA(),g.TgZ(11,"div",11),g.TgZ(12,"mat-table",12,13),g.ynx(14,14),g.YNc(15,j,2,0,"mat-header-cell",15),g.YNc(16,Y,2,1,"mat-cell",16),g.BQk(),g.ynx(17,17),g.YNc(18,J,2,0,"mat-header-cell",15),g.YNc(19,k,2,1,"mat-cell",16),g.BQk(),g.ynx(20,18),g.YNc(21,E,2,0,"mat-header-cell",19),g.YNc(22,Q,11,1,"mat-cell",20),g.BQk(),g.YNc(23,O,1,0,"mat-header-row",21),g.YNc(24,R,1,0,"mat-row",22),g.qZA(),g.YNc(25,M,2,0,"span",23),g.YNc(26,H,2,0,"div",24),g.ALo(27,"async"),g._UZ(28,"mat-paginator",25,26),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t){const t=g.MAs(9);g.xp6(8),g.Q6J("disabled",0===(null==e.meta?null:e.meta.total)),g.xp6(2),g.Q6J("ngIf",t.value),g.xp6(2),g.Q6J("dataSource",e.dataSource),g.xp6(11),g.Q6J("matHeaderRowDef",e.displayedColumns),g.xp6(1),g.Q6J("matRowDefColumns",e.displayedColumns),g.xp6(1),g.Q6J("ngIf",0===(null==e.meta?null:e.meta.total)),g.xp6(1),g.Q6J("ngIf",g.lcZ(27,10,null==e.dataSource?null:e.dataSource.loading$)||e.loader),g.xp6(2),g.Q6J("length",null==e.meta?null:e.meta.total)("pageIndex",e.pageIndex)("pageSizeOptions",e.pageSizeOptions)}},directives:[b.KE,x.Nt,v.O5,y.BZ,r.YE,y.w1,y.fO,y.Dz,y.as,y.nj,o.NW,A.lW,b.R9,I.Hw,y.ge,r.nU,y.ev,U.p6,U.VK,U.OP,y.XQ,y.Gk,q.pW],pipes:[v.Ov],styles:[""]}),t})()}]);var z=a(83893);let B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[z.m,G]]}),t})()},1581:function(t,e,a){a.d(e,{y:function(){return s}});var i=a(26215),n=a(25917),o=a(5304),r=a(68939);class s{constructor(t){this.service=t,this.dataSubject=new i.X([]),this.loadingSubject=new i.X(!1),this.loading$=this.loadingSubject.asObservable(),this.metaSubject=new i.X({}),this.meta$=this.metaSubject.asObservable()}load(t,e,a,i="",s="",c="",l=""){this.loadingSubject.next(!0),this.service.getAll(t,e,a,i,s,c,l).pipe((0,o.K)(()=>(0,n.of)([])),(0,r.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{this.dataSubject.next(t.data),this.metaSubject.next(t.meta)})}loadNested(t,e,a,i,s="",c="",l="",m=""){this.loadingSubject.next(!0),this.service.getNested(t,e,a,i,s,c,l,m).pipe((0,o.K)(()=>(0,n.of)([])),(0,r.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{this.dataSubject.next(t.data),this.metaSubject.next(t.meta)})}connect(t){return this.dataSubject.asObservable()}disconnect(t){this.dataSubject.complete(),this.loadingSubject.complete()}}}}]);