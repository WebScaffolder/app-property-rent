!function(){"use strict";function t(n,e){return(t=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(n,e)}function n(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var o,i=a(t);if(n){var r=a(this).constructor;o=Reflect.construct(i,arguments,r)}else o=i.apply(this,arguments);return e(this,o)}}function e(t,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[788],{65788:function(e,a,i){i.r(a),i.d(a,{PaymentModule:function(){return Un}});var l=i(39895),c=i(22238),s=i(99692),u=i(11494),d=i(22759),p=i(66682),m=i(54395),g=i(87519),f=i(68307),h=i(28292),_=i(3679),Z=i(16738),v=i(25917),b=i(88229),y=i(79765),x=i(45435),C=i(46782),A=i(88002),T=i(65792),q=i(37716),O=i(96284),P=i(97788),M=i(19971),w=i(57404),k=i(88539),U=i(98295),I=i(67441),N=i(72458),E=i(52218),S=i(38583),Y=i(49983),J=i(43220),Q=i(51095),D=i(76627),F=i(12178),$=["stepper"];function L(t,n){if(1&t&&(q.TgZ(0,"mat-option",35),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.Q6J("value",e),q.xp6(1),q.lnq(" ",e.first_name," ",e.middle_name," ",e.last_name," ")}}function R(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.tenant)}}function j(t,n){if(1&t&&(q.TgZ(0,"mat-hint",37),q.TgZ(1,"div"),q.TgZ(2,"span"),q.TgZ(3,"mat-icon",38),q._uU(4,"phone"),q.qZA(),q._uU(5),q.qZA(),q.TgZ(6,"span",39),q._uU(7),q.qZA(),q.TgZ(8,"span",39),q._uU(9),q.qZA(),q.qZA(),q.qZA()),2&t){var e=n.ngIf;q.xp6(5),q.hij(" ",null==e?null:e.contact_phone," "),q.xp6(2),q.hij(" ID / Pass : ",null==e?null:e.id_passport_number," "),q.xp6(2),q.hij(" ",null==e?null:e.nationality," ")}}function B(t,n){if(1&t&&(q.TgZ(0,"mat-option",35),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.Q6J("value",e),q.xp6(1),q.hij(" ",null==e?null:e.lease_number," ")}}function z(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.lease)}}function H(t,n){if(1&t&&(q.ynx(0),q.TgZ(1,"span"),q._uU(2),q.qZA(),q.BQk()),2&t){var e=n.$implicit;q.xp6(2),q.Oqu(e.unit_name)}}function G(t,n){if(1&t&&(q.TgZ(0,"mat-hint",37),q.TgZ(1,"div"),q.TgZ(2,"span"),q._uU(3),q.qZA(),q.TgZ(4,"span",39),q._uU(5," Unit : "),q.YNc(6,H,3,1,"ng-container",40),q.qZA(),q.TgZ(7,"span",39),q._uU(8),q.qZA(),q.qZA(),q.qZA()),2&t){var e=n.ngIf;q.xp6(3),q.AsE(" ",null==e||null==e.property?null:e.property.property_name," ",null==e||null==e.property?null:e.property.location," "),q.xp6(3),q.Q6J("ngForOf",null==e?null:e.units),q.xp6(2),q.hij(" Type : ",null==e||null==e.lease_type?null:e.lease_type.lease_type_display_name," ")}}function W(t,n){if(1&t&&(q.TgZ(0,"span"),q._uU(1),q.qZA()),2&t){var e=n.ngIf;q.xp6(1),q.hij(" Loan Balance: ",e,"")}}function V(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.amount)}}function X(t,n){if(1&t&&(q.TgZ(0,"mat-option",35),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.Q6J("value",e.id),q.xp6(1),q.hij(" ",e.payment_method_display_name," ")}}function K(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.payment_method_id)}}function tt(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.payment_date)}}function nt(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.paid_by)}}function et(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.reference_number)}}function at(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw(2);q.xp6(1),q.Oqu(e.formErrors.cheque_number)}}function ot(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw(2);q.xp6(1),q.Oqu(e.formErrors.cheque_date)}}function it(t,n){if(1&t&&(q.TgZ(0,"mat-option",35),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.Q6J("value",e.name),q.xp6(1),q.hij(" ",e.name," ")}}function rt(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw(2);q.xp6(1),q.Oqu(e.formErrors.bank_name)}}function lt(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw(2);q.xp6(1),q.Oqu(e.formErrors.bank_branch)}}function ct(t,n){if(1&t&&(q.TgZ(0,"div"),q.TgZ(1,"div",41),q.TgZ(2,"div",14),q.TgZ(3,"div",25),q.TgZ(4,"mat-form-field",11),q.TgZ(5,"mat-label"),q._uU(6,"Cheque Number"),q.qZA(),q._UZ(7,"input",42),q.YNc(8,at,2,1,"mat-error",9),q.qZA(),q.qZA(),q.TgZ(9,"div",25),q.TgZ(10,"mat-form-field",11),q.TgZ(11,"mat-label"),q._uU(12,"Cheque Date"),q.qZA(),q._UZ(13,"input",43),q._UZ(14,"mat-datepicker-toggle",22),q._UZ(15,"mat-datepicker",null,44),q.YNc(17,ot,2,1,"mat-error",9),q.qZA(),q.qZA(),q.qZA(),q.TgZ(18,"div",14),q.TgZ(19,"div",25),q.TgZ(20,"mat-form-field",11),q.TgZ(21,"mat-label"),q._uU(22,"Bank Name"),q.qZA(),q.TgZ(23,"mat-select",45),q.YNc(24,it,2,2,"mat-option",8),q.qZA(),q.YNc(25,rt,2,1,"mat-error",9),q.qZA(),q.qZA(),q.TgZ(26,"div",25),q.TgZ(27,"mat-form-field",11),q.TgZ(28,"mat-label"),q._uU(29,"Bank Branch"),q.qZA(),q._UZ(30,"input",46),q.YNc(31,lt,2,1,"mat-error",9),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA()),2&t){var e=q.MAs(16),a=q.oxw();q.xp6(8),q.Q6J("ngIf",null==a.formErrors?null:a.formErrors.cheque_number),q.xp6(5),q.Q6J("matDatepicker",e),q.xp6(1),q.Q6J("for",e),q.xp6(3),q.Q6J("ngIf",null==a.formErrors?null:a.formErrors.cheque_date),q.xp6(7),q.Q6J("ngForOf",a.banks),q.xp6(1),q.Q6J("ngIf",null==a.formErrors?null:a.formErrors.bank_name),q.xp6(6),q.Q6J("ngIf",null==a.formErrors?null:a.formErrors.bank_branch)}}function st(t,n){if(1&t&&(q.TgZ(0,"mat-error",36),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.notes)}}function ut(t,n){1&t&&(q.TgZ(0,"div",47),q._UZ(1,"mat-progress-bar",48),q.qZA())}var dt,pt=((dt=function(){function t(n,e,a,i,r,l,c,s){o(this,t),this.fb=e,this.paymentService=a,this.leaseService=i,this.tenantService=r,this.notification=l,this.paymentMethodService=c,this.dialogRef=s,this.loader=!1,this.balanceLoader=!1,this.lease$=(0,v.of)(),this.tenant$=(0,v.of)(),this.isBank=!1,this.paymentMethods=[],this.banks=[],this.tenants=[],this.tenantServerSideFilteringCtrl=new _.NI,this.searching=!1,this.filteredServerSideTenants=new b.t(1),this._onDestroy=new y.xQ}return r(t,[{key:"ngOnInit",value:function(){var t=this;this.paymentMethods$=this.paymentMethodService.list(["payment_method_name","payment_method_display_name"]),this.tenantServerSideFilteringCtrl.valueChanges.pipe((0,x.h)(function(t){return!!t}),(0,f.b)(function(){return t.searching=!0}),(0,C.R)(this._onDestroy),(0,m.b)(200),(0,g.x)(),(0,A.U)(function(n){n=n.toLowerCase(),t.tenantsFiltered$=t.tenantService.search(n)}),(0,T.g)(500)).subscribe(function(n){t.searching=!1,t.filteredServerSideTenants.next(n)},function(n){t.searching=!1}),this.form=this.fb.group({tenant:["",[_.kI.required,_.kI.minLength(1)]],lease:["",[_.kI.required,_.kI.minLength(1)]],payment_method_id:["",[_.kI.required,_.kI.minLength(1)]],amount:["",[_.kI.required,_.kI.minLength(1)]],payment_date:[Z(),_.kI.required],notes:[""],paid_by:[""],reference_number:[""],bank_fields:this.fb.group({cheque_number:[""],cheque_date:[Z(),_.kI.required],bank_name:[""],bank_branch:[""]})})}},{key:"onTenantItemChange",value:function(t){var n=this;this.tenantID=null==t?void 0:t.id,this.tenantActiveLeases$=(0,v.of)(),this.lease$=(0,v.of)(),this.tenant$=(0,v.of)(),this.tenantsFiltered$.subscribe(function(e){n.tenantActiveLeases$=(0,v.of)(e.find(function(n){return n.id===(null==t?void 0:t.id)}).leases),n.tenant$=(0,v.of)(e.find(function(n){return n.id===(null==t?void 0:t.id)}))}),this.form.patchValue({lease_id:""}),this.balanceLoader=!0,this.loanAccountBalance$=(0,v.of)(null)}},{key:"onLeaseItemChange",value:function(t){this.leaseID=null==t?void 0:t.id,this.propertyID=null==t?void 0:t.property_id,this.leaseNumber=null==t?void 0:t.lease_number,this.lease$=this.leaseService.getById(null==t?void 0:t.id)}},{key:"onPaymentMethodItemChange",value:function(t){}},{key:"save",value:function(){this.dialogRef.close(this.form.value)}},{key:"close",value:function(){this.dialogRef.close()}},{key:"create",value:function(){var t=this,n=Object.assign({},this.payment,this.form.value);n.tenant_id=this.tenantID,n.property_id=this.propertyID,n.lease_id=this.leaseID,n.lease_number=this.leaseNumber,this.loader=!0,this.paymentService.create(n).subscribe(function(n){t.onSaveComplete(),t.notification.showNotification("success","Success !! New payment created.")},function(n){var e;if(t.loader=!1,n.error&&404===n.error.status_code)t.notification.showNotification("danger",n.error.message);else if(0!==n.payment){if(t.formErrors=n,t.formErrors)for(var a in t.formErrors)t.form&&(null===(e=t.form.controls[a])||void 0===e||e.markAsTouched(),t.form.controls[a].setErrors({incorrect:!0}))}else t.notification.showNotification("danger","Connection Error !! Nothing created. Check your connection and retry.")})}},{key:"onSaveComplete",value:function(){this.loader=!1,this.form.reset(),this.dialogRef.close(this.form.value)}},{key:"ngOnDestroy",value:function(){this._onDestroy.next(),this._onDestroy.complete()}}]),t}()).\u0275fac=function(t){return new(t||dt)(q.Y36(c.WI),q.Y36(_.qu),q.Y36(O.t),q.Y36(P.R),q.Y36(M.a),q.Y36(w.g),q.Y36(k.X),q.Y36(c.so))},dt.\u0275cmp=q.Xpm({type:dt,selectors:[["robi-add-payment"]],viewQuery:function(t,n){var e;1&t&&q.Gf($,7),2&t&&q.iGM(e=q.CRH())&&(n.stepper=e.first)},decls:85,vars:37,consts:[["mat-dialog-title",""],[1,"mat-dialog-data",3,"formGroup","ngSubmit"],[1,"row","mb-4"],[1,"col-12"],["color","primary","appearance","outline"],["placeholder","Tenant*","formControlName","tenant",3,"selectionChange"],["tenantSelect",""],["placeholderLabel","Find Tenant...","noEntriesFoundLabel","No matching Tenant found ...",3,"formControl","searching"],[3,"value",4,"ngFor","ngForOf"],["align","start","class","form__error",4,"ngIf"],["class","text-info","align","start",4,"ngIf"],["color","primary","appearance","outline",1,"full-width"],["placeholder","Lease","formControlName","lease",3,"selectionChange"],["leaseSelect",""],[1,"row"],[1,"col-4"],["matInput","","type","number","min","0","formControlName","amount","placeholder","Amount"],["align","start",1,"text-success"],[4,"ngIf"],["placeholder","Payment Method","formControlName","payment_method_id",3,"selectionChange"],["paymentMethodSelect",""],["matInput","","readonly","","formControlName","payment_date","placeholder","Payment Date",3,"matDatepicker","click"],["matSuffix","",3,"for"],["touchUi",""],["payment_date",""],[1,"col-6"],["matInput","","formControlName","paid_by","placeholder","Paid By"],["matInput","","formControlName","reference_number","placeholder","Reference Number"],["formControlName","notes","matInput","","placeholder","Extra Notes","maxlength","150","rows","3"],["notes",""],["align","end"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["align","center"],["mat-button","","color","accent",1,"mr-2",3,"disabled","mat-dialog-close","click"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],["align","start",1,"form__error"],["align","start",1,"text-info"],["inline","true"],[1,"ml-5"],[4,"ngFor","ngForOf"],["formGroupName","bank_fields"],["matInput","","formControlName","cheque_number","placeholder","Cheque Number"],["matInput","","readonly","","formControlName","cheque_date","placeholder","Cheque Date",3,"matDatepicker"],["cheque_date",""],["placeholder","Bank Name","formControlName","bank_name"],["matInput","","formControlName","bank_branch","placeholder","Bank Branch"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,n){if(1&t){var e=q.EpF();q.TgZ(0,"h5",0),q._uU(1,"Add Payment"),q.qZA(),q.TgZ(2,"mat-dialog-content",1),q.NdJ("ngSubmit",function(){return n.create()}),q.TgZ(3,"div",2),q.TgZ(4,"div",3),q.TgZ(5,"mat-form-field",4),q.TgZ(6,"mat-label"),q._uU(7,"Tenant*"),q.qZA(),q.TgZ(8,"mat-select",5,6),q.NdJ("selectionChange",function(){q.CHM(e);var t=q.MAs(9);return n.onTenantItemChange(t.value)}),q.TgZ(10,"mat-option"),q._UZ(11,"ngx-mat-select-search",7),q.qZA(),q.YNc(12,L,2,4,"mat-option",8),q.ALo(13,"async"),q.qZA(),q.YNc(14,R,2,1,"mat-error",9),q.YNc(15,j,10,3,"mat-hint",10),q.ALo(16,"async"),q.qZA(),q.qZA(),q.qZA(),q.TgZ(17,"div",2),q.TgZ(18,"div",3),q.TgZ(19,"mat-form-field",11),q.TgZ(20,"mat-label"),q._uU(21,"Lease"),q.qZA(),q.TgZ(22,"mat-select",12,13),q.NdJ("selectionChange",function(){q.CHM(e);var t=q.MAs(23);return n.onLeaseItemChange(t.value)}),q.YNc(24,B,2,2,"mat-option",8),q.ALo(25,"async"),q.qZA(),q.YNc(26,z,2,1,"mat-error",9),q.YNc(27,G,9,4,"mat-hint",10),q.ALo(28,"async"),q.qZA(),q.qZA(),q.qZA(),q.TgZ(29,"div",14),q.TgZ(30,"div",15),q.TgZ(31,"mat-form-field",11),q.TgZ(32,"mat-label"),q._uU(33,"Amount"),q.qZA(),q._UZ(34,"input",16),q.TgZ(35,"mat-hint",17),q.YNc(36,W,2,1,"span",18),q.ALo(37,"async"),q.qZA(),q.YNc(38,V,2,1,"mat-error",9),q.qZA(),q.qZA(),q.TgZ(39,"div",15),q.TgZ(40,"mat-form-field",11),q.TgZ(41,"mat-label"),q._uU(42,"Payment Method"),q.qZA(),q.TgZ(43,"mat-select",19,20),q.NdJ("selectionChange",function(){q.CHM(e);var t=q.MAs(44);return n.onPaymentMethodItemChange(t.value)}),q.YNc(45,X,2,2,"mat-option",8),q.ALo(46,"async"),q.qZA(),q.YNc(47,K,2,1,"mat-error",9),q.qZA(),q.qZA(),q.TgZ(48,"div",15),q.TgZ(49,"mat-form-field",11),q.TgZ(50,"mat-label"),q._uU(51,"Payment Date"),q.qZA(),q.TgZ(52,"input",21),q.NdJ("click",function(){return q.CHM(e),q.MAs(55).open()}),q.qZA(),q._UZ(53,"mat-datepicker-toggle",22),q._UZ(54,"mat-datepicker",23,24),q.YNc(56,tt,2,1,"mat-error",9),q.qZA(),q.qZA(),q.qZA(),q.TgZ(57,"div",14),q.TgZ(58,"div",25),q.TgZ(59,"mat-form-field",11),q.TgZ(60,"mat-label"),q._uU(61,"Paid By"),q.qZA(),q._UZ(62,"input",26),q.YNc(63,nt,2,1,"mat-error",9),q.qZA(),q.qZA(),q.TgZ(64,"div",25),q.TgZ(65,"mat-form-field",11),q.TgZ(66,"mat-label"),q._uU(67,"Reference Number"),q.qZA(),q._UZ(68,"input",27),q.YNc(69,et,2,1,"mat-error",9),q.qZA(),q.qZA(),q.qZA(),q.YNc(70,ct,32,7,"div",18),q.TgZ(71,"mat-form-field",11),q.TgZ(72,"mat-label"),q._uU(73,"Extra Notes"),q.qZA(),q._UZ(74,"textarea",28,29),q.TgZ(76,"mat-hint",30),q._uU(77),q.qZA(),q.YNc(78,st,2,1,"mat-error",9),q.qZA(),q.qZA(),q.YNc(79,ut,2,0,"div",31),q.TgZ(80,"mat-dialog-actions",32),q.TgZ(81,"button",33),q.NdJ("click",function(){return n.close()}),q._uU(82,"Cancel"),q.qZA(),q.TgZ(83,"button",34),q.NdJ("click",function(){return n.create()}),q._uU(84,"Save"),q.qZA(),q.qZA()}if(2&t){var a=q.MAs(55),o=q.MAs(75);q.xp6(2),q.Q6J("formGroup",n.form),q.xp6(9),q.Q6J("formControl",n.tenantServerSideFilteringCtrl)("searching",n.searching),q.xp6(1),q.Q6J("ngForOf",q.lcZ(13,25,n.tenantsFiltered$)),q.xp6(2),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.tenant),q.xp6(1),q.Q6J("ngIf",q.lcZ(16,27,n.tenant$)),q.xp6(9),q.Q6J("ngForOf",q.lcZ(25,29,n.tenantActiveLeases$)),q.xp6(2),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.lease),q.xp6(1),q.Q6J("ngIf",q.lcZ(28,31,n.lease$)),q.xp6(9),q.Q6J("ngIf",q.lcZ(37,33,n.loanAccountBalance$)),q.xp6(2),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.amount),q.xp6(7),q.Q6J("ngForOf",q.lcZ(46,35,n.paymentMethods$)),q.xp6(2),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.payment_method_id),q.xp6(5),q.Q6J("matDatepicker",a),q.xp6(1),q.Q6J("for",a),q.xp6(3),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.payment_date),q.xp6(7),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.paid_by),q.xp6(6),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.reference_number),q.xp6(1),q.Q6J("ngIf",n.isBank),q.xp6(7),q.hij("",o.value.length," / 150"),q.xp6(1),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.notes),q.xp6(1),q.Q6J("ngIf",n.loader),q.xp6(2),q.Q6J("disabled",n.loader)("mat-dialog-close",!0),q.xp6(2),q.Q6J("disabled",!n.form.valid||n.loader)}},directives:[c.uh,c.xY,_.JL,_.sg,U.KE,U.hX,I.gD,_.JJ,_.u,N.ey,E.nu,_.oH,S.sg,S.O5,Y.Nt,_.qQ,_.wV,_.Fj,U.bx,J.hl,J.nW,U.R9,J.Mq,_.nD,c.H8,Q.lW,c.ZT,U.TO,D.Hw,_.x0,F.pW],pipes:[S.Ov],encapsulation:2}),dt),mt=i(5255),gt=i(65),ft=i(26215),ht=i(91841),_t=function(){var e=function(e){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&t(n,e)}(i,e);var a=n(i);function i(t){var n;return o(this,i),(n=a.call(this,t,"transactions")).selectedTransactionSource=new ft.X(null),n.selectedTransactionChanges$=n.selectedTransactionSource.asObservable(),n.localHttpClient=t,n}return r(i,[{key:"changeSelectedTransaction",value:function(t){this.selectedTransactionSource.next(t)}}]),i}(gt.b);return e.\u0275fac=function(t){return new(t||e)(q.LFG(ht.eN))},e.\u0275prov=q.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Zt(t,n){if(1&t&&(q.TgZ(0,"div",1),q.TgZ(1,"div",2),q.TgZ(2,"mat-form-field",7),q.TgZ(3,"mat-label"),q._uU(4,"Notes"),q.qZA(),q._UZ(5,"textarea",15),q.qZA(),q.qZA(),q.qZA()),2&t){var e=q.oxw();q.xp6(5),q.s9C("value",null==e.payment?null:e.payment.notes)}}function vt(t,n){if(1&t&&(q.TgZ(0,"div",1),q.TgZ(1,"div",2),q.TgZ(2,"mat-form-field",3),q.TgZ(3,"mat-label"),q._uU(4,"Cancelled By"),q.qZA(),q._UZ(5,"input",16),q.qZA(),q.qZA(),q.qZA()),2&t){var e=q.oxw();q.xp6(5),q.hYB("value","",null==e.payment||null==e.payment.cancel_user?null:e.payment.cancel_user.first_name," ",null==e.payment||null==e.payment.cancel_user?null:e.payment.cancel_user.last_name,"")}}function bt(t,n){if(1&t&&(q.TgZ(0,"div",1),q.TgZ(1,"div",2),q.TgZ(2,"mat-form-field",7),q.TgZ(3,"mat-label"),q._uU(4,"Cancel Comments"),q.qZA(),q._UZ(5,"textarea",17),q.qZA(),q.qZA(),q.qZA()),2&t){var e=q.oxw();q.xp6(5),q.s9C("value",null==e.payment?null:e.payment.cancel_notes)}}function yt(t,n){if(1&t&&(q.TgZ(0,"div",1),q.TgZ(1,"div",2),q.TgZ(2,"mat-form-field",3),q.TgZ(3,"mat-label"),q._uU(4,"Approved By"),q.qZA(),q._UZ(5,"input",18),q.qZA(),q.qZA(),q.qZA()),2&t){var e=q.oxw();q.xp6(5),q.hYB("value","",null==e.payment||null==e.payment.approve_user?null:e.payment.approve_user.first_name," ",null==e.payment||null==e.payment.approve_user?null:e.payment.approve_user.last_name,"")}}function xt(t,n){1&t&&(q.TgZ(0,"mat-dialog-actions",19),q.TgZ(1,"button",20),q._uU(2,"Close"),q.qZA(),q.qZA()),2&t&&(q.xp6(1),q.Q6J("mat-dialog-close",!0))}var Ct=function(){var t=function(){function t(n,e,a,i,r){o(this,t),this.paymentService=e,this.transactionService=a,this.paymentMethodService=i,this.dialogRef=r,this.transactionColumns=["loan_id","amount","transaction_date","transaction_type"],this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100],this.loader=!1,this.paymentMethods=[],this.payment=n.data,this.isStandAlone=n.isStandAlone}return r(t,[{key:"ngOnInit",value:function(){var t=this;this.paymentMethodService.list("name").subscribe(function(n){return t.paymentMethods=n},function(){return t.paymentMethods=[]})}},{key:"close",value:function(){this.dialogRef.close()}},{key:"loadData",value:function(){this.transactionDataSource.load("",this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction,"payment_id",this.payment.id)}},{key:"ngAfterViewInit",value:function(){}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(c.WI),q.Y36(O.t),q.Y36(_t),q.Y36(k.X),q.Y36(c.so))},t.\u0275cmp=q.Xpm({type:t,selectors:[["robi-payment-detail"]],viewQuery:function(t,n){var e;(1&t&&(q.Gf(s.NW,7),q.Gf(u.YE,7)),2&t)&&(q.iGM(e=q.CRH())&&(n.paginator=e.first),q.iGM(e=q.CRH())&&(n.sort=e.first))},decls:41,vars:17,consts:[[1,"mat-dialog-data",2,"min-width","40%"],[1,"row"],[1,"col-12"],["color","primary","appearance","outline"],["matInput","","placeholder","Status","disabled","",3,"value"],["matPrefix",""],[1,"col-6"],["color","primary","appearance","outline",1,"full-width"],["matInput","","placeholder","Amount","disabled","",3,"value"],["matInput","","placeholder","Paid On","disabled","",3,"value"],["matInput","","placeholder","Payment Method","disabled","",3,"value"],["matInput","","placeholder","Tenant","disabled","",3,"value"],["matInput","","placeholder","Recorded By","disabled","",3,"value"],["class","row",4,"ngIf"],["align","center",4,"ngIf"],["matInput","","placeholder","Notes","disabled","","maxlength","150","rows","1",3,"value"],["matInput","","placeholder","Cancelled By","disabled","",3,"value"],["matInput","","placeholder","Cancel Comments","disabled","","maxlength","150","rows","1",3,"value"],["matInput","","placeholder","Approved By","disabled","",3,"value"],["align","center"],["mat-button","",1,"mat-raised-button",3,"mat-dialog-close"]],template:function(t,n){1&t&&(q.TgZ(0,"mat-dialog-content",0),q.TgZ(1,"div",1),q.TgZ(2,"div",2),q.TgZ(3,"mat-form-field",3),q._UZ(4,"input",4),q.TgZ(5,"span",5),q.TgZ(6,"mat-icon"),q._uU(7),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(8,"div",1),q.TgZ(9,"div",6),q.TgZ(10,"mat-form-field",7),q.TgZ(11,"mat-label"),q._uU(12,"Amount"),q.qZA(),q._UZ(13,"input",8),q.qZA(),q.qZA(),q.TgZ(14,"div",6),q.TgZ(15,"mat-form-field",7),q.TgZ(16,"mat-label"),q._uU(17,"Paid On"),q.qZA(),q._UZ(18,"input",9),q.qZA(),q.qZA(),q.qZA(),q.TgZ(19,"div",1),q.TgZ(20,"div",6),q.TgZ(21,"mat-form-field",7),q.TgZ(22,"mat-label"),q._uU(23,"Payment Method"),q.qZA(),q._UZ(24,"input",10),q.qZA(),q.qZA(),q.TgZ(25,"div",6),q.TgZ(26,"mat-form-field",7),q.TgZ(27,"mat-label"),q._uU(28,"Tenant"),q.qZA(),q._UZ(29,"input",11),q.qZA(),q.qZA(),q.qZA(),q.TgZ(30,"div",1),q.TgZ(31,"div",2),q.TgZ(32,"mat-form-field",7),q.TgZ(33,"mat-label"),q._uU(34,"Recorded By"),q.qZA(),q._UZ(35,"input",12),q.qZA(),q.qZA(),q.qZA(),q.YNc(36,Zt,6,1,"div",13),q.YNc(37,vt,6,2,"div",13),q.YNc(38,bt,6,1,"div",13),q.YNc(39,yt,6,2,"div",13),q.qZA(),q.YNc(40,xt,3,1,"mat-dialog-actions",14)),2&t&&(q.xp6(3),q.Gre("full-width ",null==n.payment.status?null:n.payment.status.status_class,""),q.xp6(1),q.MGl("value"," ",null==n.payment.status?null:n.payment.status.status_text,""),q.xp6(3),q.Oqu(null==n.payment.status?null:n.payment.status.status_icon),q.xp6(6),q.s9C("value",null==n.payment?null:n.payment.amount),q.xp6(5),q.s9C("value",null==n.payment?null:n.payment.payment_date),q.xp6(6),q.s9C("value",null==n.payment||null==n.payment.payment_method?null:n.payment.payment_method.payment_method_display_name),q.xp6(5),q.cQ8("value","",null==n.payment||null==n.payment.tenant?null:n.payment.tenant.first_name," ",null==n.payment||null==n.payment.tenant?null:n.payment.tenant.middle_name," ",null==n.payment||null==n.payment.tenant?null:n.payment.tenant.last_name,""),q.xp6(6),q.s9C("value",null==n.payment||null==n.payment.tenant?null:n.payment.tenant.first_name),q.xp6(1),q.Q6J("ngIf",null==n.payment?null:n.payment.notes),q.xp6(1),q.Q6J("ngIf",null==n.payment?null:n.payment.is_cancelled),q.xp6(1),q.Q6J("ngIf",null==n.payment?null:n.payment.is_cancelled),q.xp6(1),q.Q6J("ngIf",null==n.payment?null:n.payment.is_approved),q.xp6(1),q.Q6J("ngIf",n.isStandAlone))},directives:[c.xY,U.KE,Y.Nt,U.qo,D.Hw,U.hX,S.O5,c.H8,Q.lW,c.ZT],encapsulation:2}),t}(),At=i(90171);function Tt(t,n){if(1&t&&(q.TgZ(0,"mat-error",14),q._uU(1),q.qZA()),2&t){var e=q.oxw();q.xp6(1),q.Oqu(e.formErrors.notes)}}function qt(t,n){1&t&&(q.TgZ(0,"div",15),q._UZ(1,"mat-progress-bar",16),q.qZA())}var Ot=function(){var t=function(){function t(n,e,a,i,r,l,c){o(this,t),this.fb=e,this.paymentService=a,this.notification=i,this.transactionService=r,this.paymentMethodService=l,this.dialogRef=c,this.transactionColumns=["loan_id","amount","transaction_date","transaction_type"],this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100],this.loader=!1,this.paymentMethods=[],this.payment=n.data}return r(t,[{key:"ngOnInit",value:function(){var t=this;this.form=this.fb.group({cancel_notes:["",[_.kI.required,_.kI.minLength(2)]]}),this.paymentMethodService.list("name").subscribe(function(n){return t.paymentMethods=n},function(){return t.paymentMethods=[]})}},{key:"close",value:function(){this.dialogRef.close()}},{key:"ngAfterViewInit",value:function(){}},{key:"cancelPayment",value:function(){var t=this,n=Object.assign({},this.paymentStatus,this.form.value);n.id=this.payment.id,this.loader=!0,this.paymentService.cancel(n).subscribe(function(n){t.onSaveComplete(),t.notification.showNotification("success","Success !! Payment has been Cancelled.")},function(n){var e;if(t.loader=!1,n.error&&404===n.error.status_code)t.notification.showNotification("danger",n.error.message);else if(0!==n.payment){if(t.formErrors=n,t.formErrors)for(var a in t.formErrors)t.form&&(null===(e=t.form.controls[a])||void 0===e||e.markAsTouched(),t.form.controls[a].setErrors({incorrect:!0}))}else t.notification.showNotification("danger","Connection Error !!. Check your connection and retry.")})}},{key:"onSaveComplete",value:function(){this.loader=!1,this.form.reset(),this.dialogRef.close(this.form.value)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(c.WI),q.Y36(_.qu),q.Y36(O.t),q.Y36(w.g),q.Y36(_t),q.Y36(k.X),q.Y36(c.so))},t.\u0275cmp=q.Xpm({type:t,selectors:[["robi-status-change"]],viewQuery:function(t,n){var e;(1&t&&(q.Gf(s.NW,7),q.Gf(u.YE,7)),2&t)&&(q.iGM(e=q.CRH())&&(n.paginator=e.first),q.iGM(e=q.CRH())&&(n.sort=e.first))},decls:25,vars:8,consts:[[1,"mat-title"],[1,"mat-dialog-data",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],["color","primary","appearance","outline",1,"full-width"],["formControlName","cancel_notes","matInput","","placeholder","Cancel Notes","maxlength","150","rows","3"],["notes",""],["align","end"],["align","start","class","form__error",4,"ngIf"],[3,"expanded"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["align","center"],["mat-button","","color","primary",1,"mr-2",3,"disabled","mat-dialog-close","click"],[1,"mat-raised-button","mat-primary",3,"disabled","click"],["align","start",1,"form__error"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,n){if(1&t&&(q.TgZ(0,"h5",0),q._uU(1,"Cancel Payment"),q.qZA(),q.TgZ(2,"mat-dialog-content",1),q.NdJ("ngSubmit",function(){return n.cancelPayment()}),q.TgZ(3,"div",2),q.TgZ(4,"div",3),q.TgZ(5,"mat-form-field",4),q.TgZ(6,"mat-label"),q._uU(7,"Cancel Notes"),q.qZA(),q._UZ(8,"textarea",5,6),q.TgZ(10,"mat-hint",7),q._uU(11),q.qZA(),q.YNc(12,Tt,2,1,"mat-error",8),q.qZA(),q.qZA(),q.qZA(),q.TgZ(13,"mat-accordion"),q.TgZ(14,"mat-expansion-panel",9),q.TgZ(15,"mat-expansion-panel-header"),q.TgZ(16,"mat-panel-title"),q._uU(17," Details "),q.qZA(),q.qZA(),q._UZ(18,"robi-payment-detail"),q.qZA(),q.qZA(),q.qZA(),q.YNc(19,qt,2,0,"div",10),q.TgZ(20,"mat-dialog-actions",11),q.TgZ(21,"button",12),q.NdJ("click",function(){return n.close()}),q._uU(22,"Close"),q.qZA(),q.TgZ(23,"button",13),q.NdJ("click",function(){return n.cancelPayment()}),q._uU(24,"Cancel Payment"),q.qZA(),q.qZA()),2&t){var e=q.MAs(9);q.xp6(2),q.Q6J("formGroup",n.form),q.xp6(9),q.hij("",e.value.length," / 150"),q.xp6(1),q.Q6J("ngIf",null==n.formErrors?null:n.formErrors.notes),q.xp6(2),q.Q6J("expanded",!0),q.xp6(5),q.Q6J("ngIf",n.loader),q.xp6(2),q.Q6J("disabled",n.loader)("mat-dialog-close",!0),q.xp6(2),q.Q6J("disabled",!n.form.valid||n.loader)}},directives:[c.xY,_.JL,_.sg,U.KE,U.hX,_.Fj,Y.Nt,_.JJ,_.u,_.nD,U.bx,S.O5,At.pp,At.ib,At.yz,At.yK,Ct,c.H8,Q.lW,c.ZT,U.TO,F.pW],encapsulation:2}),t}(),Pt=i(86710),Mt=i(4919),wt=i(37771),kt=i(19333),Ut=i(90519),It=i(75973),Nt=i(32802),Et=i(32789),St=i(33935),Yt=i(11436),Jt=i(29790),Qt=["search"];function Dt(t,n){if(1&t){var e=q.EpF();q.TgZ(0,"div",38),q.TgZ(1,"button",39),q.NdJ("click",function(){return q.CHM(e),q.oxw(2).addDialog()}),q.TgZ(2,"mat-icon"),q._uU(3,"add"),q.qZA(),q.qZA(),q.qZA()}}function Ft(t,n){if(1&t&&(q.ynx(0),q.YNc(1,Dt,4,0,"div",37),q.ALo(2,"async"),q.BQk()),2&t){var e=q.oxw();q.xp6(1),q.Q6J("ngIf",q.lcZ(2,1,e.isAdmin$))}}function $t(t,n){if(1&t){var e=q.EpF();q.TgZ(0,"div",41),q.TgZ(1,"button",42),q.NdJ("click",function(){return q.CHM(e),q.oxw(2).addDialog()}),q.ALo(2,"async"),q.TgZ(3,"mat-icon"),q._uU(4,"add"),q.qZA(),q._uU(5,"Add Payment "),q.qZA(),q.qZA()}if(2&t){var a=q.oxw(2);q.xp6(1),q.Q6J("disabled",q.lcZ(2,1,null==a.dataSource?null:a.dataSource.loading$))}}function Lt(t,n){if(1&t&&(q.ynx(0),q.YNc(1,$t,6,3,"div",40),q.ALo(2,"async"),q.BQk()),2&t){var e=q.oxw();q.xp6(1),q.Q6J("ngIf",q.lcZ(2,1,e.isAdmin$))}}function Rt(t,n){if(1&t){var e=q.EpF();q.TgZ(0,"button",43),q.NdJ("click",function(){return q.CHM(e),q.oxw().clearSearch()}),q.TgZ(1,"mat-icon"),q._uU(2,"close"),q.qZA(),q.qZA()}}function jt(t,n){1&t&&(q.TgZ(0,"mat-header-cell",44),q._uU(1," Amount "),q.qZA())}function Bt(t,n){if(1&t&&(q.TgZ(0,"mat-cell"),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.xp6(1),q.hij(" ",e.amount," ")}}function zt(t,n){1&t&&(q.TgZ(0,"mat-header-cell",44),q._uU(1," Payment Method "),q.qZA())}function Ht(t,n){if(1&t&&(q.TgZ(0,"mat-cell"),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.xp6(1),q.hij(" ",null==e.payment_method?null:e.payment_method.payment_method_display_name," ")}}function Gt(t,n){1&t&&(q.TgZ(0,"mat-header-cell",44),q._uU(1," Payment Date "),q.qZA())}function Wt(t,n){if(1&t&&(q.TgZ(0,"mat-cell"),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.xp6(1),q.hij(" ",e.payment_date," ")}}function Vt(t,n){1&t&&(q.TgZ(0,"mat-header-cell",44),q._uU(1," Tenant "),q.qZA())}function Xt(t,n){if(1&t&&(q.TgZ(0,"mat-cell"),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.xp6(1),q.hij(" ",null==e.tenant?null:e.tenant.first_name," ")}}function Kt(t,n){1&t&&(q.TgZ(0,"mat-header-cell",44),q._uU(1," Lease "),q.qZA())}function tn(t,n){if(1&t&&(q.TgZ(0,"mat-cell"),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.xp6(1),q.hij(" ",null==e||null==e.lease?null:e.lease.lease_number," ")}}function nn(t,n){1&t&&(q.TgZ(0,"mat-header-cell",44),q._uU(1," Property "),q.qZA())}function en(t,n){if(1&t&&(q.TgZ(0,"mat-cell"),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.xp6(1),q.hij(" ",null==e||null==e.property?null:e.property.property_name," ")}}function an(t,n){1&t&&(q.TgZ(0,"mat-header-cell",44),q._uU(1," Receipt Number "),q.qZA())}function on(t,n){if(1&t&&(q.TgZ(0,"mat-cell"),q._uU(1),q.qZA()),2&t){var e=n.$implicit;q.xp6(1),q.hij(" ",e.receipt_number," ")}}function rn(t,n){1&t&&(q.TgZ(0,"mat-header-cell",44),q._uU(1," Status "),q.qZA())}function ln(t,n){if(1&t){var e=q.EpF();q.TgZ(0,"mat-cell"),q.TgZ(1,"button",45),q.NdJ("click",function(){var t=q.CHM(e).$implicit;return q.oxw().paymentDetails(t)}),q.TgZ(2,"mat-icon"),q._uU(3),q.qZA(),q._uU(4),q.qZA(),q.qZA()}if(2&t){var a=n.$implicit;q.xp6(1),q.Tol(null==a.status?null:a.status.status_class),q.xp6(2),q.Oqu(null==a.status?null:a.status.status_icon),q.xp6(1),q.hij(" ",null==a.status?null:a.status.status_text," ")}}function cn(t,n){1&t&&(q.TgZ(0,"mat-header-cell"),q._uU(1," Actions "),q.qZA())}function sn(t,n){if(1&t){var e=q.EpF();q.TgZ(0,"button",53),q.NdJ("click",function(){q.CHM(e);var t=q.oxw(3).$implicit;return q.oxw().approvePayment(t)}),q.TgZ(1,"mat-icon",54),q._uU(2,"check_circle"),q.qZA(),q.TgZ(3,"span"),q._uU(4,"Approve"),q.qZA(),q.qZA()}2&t&&q.Q6J("matTooltipPosition","above")}function un(t,n){if(1&t&&(q.ynx(0),q.YNc(1,sn,5,1,"button",52),q.BQk()),2&t){var e=q.oxw(2).$implicit;q.xp6(1),q.Q6J("ngIf",e.is_pending)}}function dn(t,n){if(1&t&&(q.ynx(0),q.YNc(1,un,2,1,"ng-container",33),q.ALo(2,"async"),q.BQk()),2&t){var e=q.oxw(2);q.xp6(1),q.Q6J("ngIf",q.lcZ(2,1,e.isAdmin$))}}function pn(t,n){if(1&t){var e=q.EpF();q.TgZ(0,"button",56),q.NdJ("click",function(){q.CHM(e);var t=q.oxw(3).$implicit;return q.oxw().cancelPayment(t)}),q.TgZ(1,"mat-icon",57),q._uU(2,"highlight_off"),q.qZA(),q.TgZ(3,"span"),q._uU(4,"Cancel"),q.qZA(),q.qZA()}2&t&&q.Q6J("matTooltipPosition","above")}function mn(t,n){if(1&t&&(q.ynx(0),q.YNc(1,pn,5,1,"button",55),q.BQk()),2&t){var e=q.oxw(2).$implicit;q.xp6(1),q.Q6J("ngIf",e.is_pending)}}function gn(t,n){if(1&t&&(q.ynx(0),q.YNc(1,mn,2,1,"ng-container",33),q.ALo(2,"async"),q.BQk()),2&t){var e=q.oxw(2);q.xp6(1),q.Q6J("ngIf",q.lcZ(2,1,e.isAdmin$))}}var fn=function(){return["approve-payment"]},hn=function(){return["cancel-payment"]};function _n(t,n){if(1&t){var e=q.EpF();q.TgZ(0,"mat-cell",46),q.TgZ(1,"button",47),q.TgZ(2,"mat-icon"),q._uU(3,"more_vert"),q.qZA(),q.qZA(),q.TgZ(4,"mat-menu",null,48),q.TgZ(6,"button",49),q.NdJ("click",function(){var t=q.CHM(e).$implicit;return q.oxw().paymentDetails(t,!0)}),q.TgZ(7,"mat-icon",50),q._uU(8,"visibility"),q.qZA(),q.TgZ(9,"span"),q._uU(10,"View"),q.qZA(),q.qZA(),q.TgZ(11,"button",51),q.NdJ("click",function(){var t=q.CHM(e).$implicit;return q.oxw().onSelected(t)}),q.TgZ(12,"mat-icon",50),q._uU(13,"picture_as_pdf"),q.qZA(),q.TgZ(14,"span"),q._uU(15,"Receipt"),q.qZA(),q.qZA(),q.YNc(16,dn,3,3,"ng-container",3),q.YNc(17,gn,3,3,"ng-container",3),q.qZA(),q.qZA()}if(2&t){var a=n.$implicit,o=q.MAs(5);q.xp6(1),q.Q6J("matMenuTriggerFor",o),q.xp6(5),q.Q6J("matTooltipPosition","above"),q.xp6(5),q.s9C("routerLink",a.id),q.Q6J("matTooltipPosition","above"),q.xp6(5),q.Q6J("robiPermission",q.DdM(6,fn)),q.xp6(1),q.Q6J("robiPermission",q.DdM(7,hn))}}function Zn(t,n){1&t&&q._UZ(0,"mat-header-row")}function vn(t,n){1&t&&q._UZ(0,"mat-row")}function bn(t,n){1&t&&(q.TgZ(0,"span"),q._uU(1,"No Payments Data"),q.qZA())}function yn(t,n){1&t&&(q.TgZ(0,"div",58),q._UZ(1,"mat-progress-bar",59),q.qZA())}var xn=function(){return["create-payment"]},Cn=function(){var t=function(){function t(n,e,a,i,r,l,c,s,u){var d=this;o(this,t),this.store=n,this.userService=e,this.landlordService=a,this.tenantService=i,this.paymentService=r,this.utilityBillService=l,this.notification=c,this.authenticationService=s,this.dialog=u,this.displayedColumns=["amount","payment_method_id","payment_date","tenant_id","lease_id","property_id","receipt_number","payment_status","actions"],this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100],this.isLandlord=!1,this.activeUser=this.userService.getActiveUser(),this.isAgent$=this.store.pipe((0,Pt.Ys)(Mt.sk)),this.isAdmin$=this.authenticationService.isAdmin(),this.store.pipe((0,Pt.Ys)(Mt.iG)).subscribe(function(t){t&&(d.isLandlord=!0,d.store.pipe((0,Pt.Ys)(Mt.Zb)).subscribe(function(t){return d.landlordID=t}))})}return r(t,[{key:"ngOnInit",value:function(){var t,n,e,a=this;switch(this.dataSource=new mt.U(this.paymentService),this.dataSource.meta$.subscribe(function(t){return a.meta=t}),null===(t=this.activeUser)||void 0===t?void 0:t.userType){case wt.x.ADMIN:this.dataSource.load("",0,0,"updated_at","desc");break;case wt.x.LANDLORD:this.dataSource.loadNested(this.landlordService.nestedPaymentsUrl(null===(n=this.activeUser)||void 0===n?void 0:n.userID),"",0,0);break;case wt.x.TENANT:this.dataSource.loadNested(this.tenantService.nestedPaymentsUrl(null===(e=this.activeUser)||void 0===e?void 0:e.userID),"",0,0)}}},{key:"ngAfterViewInit",value:function(){var t=this;(0,d.R)(this.search.nativeElement,"keyup").pipe((0,m.b)(1e3),(0,g.x)(),(0,f.b)(function(){t.paginator.pageIndex=0,t.loadData()})).subscribe(),this.paginator.page.pipe((0,f.b)(function(){return t.loadData()})).subscribe(),this.sort.sortChange.subscribe(function(){return t.paginator.pageIndex=0}),(0,p.T)(this.sort.sortChange,this.paginator.page).pipe((0,f.b)(function(){return t.loadData()})).subscribe()}},{key:"loadData",value:function(){var t,n,e;switch(null===(t=this.activeUser)||void 0===t?void 0:t.userType){case wt.x.ADMIN:this.dataSource.load(this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction);break;case wt.x.LANDLORD:this.dataSource.loadNested(this.landlordService.nestedPaymentsUrl(null===(n=this.activeUser)||void 0===n?void 0:n.userID),this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction);break;case wt.x.TENANT:this.dataSource.loadNested(this.tenantService.nestedPaymentsUrl(null===(e=this.activeUser)||void 0===e?void 0:e.userID),this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction)}}},{key:"clearSearch",value:function(){this.search.nativeElement.value="",this.loadData()}},{key:"addDialog",value:function(){var t=this,n=new c.vA;n.disableClose=!0,n.autoFocus=!0,n.data={},this.dialog.open(pt,n).afterClosed().subscribe(function(n){n&&t.loadData()})}},{key:"paymentDetails",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=new c.vA;e.disableClose=!0,e.autoFocus=!0,e.data={data:t,isStandAlone:n},this.dialog.open(Ct,e).afterClosed().subscribe(function(t){})}},{key:"approvePayment",value:function(t){var n=this;this.dialogRef=this.dialog.open(h.z,{disableClose:!0,data:{title:"Approve Payment? Confirm permanent action."}}),this.dialogRef.afterClosed().subscribe(function(e){e&&n.paymentService.approve({id:t.id}).subscribe(function(t){n.loader=!1,n.notification.showNotification("success","Success !! Payment has been Approved."),n.loadData()},function(t){n.notification.showNotification("danger","Error !! Could not approve payment.")}),n.dialogRef=null})}},{key:"cancelPayment",value:function(t){var n=this,e=new c.vA;e.disableClose=!0,e.autoFocus=!0,e.data={data:t},this.dialog.open(Ot,e).afterClosed().subscribe(function(t){t&&n.loadData()})}},{key:"openConfirmationDialog",value:function(t){var n=this;this.dialogRef=this.dialog.open(h.z,{disableClose:!0}),this.dialogRef.afterClosed().subscribe(function(e){e&&n.delete(t),n.dialogRef=null})}},{key:"delete",value:function(t){}},{key:"onSelected",value:function(t){this.paymentService.changeSelectedPayment(t)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(Pt.yh),q.Y36(kt.f),q.Y36(Ut.c),q.Y36(M.a),q.Y36(O.t),q.Y36(O.t),q.Y36(w.g),q.Y36(It.$),q.Y36(c.uw))},t.\u0275cmp=q.Xpm({type:t,selectors:[["robi-utility-bills"]],viewQuery:function(t,n){var e;(1&t&&(q.Gf(Qt,5),q.Gf(s.NW,7),q.Gf(u.YE,7)),2&t)&&(q.iGM(e=q.CRH())&&(n.search=e.first),q.iGM(e=q.CRH())&&(n.paginator=e.first),q.iGM(e=q.CRH())&&(n.sort=e.first))},decls:57,vars:25,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[4,"robiPermission"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-body"],[1,"row","search-form-section"],[1,"col-7",3,"hidden"],[1,"search-form-field"],["matInput","","autocomplete","off",3,"placeholder","disabled"],["search",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-responsive"],["matSort","","matSortActive","payment_date","matSortDirection","desc","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","amount"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","payment_method_id"],["matColumnDef","payment_date"],["matColumnDef","tenant_id"],["matColumnDef","lease_id"],["matColumnDef","property_id"],["matColumnDef","receipt_number"],["matColumnDef","payment_status"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["class","button-row",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSizeOptions"],["pagination",""],["class","fab-container",4,"ngIf"],[1,"fab-container"],["mat-fab","",1,"fab-toggler",3,"click"],["class","col-5",4,"ngIf"],[1,"col-5"],["mat-button","","matPrefix","","mat-stroked-button","","aria-label","add new",3,"disabled","click"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-sort-header",""],["mat-button","",3,"click"],[1,"button-row"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","matTooltip","View Payment Details.",3,"matTooltipPosition","click"],["color","primary"],["mat-menu-item","","matTooltip","View Payment Details.",3,"matTooltipPosition","routerLink","click"],["mat-menu-item","","matTooltip","Approve Payment.",3,"matTooltipPosition","click",4,"ngIf"],["mat-menu-item","","matTooltip","Approve Payment.",3,"matTooltipPosition","click"],["color","",1,"text-success"],["mat-menu-item","","matTooltip","Cancel Payment.",3,"matTooltipPosition","click",4,"ngIf"],["mat-menu-item","","matTooltip","Cancel Payment.",3,"matTooltipPosition","click"],["color","warn"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,n){if(1&t&&(q.TgZ(0,"div",0),q.TgZ(1,"div",1),q.TgZ(2,"div",2),q.YNc(3,Ft,3,3,"ng-container",3),q.TgZ(4,"div",4),q.TgZ(5,"div",5),q.TgZ(6,"div",6),q.TgZ(7,"h4",7),q._uU(8),q.ALo(9,"translate"),q.qZA(),q.qZA(),q.TgZ(10,"div",8),q.TgZ(11,"div",9),q.YNc(12,Lt,3,3,"ng-container",3),q.TgZ(13,"div",10),q.ALo(14,"async"),q.TgZ(15,"mat-form-field",11),q._UZ(16,"input",12,13),q.ALo(18,"translate"),q.YNc(19,Rt,3,0,"button",14),q.qZA(),q.qZA(),q.qZA(),q.TgZ(20,"div",15),q.TgZ(21,"mat-table",16,17),q.ynx(23,18),q.YNc(24,jt,2,0,"mat-header-cell",19),q.YNc(25,Bt,2,1,"mat-cell",20),q.BQk(),q.ynx(26,21),q.YNc(27,zt,2,0,"mat-header-cell",19),q.YNc(28,Ht,2,1,"mat-cell",20),q.BQk(),q.ynx(29,22),q.YNc(30,Gt,2,0,"mat-header-cell",19),q.YNc(31,Wt,2,1,"mat-cell",20),q.BQk(),q.ynx(32,23),q.YNc(33,Vt,2,0,"mat-header-cell",19),q.YNc(34,Xt,2,1,"mat-cell",20),q.BQk(),q.ynx(35,24),q.YNc(36,Kt,2,0,"mat-header-cell",19),q.YNc(37,tn,2,1,"mat-cell",20),q.BQk(),q.ynx(38,25),q.YNc(39,nn,2,0,"mat-header-cell",19),q.YNc(40,en,2,1,"mat-cell",20),q.BQk(),q.ynx(41,26),q.YNc(42,an,2,0,"mat-header-cell",19),q.YNc(43,on,2,1,"mat-cell",20),q.BQk(),q.ynx(44,27),q.YNc(45,rn,2,0,"mat-header-cell",19),q.YNc(46,ln,5,5,"mat-cell",20),q.BQk(),q.ynx(47,28),q.YNc(48,cn,2,0,"mat-header-cell",29),q.YNc(49,_n,18,8,"mat-cell",30),q.BQk(),q.YNc(50,Zn,1,0,"mat-header-row",31),q.YNc(51,vn,1,0,"mat-row",32),q.qZA(),q.YNc(52,bn,2,0,"span",33),q.YNc(53,yn,2,0,"div",34),q.ALo(54,"async"),q._UZ(55,"mat-paginator",35,36),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA()),2&t){var e=q.MAs(17);q.xp6(3),q.Q6J("robiPermission",q.DdM(23,xn)),q.xp6(5),q.Oqu(q.lcZ(9,15,"robi.payments.title")),q.xp6(4),q.Q6J("robiPermission",q.DdM(24,xn)),q.xp6(1),q.Q6J("hidden",!q.lcZ(14,17,n.isAdmin$)),q.xp6(3),q.s9C("placeholder",q.lcZ(18,19,"robi.filter")),q.Q6J("disabled",0===(null==n.meta?null:n.meta.total)),q.xp6(3),q.Q6J("ngIf",e.value),q.xp6(2),q.Q6J("dataSource",n.dataSource),q.xp6(29),q.Q6J("matHeaderRowDef",n.displayedColumns),q.xp6(1),q.Q6J("matRowDefColumns",n.displayedColumns),q.xp6(1),q.Q6J("ngIf",0===(null==n.meta?null:n.meta.total)),q.xp6(1),q.Q6J("ngIf",q.lcZ(54,21,null==n.dataSource?null:n.dataSource.loading$)||n.loader),q.xp6(2),q.Q6J("length",null==n.meta?null:n.meta.total)("pageIndex",n.pageIndex)("pageSizeOptions",n.pageSizeOptions)}},directives:[Nt.A,U.KE,Y.Nt,S.O5,Et.BZ,u.YE,Et.w1,Et.fO,Et.Dz,Et.as,Et.nj,s.NW,Q.lW,D.Hw,U.qo,U.R9,Et.ge,u.nU,Et.ev,St.p6,St.VK,St.OP,Yt.gM,l.rH,Et.XQ,Et.Gk,F.pW],pipes:[Jt.X$,S.Ov],styles:[".fab-container[_ngcontent-%COMP%]{position:fixed;bottom:35px;right:35px;z-index:100;display:flex;flex-direction:column-reverse;align-items:center}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;margin-bottom:5px}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:17px}.fab-toggler[_ngcontent-%COMP%]{float:right;z-index:100}.card[_ngcontent-%COMP%]{background:none repeat scroll 0 0 #FFFFFF;border-radius:4px;color:#444}.card-container[_ngcontent-%COMP%], .front[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%;height:390px;border-radius:4px}.card[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{height:105px;overflow:hidden;border-radius:4px 4px 0 0}.card[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.user[_ngcontent-%COMP%]{border-radius:50%;display:block;height:120px;margin:-55px auto 0;overflow:hidden;width:120px;box-shadow:0 16px 38px -12px rgba(0,0,0,.561),0 4px 25px rgba(0,0,0,.122),0 8px 10px -5px rgba(0,0,0,.2)}.card[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background:none repeat scroll 0 0 #FFFFFF;border:4px solid #FFFFFF;width:100%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:rgba(0,0,0,0);box-shadow:none;padding:10px 20px 20px}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{min-height:160px}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{height:215px}.card[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:22px;line-height:28px;margin:10px 0 0;text-align:center;text-transform:capitalize}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:5px 0;font-weight:400;line-height:20px}.card[_ngcontent-%COMP%]   .profession[_ngcontent-%COMP%]{color:#999;text-align:center;margin-bottom:20px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{border-top:1px solid #EEEEEE;color:#999;margin:0;padding:10px 0 0;text-align:center}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{font-size:18px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 7px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .btn-simple[_ngcontent-%COMP%]{margin-top:-6px}.card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:15px 20px;height:90px}.card[_ngcontent-%COMP%]   .motto[_ngcontent-%COMP%]{border-bottom:1px solid #EEEEEE;color:#999;font-size:14px;font-weight:400;padding-bottom:10px;text-align:center}.card[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{width:100%;margin-top:20px;display:flex;justify-content:center}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]{display:block;float:left;width:33.333333%;text-align:center}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]:first-child{border-right:1px solid #EEEEEE}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]:last-child{border-left:1px solid #EEEEEE}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:300;margin-bottom:5px}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777}.title[_ngcontent-%COMP%]{color:#506a85;text-align:center;font-weight:300;font-size:44px;margin-bottom:90px;line-height:90%}.title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:17px;color:#999;text-transform:uppercase;margin:0}.space-30[_ngcontent-%COMP%]{height:30px;display:block}.space-50[_ngcontent-%COMP%]{height:50px;display:block}.space-200[_ngcontent-%COMP%]{height:200px;display:block}.white-board[_ngcontent-%COMP%]{background-color:#fff;min-height:200px;padding:60px 60px 20px}.ct-heart[_ngcontent-%COMP%]{color:#f74933}pre.prettyprint[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #999;margin-top:20px;padding:20px;text-align:left}.atv[_ngcontent-%COMP%], .str[_ngcontent-%COMP%]{color:#05ae0e}.tag[_ngcontent-%COMP%], .pln[_ngcontent-%COMP%], .kwd[_ngcontent-%COMP%]{color:#3472f7}.atn[_ngcontent-%COMP%]{color:#2c93ff}.pln[_ngcontent-%COMP%]{color:#333}.com[_ngcontent-%COMP%]{color:#999}.btn-simple[_ngcontent-%COMP%]{opacity:.8;color:#666;background-color:transparent}.btn-simple[_ngcontent-%COMP%]:hover, .btn-simple[_ngcontent-%COMP%]:focus{background-color:transparent;box-shadow:none;opacity:1}.btn-simple[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.navbar-brand-logo[_ngcontent-%COMP%]{padding:0}.navbar-brand-logo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{border:1px solid #333333;border-radius:50%;float:left;overflow:hidden;width:60px}.navbar[_ngcontent-%COMP%]   .navbar-brand-logo[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#fff;float:left;font-size:18px;font-weight:400;line-height:20px;margin-left:10px;margin-top:10px;width:60px}.navbar-default[_ngcontent-%COMP%]   .navbar-brand-logo[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#555}.clickable[_ngcontent-%COMP%]{cursor:pointer}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none){.front[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{-webkit-backface-visibility:visible;backface-visibility:visible}.back[_ngcontent-%COMP%]{visibility:hidden;-ms-transition:all .2s cubic-bezier(.92,.01,.83,.67)}.front[_ngcontent-%COMP%]{z-index:4}.card-container[_ngcontent-%COMP%]:not(.manual-flip):hover   .back[_ngcontent-%COMP%], .card-container.manual-flip.hover[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{z-index:5;visibility:visible}}"]}),t}(),An=i(39075);function Tn(t,n){1&t&&(q.TgZ(0,"div",3),q.TgZ(1,"mat-icon"),q._uU(2,"error"),q.qZA(),q._uU(3," Not Found "),q.qZA())}function qn(t,n){if(1&t&&q._UZ(0,"iframe",20),2&t){var e=q.oxw(2);q.Q6J("src",e.pdfSrc,q.uOi)}}function On(t,n){1&t&&(q.TgZ(0,"div",21),q._UZ(1,"mat-progress-bar",22),q.qZA())}function Pn(t,n){if(1&t&&(q.TgZ(0,"span",23),q.TgZ(1,"mat-icon",24),q._uU(2,"phone"),q.qZA(),q._uU(3),q.qZA()),2&t){var e=q.oxw().ngIf;q.xp6(3),q.hij(" ",null==e||null==e.tenant?null:e.tenant.contact_phone," ")}}function Mn(t,n){if(1&t&&(q.TgZ(0,"div",4),q.TgZ(1,"div",5),q.TgZ(2,"div",6),q.TgZ(3,"div",7),q.TgZ(4,"div",8),q.TgZ(5,"h4",9),q._uU(6),q.qZA(),q._UZ(7,"p",10),q.qZA(),q.TgZ(8,"div",11),q.YNc(9,qn,1,1,"iframe",12),q.YNc(10,On,2,0,"div",13),q.qZA(),q.qZA(),q.qZA(),q.TgZ(11,"div",14),q.TgZ(12,"div",7),q.TgZ(13,"div",8),q.TgZ(14,"h4",9),q._uU(15,"Summary"),q.qZA(),q.TgZ(16,"p",10),q._uU(17),q.qZA(),q.qZA(),q.TgZ(18,"div",11),q.TgZ(19,"div",5),q.TgZ(20,"div",15),q.TgZ(21,"div",16),q._uU(22," Amount "),q.qZA(),q._uU(23),q.qZA(),q.TgZ(24,"div",15),q.TgZ(25,"div",16),q._uU(26," Payment Date "),q.qZA(),q._uU(27),q.qZA(),q.qZA(),q.TgZ(28,"div",5),q.TgZ(29,"div",15),q.TgZ(30,"div",16),q._uU(31," Payment Method "),q.qZA(),q._uU(32),q.qZA(),q.qZA(),q.TgZ(33,"div",5),q.TgZ(34,"div",15),q.TgZ(35,"div",16),q._uU(36," Property "),q.qZA(),q._uU(37),q.qZA(),q.qZA(),q.TgZ(38,"div",5),q.TgZ(39,"div",15),q.TgZ(40,"div",16),q._uU(41," Lease "),q.qZA(),q._uU(42),q.qZA(),q.TgZ(43,"div",15),q.TgZ(44,"div",16),q._uU(45," Unit "),q.qZA(),q.TgZ(46,"div"),q._uU(47),q.qZA(),q.qZA(),q.qZA(),q.TgZ(48,"div",5),q.TgZ(49,"div",17),q.TgZ(50,"div",16),q._uU(51," Tenant "),q.qZA(),q.TgZ(52,"div",18),q._uU(53),q.YNc(54,Pn,4,1,"span",19),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA()),2&t){var e=n.ngIf,a=q.oxw();q.xp6(6),q.Oqu(e.receipt_number),q.xp6(3),q.Q6J("ngIf",a.pdfSrc),q.xp6(1),q.Q6J("ngIf",a.loader),q.xp6(7),q.hij(" Receipt #: ",null==e?null:e.receipt_number,""),q.xp6(6),q.hij(" ",null==e?null:e.amount," "),q.xp6(4),q.hij(" ",null==e?null:e.payment_date," "),q.xp6(5),q.hij(" ",null==e||null==e.payment_method?null:e.payment_method.payment_method_display_name," "),q.xp6(5),q.lnq(" ",null==e||null==e.property?null:e.property.property_name," (",null==e||null==e.property?null:e.property.property_code,") - ",null==e||null==e.property?null:e.property.location," "),q.xp6(5),q.hij(" ",null==e||null==e.lease?null:e.lease.lease_number," "),q.xp6(5),q.Oqu(null==e||null==e.lease?null:e.lease.unit_names),q.xp6(6),q.lnq(" ",null==e||null==e.tenant?null:e.tenant.first_name," ",null==e||null==e.tenant?null:e.tenant.middle_name," ",null==e||null==e.tenant?null:e.tenant.last_name," "),q.xp6(1),q.Q6J("ngIf",null==e||null==e.tenant?null:e.tenant.contact_phone)}}var wn=l.Bz.forChild([{path:"",component:Cn},{path:"create",component:pt},{path:":id",component:function(){var t=function(){function t(n,e,a,i,r,l,c,s,u){var d=this;o(this,t),this.store=n,this.landlordService=e,this.fb=a,this.dialog=r,this.paymentService=l,this.notification=c,this.router=s,this.route=u,this.loader=!1,this.memberStatuses=[],this.members=[],this.guarantorStatues=[],this.memberId="",this.isLandlord=!1,this.domSanitizer=i,this.store.pipe((0,Pt.Ys)(Mt.iG)).subscribe(function(t){t&&(d.isLandlord=!0,d.store.pipe((0,Pt.Ys)(Mt.Zb)).subscribe(function(t){return d.landlordID=t}))})}return r(t,[{key:"ngOnInit",value:function(){var t=this;this.paymentID=this.route.snapshot.paramMap.get("id"),this.paymentData$=this.paymentService.selectedPaymentChanges$,this.paymentService.selectedPaymentChanges$.subscribe(function(n){n&&(t.paymentData$=(0,v.of)(n)),n||(t.isLandlord?t.landlordService.getNestedById(t.landlordService.nestedInvoiceUrl(t.landlordID,t.paymentID)).subscribe(function(n){t.paymentData$=(0,v.of)(n),t.paymentService.changeSelectedPayment(n)}):t.paymentService.getById(t.paymentID).subscribe(function(n){t.paymentData$=(0,v.of)(n),t.paymentService.changeSelectedPayment(n)}))}),this.downloadInvoice(this.paymentID)}},{key:"downloadInvoice",value:function(t){var n=this;this.loader=!0,this.paymentService.downloadReceipt({id:t,pdf:!0}).subscribe(function(t){n.pdfSrc=n.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(t)),n.loader=!1},function(){n.loader=!1,n.notification.showNotification("danger","Error downloading receipt !")})}},{key:"showFile",value:function(t){var n=new Blob([t],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n);else{var e=window.URL.createObjectURL(n),a=document.createElement("a");a.href=e,a.download="statement.pdf",a.click(),setTimeout(function(){window.URL.revokeObjectURL(e)},100)}}},{key:"onOutletActivated",value:function(t){}},{key:"ngAfterViewInit",value:function(){}}]),t}();return t.\u0275fac=function(n){return new(n||t)(q.Y36(Pt.yh),q.Y36(Ut.c),q.Y36(_.qu),q.Y36(An.H7),q.Y36(c.uw),q.Y36(O.t),q.Y36(w.g),q.Y36(l.F0),q.Y36(l.gz))},t.\u0275cmp=q.Xpm({type:t,selectors:[["robi-view-payment"]],decls:5,vars:4,consts:[[1,"main-content"],["no_data",""],["class","container-fluid",4,"ngIf","ngIfElse"],[1,"not-found"],[1,"container-fluid"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-category"],[1,"card-body"],["width","500","height","600","style","width: 100%","type","application/pdf",3,"src",4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],[1,"col-md-4"],[1,"col-6"],[1,"card-category","text-gray"],[1,"col-12"],[1,"row","col-12"],["class","ml-5",4,"ngIf"],["width","500","height","600","type","application/pdf",2,"width","100%",3,"src"],[1,"d-flex","justify-content-center","spinner-container"],["color","primary","mode","query","value","50","bufferValue","75"],[1,"ml-5"],["inline","true"]],template:function(t,n){if(1&t&&(q.TgZ(0,"div",0),q.YNc(1,Tn,4,0,"ng-template",null,1,q.W1O),q.YNc(3,Mn,55,16,"div",2),q.ALo(4,"async"),q.qZA()),2&t){var e=q.MAs(2);q.xp6(3),q.Q6J("ngIf",q.lcZ(4,2,n.paymentData$))("ngIfElse",e)}},directives:[S.O5,D.Hw,F.pW],pipes:[S.Ov],styles:[".fab-container[_ngcontent-%COMP%]{position:fixed;bottom:35px;right:35px;z-index:100;display:flex;flex-direction:column-reverse;align-items:center}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;margin-bottom:5px}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:17px}.fab-toggler[_ngcontent-%COMP%]{float:right;z-index:100}.card[_ngcontent-%COMP%]{background:none repeat scroll 0 0 #FFFFFF;border-radius:4px;color:#444}.card-container[_ngcontent-%COMP%], .front[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%;height:390px;border-radius:4px}.card[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{height:105px;overflow:hidden;border-radius:4px 4px 0 0}.card[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.user[_ngcontent-%COMP%]{border-radius:50%;display:block;height:120px;margin:-55px auto 0;overflow:hidden;width:120px;box-shadow:0 16px 38px -12px rgba(0,0,0,.561),0 4px 25px rgba(0,0,0,.122),0 8px 10px -5px rgba(0,0,0,.2)}.card[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background:none repeat scroll 0 0 #FFFFFF;border:4px solid #FFFFFF;width:100%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:rgba(0,0,0,0);box-shadow:none;padding:10px 20px 20px}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{min-height:160px}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{height:215px}.card[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:22px;line-height:28px;margin:10px 0 0;text-align:center;text-transform:capitalize}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:5px 0;font-weight:400;line-height:20px}.card[_ngcontent-%COMP%]   .profession[_ngcontent-%COMP%]{color:#999;text-align:center;margin-bottom:20px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{border-top:1px solid #EEEEEE;color:#999;margin:0;padding:10px 0 0;text-align:center}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{font-size:18px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 7px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .btn-simple[_ngcontent-%COMP%]{margin-top:-6px}.card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:15px 20px;height:90px}.card[_ngcontent-%COMP%]   .motto[_ngcontent-%COMP%]{border-bottom:1px solid #EEEEEE;color:#999;font-size:14px;font-weight:400;padding-bottom:10px;text-align:center}.card[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{width:100%;margin-top:20px;display:flex;justify-content:center}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]{display:block;float:left;width:33.333333%;text-align:center}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]:first-child{border-right:1px solid #EEEEEE}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]:last-child{border-left:1px solid #EEEEEE}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:300;margin-bottom:5px}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777}.title[_ngcontent-%COMP%]{color:#506a85;text-align:center;font-weight:300;font-size:44px;margin-bottom:90px;line-height:90%}.title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:17px;color:#999;text-transform:uppercase;margin:0}.space-30[_ngcontent-%COMP%]{height:30px;display:block}.space-50[_ngcontent-%COMP%]{height:50px;display:block}.space-200[_ngcontent-%COMP%]{height:200px;display:block}.white-board[_ngcontent-%COMP%]{background-color:#fff;min-height:200px;padding:60px 60px 20px}.ct-heart[_ngcontent-%COMP%]{color:#f74933}pre.prettyprint[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #999;margin-top:20px;padding:20px;text-align:left}.atv[_ngcontent-%COMP%], .str[_ngcontent-%COMP%]{color:#05ae0e}.tag[_ngcontent-%COMP%], .pln[_ngcontent-%COMP%], .kwd[_ngcontent-%COMP%]{color:#3472f7}.atn[_ngcontent-%COMP%]{color:#2c93ff}.pln[_ngcontent-%COMP%]{color:#333}.com[_ngcontent-%COMP%]{color:#999}.btn-simple[_ngcontent-%COMP%]{opacity:.8;color:#666;background-color:transparent}.btn-simple[_ngcontent-%COMP%]:hover, .btn-simple[_ngcontent-%COMP%]:focus{background-color:transparent;box-shadow:none;opacity:1}.btn-simple[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.navbar-brand-logo[_ngcontent-%COMP%]{padding:0}.navbar-brand-logo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{border:1px solid #333333;border-radius:50%;float:left;overflow:hidden;width:60px}.navbar[_ngcontent-%COMP%]   .navbar-brand-logo[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#fff;float:left;font-size:18px;font-weight:400;line-height:20px;margin-left:10px;margin-top:10px;width:60px}.navbar-default[_ngcontent-%COMP%]   .navbar-brand-logo[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#555}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none){.front[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{-webkit-backface-visibility:visible;backface-visibility:visible}.back[_ngcontent-%COMP%]{visibility:hidden;-ms-transition:all .2s cubic-bezier(.92,.01,.83,.67)}.front[_ngcontent-%COMP%]{z-index:4}.card-container[_ngcontent-%COMP%]:not(.manual-flip):hover   .back[_ngcontent-%COMP%], .card-container.manual-flip.hover[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{z-index:5;visibility:visible}}"]}),t}()}]),kn=i(83893),Un=function(){var t=function t(){o(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=q.oAB({type:t}),t.\u0275inj=q.cJS({imports:[[kn.m,wn,E.Co]]}),t}()}}])}();