!function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(i):a.value}})(t,e,n||t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,n=u(t);if(e){var a=u(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return l(this,i)}}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[270],{47270:function(t,r,l){l.r(r),l.d(r,{AdminLayoutModule:function(){return lt}});var c,s=l(39895),d=l(86710),p=l(3679),h=l(88229),m=l(79765),f=l(25917),g=l(66682),Z=l(45435),v=l(68307),y=l(46782),_=l(54395),b=l(87519),A=l(88002),T=l(65792),q=l(4919),S=l(99692),U=function(t){a(i,t);var e=o(i);function i(t){return n(this,i),e.call(this,t)}return i}(l(1581).y),C=l(11494),x=l(37716),D=l(97316),w=l(63385),O=l(65),Y=l(26215),$=l(91841),L=((c=function(t){a(l,t);var r=o(l);function l(t){var e;return n(this,l),(e=r.call(this,t,"units/vacants")).selectedVacantUnitSource=new Y.X(null),e.selectedVacantUnitChanges$=e.selectedVacantUnitSource.asObservable(),e.localHttpClient=t,e}return e(l,[{key:"changeSelectedVacantUnit",value:function(t){this.selectedVacantUnitSource.next(t)}},{key:"search",value:function(t){var e="".concat(i(u(l.prototype),"getResourceUrl",this).call(this),"/search");return this.localHttpClient.post(e,{filter:t})}}]),l}(O.b)).\u0275fac=function(t){return new(t||c)(x.LFG($.eN))},c.\u0275prov=x.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c),P=l(25572),j=l(98295),N=l(67441),k=l(38583),R=l(32789),B=l(72458),Q=l(12178),I=["search"];function J(t,e){if(1&t&&(x.TgZ(0,"mat-option",44),x._uU(1),x.qZA()),2&t){var i=e.$implicit;x.Q6J("value",i.period_id),x.xp6(1),x.hij(" ",i.period_name," ")}}function E(t,e){1&t&&(x.TgZ(0,"mat-header-cell",45),x._uU(1," Mode "),x.qZA())}function F(t,e){if(1&t&&(x.TgZ(0,"mat-cell"),x._uU(1),x.ALo(2,"titlecase"),x.qZA()),2&t){var i=e.$implicit;x.xp6(1),x.hij(" ",x.lcZ(2,1,i.unit_mode)," ")}}function G(t,e){1&t&&(x.TgZ(0,"mat-header-cell",45),x._uU(1," Type "),x.qZA())}function H(t,e){if(1&t&&(x.TgZ(0,"mat-cell"),x._uU(1),x.qZA()),2&t){var i=e.$implicit;x.xp6(1),x.hij(" ",null==i.unit_type?null:i.unit_type.unit_type_display_name," ")}}function z(t,e){1&t&&(x.TgZ(0,"mat-header-cell",45),x._uU(1," Unit "),x.qZA())}function V(t,e){if(1&t&&(x.TgZ(0,"mat-cell"),x._uU(1),x.ALo(2,"titlecase"),x.qZA()),2&t){var i=e.$implicit;x.xp6(1),x.hij(" ",x.lcZ(2,1,i.unit_name)," ")}}function M(t,e){1&t&&(x.TgZ(0,"mat-header-cell",45),x._uU(1," Property "),x.qZA())}function X(t,e){if(1&t&&(x.TgZ(0,"mat-cell"),x._uU(1),x.qZA()),2&t){var i=e.$implicit;x.xp6(1),x.AsE(" ",null==i.property?null:i.property.property_name," - (",null==i.property?null:i.property.property_code,")")}}function W(t,e){1&t&&(x.TgZ(0,"mat-header-cell"),x._uU(1," Location "),x.qZA())}function K(t,e){if(1&t&&(x.TgZ(0,"mat-cell"),x._uU(1),x.qZA()),2&t){var i=e.$implicit;x.xp6(1),x.hij(" ",null==i.property?null:i.property.location," ")}}function tt(t,e){1&t&&x._UZ(0,"mat-header-row")}function et(t,e){1&t&&x._UZ(0,"mat-row")}function it(t,e){1&t&&(x.TgZ(0,"span"),x._uU(1,"No Data"),x.qZA())}function nt(t,e){1&t&&(x.TgZ(0,"div",46),x._UZ(1,"mat-progress-bar",47),x.qZA())}var at=[{path:"dashboard",component:function(){var t=function(){function t(e,i,a,r,o,l){n(this,t),this.store=e,this.localStorageService=i,this.route=a,this._formBuilder=r,this.propertyService=o,this.vacantUnitService=l,this.properties=[],this.propertyServerSideFilteringCtrl=new p.NI,this.searching=!1,this.filteredServerSideProperties=new h.t(1),this._onDestroy=new m.xQ,this.vacantUnitColumns=["unit_mode","unit_type_id","unit_name","property_id","location"],this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[3,5,10,25,50,100],this.barChartOptions={scaleShowVerticalLines:!1,responsive:!0},this.barChartLabels=[],this.barChartType="bar",this.barChartLegend=!0,this.barChartData=[],this.pieChartLabels=["Pending","Paid","Billed"],this.pieChartType="doughnut",this.options={responsive:!0,maintainAspectRatio:!1},this.formBillingStats=this._formBuilder.group({property_id:[""],period_id:[""]})}return e(t,[{key:"ngOnInit",value:function(){var t,e,i,n=this;this.scopes$=this.store.pipe((0,d.Ys)(q.Al)),this.store.pipe((0,d.Ys)(q.Zb)).subscribe(function(t){return n.LoggedInUserId=t}),this.route.snapshot.data.adminData&&(this.adminSummary=this.route.snapshot.data.adminData),this.periods$=(0,f.of)(null===(t=this.adminSummary)||void 0===t?void 0:t.periodical_billing);var a=null===(e=this.adminSummary)||void 0===e?void 0:e.periodical_billing[0];this.billed$=(0,f.of)(null==a?void 0:a.amount_billed_as_currency),this.paid$=(0,f.of)(null==a?void 0:a.amount_paid_as_currency),this.pending$=(0,f.of)(null==a?void 0:a.amount_due_as_currency),this.billingForm=this._formBuilder.group({period_id:[null==a?void 0:a.period_id,[p.kI.required]]}),this.pieChartData$=(0,f.of)([null==a?void 0:a.amount_due,null==a?void 0:a.amount_paid,null==a?void 0:a.amount_billed]);var r=[],o=[],l=[],u=[];(null===(i=this.adminSummary)||void 0===i?void 0:i.periodical_billing.reverse()).forEach(function(t){r.push(null==t?void 0:t.period_name),o.push(null==t?void 0:t.amount_billed),l.push(null==t?void 0:t.amount_paid),u.push(null==t?void 0:t.amount_due)}),this.barChartLabels=r,this.barChartData=[{data:u,label:"Pending"},{data:l,label:"Paid"},{data:o,label:"Billed"}],this.vacantUnitsDataSource=new U(this.vacantUnitService),this.vacantUnitsDataSource.meta$.subscribe(function(t){return n.meta=t}),this.vacantUnitsDataSource.load("",0,0,"id","desc"),this.propertyServerSideFilteringCtrl.valueChanges.pipe((0,Z.h)(function(t){return!!t}),(0,v.b)(function(){return n.searching=!0}),(0,y.R)(this._onDestroy),(0,_.b)(2e3),(0,b.x)(),(0,A.U)(function(t){t=t.toLowerCase(),n.propertiesFiltered$=n.propertyService.search(t)}),(0,T.g)(500)).subscribe(function(t){n.searching=!1,n.filteredServerSideProperties.next(t)},function(t){n.searching=!1})}},{key:"onPeriodChange",value:function(t){var e,i=(null===(e=this.adminSummary)||void 0===e?void 0:e.periodical_billing).find(function(e){return(null==e?void 0:e.period_id)===t});this.billed$=(0,f.of)(null==i?void 0:i.amount_billed_as_currency),this.paid$=(0,f.of)(null==i?void 0:i.amount_paid_as_currency),this.pending$=(0,f.of)(null==i?void 0:i.amount_due_as_currency),this.pieChartData$=(0,f.of)([null==i?void 0:i.amount_due,null==i?void 0:i.amount_paid,null==i?void 0:i.amount_billed])}},{key:"clearSearch",value:function(){this.search.nativeElement.value="",this.loadData()}},{key:"ngAfterViewInit",value:function(){var t=this;this.paginator.page.pipe((0,v.b)(function(){return t.loadData()})).subscribe(),this.sort.sortChange.subscribe(function(){return t.paginator.pageIndex=0}),(0,g.T)(this.sort.sortChange,this.paginator.page).pipe((0,v.b)(function(){return t.loadData()})).subscribe()}},{key:"loadData",value:function(){this.vacantUnitsDataSource.load("",this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(x.Y36(d.yh),x.Y36(D.n),x.Y36(s.gz),x.Y36(p.qu),x.Y36(w.b),x.Y36(L))},t.\u0275cmp=x.Xpm({type:t,selectors:[["robi-dashboard"]],viewQuery:function(t,e){var i;(1&t&&(x.Gf(I,5),x.Gf(S.NW,7),x.Gf(C.YE,7)),2&t)&&(x.iGM(i=x.CRH())&&(e.search=i.first),x.iGM(i=x.CRH())&&(e.paginator=i.first),x.iGM(i=x.CRH())&&(e.sort=i.first))},decls:116,vars:42,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-3","col-md-6","col-sm-6"],[1,"card","card-stats"],[1,"card-header","card-header-accent"],[1,"card-title"],[1,"card-footer"],[1,"stats"],[1,"card-header","card-header-info"],[1,"col-lg-6","col-md-12"],[1,"card"],[1,"card-body"],[1,"col-lg-12","col-md-12","col-sm-12"],[2,"display","block"],["baseChart","",3,"options","data","labels","chartType"],[1,"col-lg-4","col-md-6","col-sm-6"],[3,"formGroup"],[1,"row","col-lg-12"],[1,"col-lg-12"],["color","primary","appearance","outline"],["formControlName","period_id",3,"selectionChange"],["periodSelect",""],[3,"value",4,"ngFor","ngForOf"],["baseChart","",3,"datasets","labels","options","legend","chartType"],[1,"col-lg-12","col-md-12"],[1,"card-category"],[1,"card-body","table-responsive"],["matSort","","matSortActive","unit_name","matSortDirection","desc","matSortDisableClear","",1,"table-hover",3,"dataSource"],["table",""],["matColumnDef","unit_mode"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","unit_type_id"],["matColumnDef","unit_name"],["matColumnDef","property_id"],["matColumnDef","location"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSizeOptions"],["pagination",""],[3,"value"],["mat-sort-header",""],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,e){if(1&t){var i=x.EpF();x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",5),x.TgZ(6,"p",6),x._uU(7),x.qZA(),x.qZA(),x.TgZ(8,"div",7),x.TgZ(9,"div",8),x._uU(10,"Pending Amount"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(11,"div",3),x.TgZ(12,"div",4),x.TgZ(13,"div",9),x.TgZ(14,"p",6),x._uU(15),x.qZA(),x.qZA(),x.TgZ(16,"div",7),x.TgZ(17,"div",8),x._uU(18,"Properties / Units"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(19,"div",3),x.TgZ(20,"div",4),x.TgZ(21,"div",5),x.TgZ(22,"p",6),x._uU(23),x.qZA(),x.qZA(),x.TgZ(24,"div",7),x.TgZ(25,"div",8),x._uU(26," Leases"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(27,"div",3),x.TgZ(28,"div",4),x.TgZ(29,"div",9),x.TgZ(30,"p",6),x._uU(31),x.qZA(),x.qZA(),x.TgZ(32,"div",7),x.TgZ(33,"div",8),x._uU(34,"Tenants"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(35,"div",2),x.TgZ(36,"div",10),x.TgZ(37,"div",11),x.TgZ(38,"div",5),x._uU(39," Period Billing "),x.qZA(),x.TgZ(40,"div",12),x.TgZ(41,"div",2),x.TgZ(42,"div",13),x.TgZ(43,"div",14),x._UZ(44,"canvas",15),x.ALo(45,"async"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(46,"div",2),x.TgZ(47,"div",16),x.TgZ(48,"div",4),x.TgZ(49,"div",7),x.TgZ(50,"div",8),x._uU(51),x.ALo(52,"async"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(53,"div",16),x.TgZ(54,"div",4),x.TgZ(55,"div",7),x.TgZ(56,"div",8),x._uU(57),x.ALo(58,"async"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(59,"div",16),x.TgZ(60,"div",4),x.TgZ(61,"div",7),x.TgZ(62,"div",8),x._uU(63),x.ALo(64,"async"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(65,"form",17),x.TgZ(66,"div",18),x.TgZ(67,"div",19),x.TgZ(68,"mat-form-field",20),x.TgZ(69,"mat-label"),x._uU(70,"Period"),x.qZA(),x.TgZ(71,"mat-select",21,22),x.NdJ("selectionChange",function(){x.CHM(i);var t=x.MAs(72);return e.onPeriodChange(t.value)}),x.YNc(73,J,2,2,"mat-option",23),x.ALo(74,"async"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(75,"div",10),x.TgZ(76,"div",11),x.TgZ(77,"div",5),x._uU(78," Period Payments "),x.qZA(),x.TgZ(79,"div",12),x.TgZ(80,"div",14),x._UZ(81,"canvas",24),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(82,"div",2),x.TgZ(83,"div",25),x.TgZ(84,"div",11),x.TgZ(85,"div",5),x.TgZ(86,"h4",6),x._uU(87,"Vacant Units"),x.qZA(),x.TgZ(88,"p",26),x._uU(89),x.qZA(),x.qZA(),x.TgZ(90,"div",27),x.TgZ(91,"mat-table",28,29),x.ynx(93,30),x.YNc(94,E,2,0,"mat-header-cell",31),x.YNc(95,F,3,3,"mat-cell",32),x.BQk(),x.ynx(96,33),x.YNc(97,G,2,0,"mat-header-cell",31),x.YNc(98,H,2,1,"mat-cell",32),x.BQk(),x.ynx(99,34),x.YNc(100,z,2,0,"mat-header-cell",31),x.YNc(101,V,3,3,"mat-cell",32),x.BQk(),x.ynx(102,35),x.YNc(103,M,2,0,"mat-header-cell",31),x.YNc(104,X,2,2,"mat-cell",32),x.BQk(),x.ynx(105,36),x.YNc(106,W,2,0,"mat-header-cell",37),x.YNc(107,K,2,1,"mat-cell",32),x.BQk(),x.YNc(108,tt,1,0,"mat-header-row",38),x.YNc(109,et,1,0,"mat-row",39),x.qZA(),x.YNc(110,it,2,0,"span",40),x.ALo(111,"async"),x.YNc(112,nt,2,0,"div",41),x.ALo(113,"async"),x._UZ(114,"mat-paginator",42,43),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}2&t&&(x.xp6(7),x.Oqu(null==e.adminSummary?null:e.adminSummary.pending_amount),x.xp6(8),x.AsE("",null==e.adminSummary?null:e.adminSummary.total_properties," / ",null==e.adminSummary?null:e.adminSummary.total_units,""),x.xp6(8),x.Oqu(null==e.adminSummary?null:e.adminSummary.total_leases),x.xp6(8),x.Oqu(null==e.adminSummary?null:e.adminSummary.total_tenants),x.xp6(13),x.Q6J("options",e.options)("data",x.lcZ(45,28,e.pieChartData$))("labels",e.pieChartLabels)("chartType",e.pieChartType),x.xp6(7),x.hij("Billed: ",x.lcZ(52,30,e.billed$),""),x.xp6(6),x.hij("Paid: ",x.lcZ(58,32,e.paid$),""),x.xp6(6),x.hij("Pending: ",x.lcZ(64,34,e.pending$),""),x.xp6(2),x.Q6J("formGroup",e.billingForm),x.xp6(8),x.Q6J("ngForOf",x.lcZ(74,36,e.periods$)),x.xp6(8),x.Q6J("datasets",e.barChartData)("labels",e.barChartLabels)("options",e.barChartOptions)("legend",e.barChartLegend)("chartType",e.barChartType),x.xp6(8),x.hij("Total: ",null==e.meta?null:e.meta.total,""),x.xp6(2),x.Q6J("dataSource",e.vacantUnitsDataSource),x.xp6(17),x.Q6J("matHeaderRowDef",e.vacantUnitColumns),x.xp6(1),x.Q6J("matRowDefColumns",e.vacantUnitColumns),x.xp6(1),x.Q6J("ngIf",0===x.lcZ(111,38,e.vacantUnitsDataSource.meta$).total),x.xp6(2),x.Q6J("ngIf",x.lcZ(113,40,null==e.vacantUnitsDataSource?null:e.vacantUnitsDataSource.loading$)||e.loader),x.xp6(2),x.Q6J("length",null==e.meta?null:e.meta.total)("pageIndex",e.pageIndex)("pageSizeOptions",e.pageSizeOptions))},directives:[P.jh,p._Y,p.JL,p.sg,j.KE,j.hX,N.gD,p.JJ,p.u,k.sg,R.BZ,C.YE,R.w1,R.fO,R.Dz,R.as,R.nj,k.O5,S.NW,B.ey,R.ge,C.nU,R.ev,R.XQ,R.Gk,Q.pW],pipes:[k.Ov,k.rS],styles:[""]}),t}()}],rt=l(83893),ot=l(52218),lt=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x.oAB({type:t}),t.\u0275inj=x.cJS({imports:[[rt.m,s.Bz.forChild(at),ot.Co,P.m9]]}),t}()}}])}();