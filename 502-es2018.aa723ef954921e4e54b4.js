"use strict";(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[502],{78502:function(t,n,e){e.r(n),e.d(n,{ReadingModule:function(){return zt}});var i=e(39895),o=e(22238),r=e(99692),a=e(11494),l=e(22759),c=e(66682),s=e(54395),d=e(87519),g=e(68307),u=e(28292),p=e(3679),m=e(26215),f=e(25917),h=e(88229),Z=e(79765),_=e(45435),b=e(46782),x=e(88002),C=e(65792),v=e(37716),y=e(28508),O=e(63385),M=e(65),A=e(91841);let T=(()=>{class t extends M.b{constructor(t){super(t,"readings"),this.selectedReadingSource=new m.X(null),this.selectedReadingChanges$=this.selectedReadingSource.asObservable(),this.localHttpClient=t}changeSelectedReading(t){this.selectedReadingSource.next(t)}previousReading(t){return this.localHttpClient.post(`${super.getResourceUrl()}/previous`,t)}csvTemplate(t){return this.localHttpClient.post(`${super.getResourceUrl()}/csv_template`,t,{responseType:"blob"})}excelTemplate(t){return this.localHttpClient.post(`${super.getResourceUrl()}/excel_template`,t,{responseType:"blob"})}uploadReadings(t){return this.localHttpClient.post(`${super.getResourceUrl()}/upload_readings`,t)}}return t.\u0275fac=function(n){return new(n||t)(v.LFG(A.eN))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var P=e(57404),q=e(98295),w=e(67441),U=e(72458),k=e(52218),F=e(38583),E=e(82613),S=e(51095),N=e(11436),I=e(76627),R=e(49983),J=e(43220),Q=e(12178);const D=["stepper"];function Y(t,n){if(1&t&&(v.TgZ(0,"mat-option",21),v._uU(1),v.qZA()),2&t){const t=n.$implicit;v.Q6J("value",t.id),v.xp6(1),v.AsE(" ",t.property_name," ",t.location," ")}}function B(t,n){if(1&t&&(v.TgZ(0,"mat-error",22),v._uU(1),v.qZA()),2&t){const t=v.oxw();v.xp6(1),v.Oqu(t.formErrors.property_id)}}function L(t,n){if(1&t&&(v.TgZ(0,"mat-option",21),v._uU(1),v.qZA()),2&t){const t=n.$implicit;v.Q6J("value",t.id),v.xp6(1),v.hij(" ",t.utility_display_name," ")}}function $(t,n){if(1&t&&(v.TgZ(0,"mat-error",22),v._uU(1),v.qZA()),2&t){const t=v.oxw();v.xp6(1),v.Oqu(t.formErrors.utility_id)}}function G(t,n){if(1&t&&(v.TgZ(0,"mat-radio-button",26),v._uU(1),v.qZA()),2&t){const t=n.$implicit;v.Q6J("value",t.id),v.xp6(1),v.hij(" ",t.description," ")}}function H(t,n){if(1&t&&(v.TgZ(0,"mat-option",21),v._uU(1),v.qZA()),2&t){const t=n.$implicit;v.Q6J("value",t.id),v.xp6(1),v.hij(" ",t.unit_name," ")}}function z(t,n){if(1&t&&(v.TgZ(0,"mat-error",22),v._uU(1),v.qZA()),2&t){const t=v.oxw(4);v.xp6(1),v.Oqu(t.formErrors.unit_id)}}function j(t,n){if(1&t&&(v.TgZ(0,"span",50),v._uU(1),v.qZA()),2&t){const t=n.ngIf;v.xp6(1),v.hij(" ",t.reading_date," ")}}function X(t,n){if(1&t&&(v.TgZ(0,"mat-error",22),v._uU(1),v.qZA()),2&t){const t=v.oxw(4);v.xp6(1),v.Oqu(t.formErrors.reading_date)}}function V(t,n){if(1&t&&(v.TgZ(0,"span",50),v._uU(1),v.qZA()),2&t){const t=n.ngIf,e=v.oxw().ngIf;v.xp6(1),v.hij(" ",t-e.current_reading," ")}}function W(t,n){if(1&t&&(v.ynx(0),v.TgZ(1,"span",50),v._uU(2),v.qZA(),v.TgZ(3,"span",51),v._uU(4," Consumption:"),v.qZA(),v.YNc(5,V,2,1,"span",44),v.ALo(6,"async"),v.BQk()),2&t){const t=n.ngIf,e=v.oxw().index,i=v.oxw(3);v.xp6(2),v.hij(" ",t.current_reading," "),v.xp6(3),v.Q6J("ngIf",v.lcZ(6,2,i.consumptionBank[e]))}}function K(t,n){if(1&t&&(v.TgZ(0,"mat-error",22),v._uU(1),v.qZA()),2&t){const t=v.oxw(4);v.xp6(1),v.Oqu(t.formErrors.current_reading)}}function tt(t,n){if(1&t){const t=v.EpF();v.TgZ(0,"div",34),v.TgZ(1,"div",35),v.TgZ(2,"div",36),v.TgZ(3,"mat-form-field",17),v.TgZ(4,"mat-label"),v._uU(5),v.qZA(),v.TgZ(6,"mat-select",37,38),v.NdJ("selectionChange",function(){const n=v.CHM(t).index,e=v.MAs(7);return v.oxw(3).onUnitItemChange(e.value,n)}),v.YNc(8,H,2,2,"mat-option",15),v.ALo(9,"async"),v.qZA(),v.YNc(10,z,2,1,"mat-error",16),v.qZA(),v.qZA(),v.TgZ(11,"div",36),v.TgZ(12,"mat-form-field",17),v.TgZ(13,"mat-label"),v._uU(14,"Reading Date *"),v.qZA(),v.TgZ(15,"input",39),v.NdJ("click",function(){return v.CHM(t),v.MAs(18).open()}),v.qZA(),v._UZ(16,"mat-datepicker-toggle",40),v._UZ(17,"mat-datepicker",41,42),v.TgZ(19,"mat-hint",43),v.TgZ(20,"span"),v._uU(21," Previous:"),v.qZA(),v.YNc(22,j,2,1,"span",44),v.ALo(23,"async"),v.qZA(),v.YNc(24,X,2,1,"mat-error",16),v.qZA(),v.qZA(),v.TgZ(25,"div",36),v.TgZ(26,"mat-form-field",17),v.TgZ(27,"mat-label"),v._uU(28,"Current Reading"),v.qZA(),v.TgZ(29,"input",45),v.NdJ("change",function(n){const e=v.CHM(t).index;return v.oxw(3).onCurrentReadingChange(n,e)}),v.qZA(),v.TgZ(30,"mat-hint",43),v.TgZ(31,"span"),v._uU(32," Previous:"),v.qZA(),v.YNc(33,W,7,4,"ng-container",20),v.ALo(34,"async"),v.qZA(),v.YNc(35,K,2,1,"mat-error",16),v.qZA(),v.qZA(),v.TgZ(36,"div",46),v.TgZ(37,"button",47),v.NdJ("click",function(){const n=v.CHM(t).index;return v.oxw(3).utilityBillFieldCopy(n)}),v.TgZ(38,"mat-icon"),v._uU(39,"file_copy"),v.qZA(),v.qZA(),v.TgZ(40,"button",48),v.NdJ("click",function(){const n=v.CHM(t).index;return v.oxw(3).utilityBillFieldRemove(n)}),v.TgZ(41,"mat-icon",49),v._uU(42,"close"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&t){const t=n.index,e=v.MAs(18),i=v.oxw(3);v.xp6(1),v.Q6J("formGroupName",t),v.xp6(4),v.hij("",t+1,". Unit *"),v.xp6(3),v.Q6J("ngForOf",v.lcZ(9,12,i.units$)),v.xp6(2),v.Q6J("ngIf",null==i.formErrors?null:i.formErrors.unit_id),v.xp6(5),v.Q6J("matDatepicker",e),v.xp6(1),v.Q6J("for",e),v.xp6(6),v.Q6J("ngIf",v.lcZ(23,14,i.pastReadings[t])),v.xp6(2),v.Q6J("ngIf",null==i.formErrors?null:i.formErrors.reading_date),v.xp6(9),v.Q6J("ngIf",v.lcZ(34,16,i.pastReadings[t])),v.xp6(2),v.Q6J("ngIf",null==i.formErrors?null:i.formErrors.current_reading),v.xp6(2),v.Q6J("matTooltipPosition","above"),v.xp6(3),v.Q6J("matTooltipPosition","above")}}function nt(t,n){1&t&&(v.TgZ(0,"div",52),v._UZ(1,"mat-progress-bar",53),v.qZA())}function et(t,n){if(1&t){const t=v.EpF();v.ynx(0),v.TgZ(1,"form",9),v.YNc(2,tt,43,18,"div",27),v.TgZ(3,"div",28),v.TgZ(4,"div",29),v.TgZ(5,"button",30),v.NdJ("click",function(){return v.CHM(t),v.oxw(2).utilityBillFieldAdd()}),v.TgZ(6,"mat-icon",31),v._uU(7,"add"),v.qZA(),v.TgZ(8,"span"),v._uU(9,"Another Unit"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.YNc(10,nt,2,0,"div",32),v.TgZ(11,"div"),v.TgZ(12,"button",33),v.NdJ("click",function(){return v.CHM(t),v.oxw(2).create()}),v._uU(13," Save "),v.qZA(),v.qZA(),v.qZA(),v.BQk()}if(2&t){const t=v.oxw(2);v.xp6(1),v.Q6J("formGroup",t.utilityBillsFormGroup),v.xp6(1),v.Q6J("ngForOf",t.utilityBillFieldsAll.controls),v.xp6(3),v.Q6J("matTooltipPosition","above"),v.xp6(5),v.Q6J("ngIf",t.loader),v.xp6(2),v.Q6J("disabled",!t.utilityBillsFormGroup.valid||!t.utilitySummaryFormGroup.valid)}}function it(t,n){if(1&t){const t=v.EpF();v.ynx(0),v.TgZ(1,"form",9),v.TgZ(2,"div",54),v.TgZ(3,"div",55),v.TgZ(4,"input",56,57),v.NdJ("change",function(n){return v.CHM(t),v.oxw(2).onReadingTemplateSelect(n.target.files)}),v.qZA(),v.qZA(),v.TgZ(6,"div",55),v.TgZ(7,"button",58),v.NdJ("click",function(){return v.CHM(t),v.MAs(5).click()}),v.TgZ(8,"span"),v._uU(9,"Upload Readings"),v.qZA(),v.qZA(),v.qZA(),v._UZ(10,"div",55),v.qZA(),v.TgZ(11,"div",54),v.TgZ(12,"div",59),v.TgZ(13,"button",60),v.NdJ("click",function(){return v.CHM(t),v.oxw(2).getTemplateFileCSV()}),v.TgZ(14,"i",61),v._uU(15,"cloud_download"),v.qZA(),v.TgZ(16,"span"),v._uU(17,"Template File (.csv)"),v.qZA(),v.qZA(),v.TgZ(18,"button",60),v.NdJ("click",function(){return v.CHM(t),v.oxw(2).getTemplateFileExcel()}),v.TgZ(19,"i",61),v._uU(20,"cloud_download"),v.qZA(),v.TgZ(21,"span"),v._uU(22,"Template File (Excel)"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.BQk()}if(2&t){const t=v.oxw(2);v.xp6(1),v.Q6J("formGroup",t.autoDataEntryFormGroup)}}function ot(t,n){if(1&t){const t=v.EpF();v.ynx(0),v.TgZ(1,"div",2),v.TgZ(2,"div",23),v.TgZ(3,"mat-radio-group",24),v.NdJ("ngModelChange",function(n){return v.CHM(t),v.oxw().entryChoice=n}),v.YNc(4,G,2,2,"mat-radio-button",25),v.qZA(),v.qZA(),v.qZA(),v.YNc(5,et,14,5,"ng-container",20),v.YNc(6,it,23,1,"ng-container",20),v.BQk()}if(2&t){const t=v.oxw();v.xp6(3),v.Q6J("ngModel",t.entryChoice),v.xp6(1),v.Q6J("ngForOf",t.dataEntryOptions),v.xp6(1),v.Q6J("ngIf","manual"===t.entryChoice),v.xp6(1),v.Q6J("ngIf","import"===t.entryChoice)}}let rt=(()=>{class t{constructor(t,n,e,i,o,r,a,l){this.fb=t,this.dialog=n,this.router=e,this._formBuilder=i,this.utilityService=o,this.propertyService=r,this.readingService=a,this.notification=l,this.properties=[],this.errorInForm=new m.X(!1),this.formError$=this.errorInForm.asObservable(),this.loader=!1,this.memberMethods=[],this.groups=[],this.memberStatuses=[],this.memberSources=[],this.memberTypes=[],this.profilePicFileToUpload=null,this.membershipFormFileToUpload=null,this.profilePicUrl="",this.membershipFormToUpload=null,this.membershipFormUrl="",this.urls=new Array,this.details="noooone",this.progress=0,this.units=[],this.units$=(0,f.of)([]),this.pastReadings=[],this.consumptionBank=[],this.propertyServerSideFilteringCtrl=new p.NI,this.filteredServerSideProperties=new h.t(1),this.searching=!1,this._onDestroy=new Z.xQ,this.entryChoice="manual",this.dataEntryOptions=[{id:"manual",description:"Manual Entry"},{id:"import",description:"Auto Import (CSV or Excel)"}],this.logoToUpload=null,this.logoUrl="",this.photoToUpload=null,this.photoUrl="",this.entryType="manual",this.propertyService.list(["property_name","location"]).subscribe(t=>this.properties=t,()=>this.properties=[])}ngOnInit(){this.utilities$=this.utilityService.list(["utility_name ","utility_display_name"]),this.propertyServerSideFilteringCtrl.valueChanges.pipe((0,_.h)(t=>!!t),(0,g.b)(()=>this.searching=!0),(0,b.R)(this._onDestroy),(0,s.b)(200),(0,d.x)(),(0,x.U)(t=>this.properties?(t=t.toLowerCase(),this.properties.filter(n=>n.property_name.toLowerCase().indexOf(t)>-1||n.location.toLowerCase().indexOf(t)>-1)):[]),(0,C.g)(500)).subscribe(t=>{this.searching=!1,this.filteredServerSideProperties.next(t)},t=>{this.searching=!1}),this.utilitySummaryFormGroup=this._formBuilder.group({property_id:["",[p.kI.required]],utility_id:["",[p.kI.required]]}),this.autoDataEntryFormGroup=this._formBuilder.group({entry_type:[this.entryType]}),this.utilityBillsFormGroup=this._formBuilder.group({unitReadings:this.fb.array([this.utilityBillFieldCreate()])})}onPropertyItemChange(t){this.units=this.properties.find(n=>n.id===t).units,this.units$=(0,f.of)(this.properties.find(n=>n.id===t).units),this.previousReadings$=(0,f.of)(null)}onUtilityItemChange(t){this.utilityID=t}onCurrentReadingChange(t,n){this.consumption$=(0,f.of)(t.target.value),this.consumptionBank[n]=this.consumption$}onUnitItemChange(t,n){this.previousReadings$=this.readingService.previousReading({unit_id:t,utility_id:this.utilityID}),this.pastReadings[n]=this.previousReadings$}getTemplateFileCSV(){const t={...this.utilitySummaryFormGroup.value};this.readingService.csvTemplate(t).subscribe(t=>{console.log(t),this.showFile(t,"csv")},t=>{})}getTemplateFileExcel(){const t={...this.utilitySummaryFormGroup.value};this.readingService.excelTemplate(t).subscribe(t=>{console.log(t),this.showFile(t,"xlsx")},t=>{})}showFile(t,n){const e=new Blob([t],{type:"text/csv"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(e);const i=window.URL.createObjectURL(e),o=document.createElement("a");o.href=i,o.download="statement."+n,o.click(),setTimeout(function(){window.URL.revokeObjectURL(i)},100)}onLogoSelect(t){if(t.length>0){this.logoToUpload=t.item(0);const n=new FileReader;n.onload=t=>{this.logoUrl=t.target.result},n.readAsDataURL(this.logoToUpload)}}onReadingTemplateSelect(t){if(t.length>0){this.photoToUpload=t.item(0),this.photoName=t.item(0).name;const n=new FileReader;n.onload=t=>{this.photoUrl=t.target.result},n.readAsDataURL(this.photoToUpload),this.loader=!0;const e=new FormData;e.append("readings",this.photoToUpload),this.uploadPhoto(e)}}uploadPhoto(t){this.readingService.uploadReadings(t).subscribe(t=>{this.loader=!1,this.notification.showNotification("success","Success !! Readings has been uploaded.")},t=>{if(this.loader=!1,0!==t.payment&&(this.formErrors=t,this.formErrors))for(const n in this.formErrors);})}onToggleChange(t){this.entryType=t}get utilityBillFieldsAll(){return this.utilityBillsFormGroup.get("unitReadings")}utilityBillFieldCreate(t){return this.fb.group({unit_id:[null==t?void 0:t.unit_id,[p.kI.required]],reading_date:[t?null==t?void 0:t.reading_date:(new Date).toISOString().substring(0,10),[p.kI.required]],current_reading:[null==t?void 0:t.current_reading,[p.kI.required]]})}utilityBillFieldAdd(t){this.utilityBillFields=this.utilityBillsFormGroup.get("unitReadings"),this.utilityBillFields.push(this.utilityBillFieldCreate(t))}utilityBillFieldRemove(t){this.utilityBillFields=this.utilityBillsFormGroup.get("unitReadings"),this.utilityBillFields.removeAt(t)}utilityBillFieldCopy(t){this.utilityBillFields=this.utilityBillsFormGroup.get("unitReadings");const n=[];n.push(this.utilityBillFields.value[t]),this.utilityBillFieldAdd(...n)}create(){this.errorInForm.next(!1);const t={...this.utilitySummaryFormGroup.value,...this.utilityBillsFormGroup.value};this.loader=!0,this.readingService.create(t).subscribe(t=>{this.loader=!1,this.notification.showNotification("success","Success !! Utility Readings Added."),this.onSaveComplete()},t=>{var n,e;if(this.errorInForm.next(!0),this.loader=!1,0!==t.member){if(this.formErrors=null==t?void 0:t.error,this.formErrors&&this.formErrors)for(const t in this.formErrors)this.stepper.selectedIndex=0,this.utilitySummaryFormGroup.controls[t]&&(null===(n=this.utilitySummaryFormGroup.controls[t])||void 0===n||n.markAsTouched(),this.utilitySummaryFormGroup.controls[t].setErrors({incorrect:!0})),this.utilityBillsFormGroup.controls[t]&&(null===(e=this.utilityBillsFormGroup.controls[t])||void 0===e||e.markAsTouched(),this.utilityBillsFormGroup.controls[t].setErrors({incorrect:!0}))}else this.notification.showNotification("danger","Connection Error !! Nothing created. Check your connection and retry.")})}onSaveComplete(){this.router.navigate(["/readings"])}}return t.\u0275fac=function(n){return new(n||t)(v.Y36(p.qu),v.Y36(o.uw),v.Y36(i.F0),v.Y36(p.qu),v.Y36(y.t),v.Y36(O.b),v.Y36(T),v.Y36(P.g))},t.\u0275cmp=v.Xpm({type:t,selectors:[["robi-add-reading"]],viewQuery:function(t,n){if(1&t&&v.Gf(D,7),2&t){let t;v.iGM(t=v.CRH())&&(n.stepper=t.first)}},decls:33,vars:12,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[3,"formGroup"],[1,"col-12","col-sm-6","col-md-6","col-lg-6","col-xl-6"],["color","primary","appearance","outline"],["formControlName","property_id",3,"selectionChange"],["propertySelect",""],["placeholderLabel","Find Property...","noEntriesFoundLabel","No matching property found ...",3,"formControl","searching"],[3,"value",4,"ngFor","ngForOf"],["align","start","class","form__error",4,"ngIf"],["color","primary","appearance","outline",1,"full-width"],["placeholder","Utility *","formControlName","utility_id",3,"selectionChange"],["utilitySelect",""],[4,"ngIf"],[3,"value"],["align","start",1,"form__error"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12","mt-2","mb-2"],["aria-label","Select an option",3,"ngModel","ngModelChange"],["class","example-radio-button mr-4",3,"value",4,"ngFor","ngForOf"],[1,"example-radio-button","mr-4",3,"value"],["class","mt-4","formArrayName","unitReadings",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-6"],["mat-button","","type","button","matTooltip","Add Unit",1,"mat-stroked-button","mat-accent","mb-3",3,"matTooltipPosition","click"],["color","material-icons"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["mat-raised-button","","type","submit","color","primary",1,"pull-right","btn",3,"disabled","click"],["formArrayName","unitReadings",1,"mt-4"],[1,"row","col-sm-12",3,"formGroupName"],[1,"col-11","col-sm-5","col-md-5","col-lg-3","col-xl-3"],["placeholder","Unit","formControlName","unit_id",3,"selectionChange"],["unitSelect",""],["matInput","","formControlName","reading_date","placeholder","Reading Date",3,"matDatepicker","click"],["matSuffix","",3,"for"],["touchUi",""],["reading_date",""],["align","start",1,"text-success"],["class","ml-1",4,"ngIf"],["matInput","","type","number","min","0","formControlName","current_reading","placeholder","Current Reading",3,"change"],[1,"col-2","col-sm-2","col-md-3","col-lg-3","col-xl-3","mt-md-3","mt-lg-3","mt-xl-3"],["mat-icon-button","","aria-label","Copy to New Unit","matTooltip","Copy to New Unit",1,"btn","btn-link","btn-sm","btn-just-icon",3,"matTooltipPosition","click"],["mat-icon-button","","color","accent","aria-label","Remove Unit","matTooltip","Remove Unit",1,"btn","btn-link","btn-sm","btn-just-icon",3,"matTooltipPosition","click"],["color","warn"],[1,"ml-1"],[1,"text-info","ml-4"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"],[1,"row","mt-5"],[1,"col-12","col-sm-6","col-md-6","col-lg-4","col-xl-4"],["type","file","accept","image/*",3,"change"],["profileFileInput",""],["mat-button","","type","button",1,"mat-raised-button","mat-primary",3,"click"],[1,"col-12"],["mat-button","","type","button",1,"mat-accent",3,"click"],[1,"material-icons","mr-1"]],template:function(t,n){if(1&t){const t=v.EpF();v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.TgZ(3,"div",3),v.TgZ(4,"div",4),v.TgZ(5,"div",5),v.TgZ(6,"h4",6),v._uU(7,"New Utility Readings"),v.qZA(),v._UZ(8,"p",7),v.qZA(),v.TgZ(9,"div",8),v.TgZ(10,"form",9),v.TgZ(11,"div",2),v.TgZ(12,"div",10),v.TgZ(13,"mat-form-field",11),v.TgZ(14,"mat-label"),v._uU(15,"Property *"),v.qZA(),v.TgZ(16,"mat-select",12,13),v.NdJ("selectionChange",function(){v.CHM(t);const e=v.MAs(17);return n.onPropertyItemChange(e.value)}),v.TgZ(18,"mat-option"),v._UZ(19,"ngx-mat-select-search",14),v.qZA(),v.YNc(20,Y,2,3,"mat-option",15),v.ALo(21,"async"),v.qZA(),v.YNc(22,B,2,1,"mat-error",16),v.qZA(),v.qZA(),v.TgZ(23,"div",10),v.TgZ(24,"mat-form-field",17),v.TgZ(25,"mat-label"),v._uU(26,"Utility *"),v.qZA(),v.TgZ(27,"mat-select",18,19),v.NdJ("selectionChange",function(){v.CHM(t);const e=v.MAs(28);return n.onUtilityItemChange(e.value)}),v.YNc(29,L,2,2,"mat-option",15),v.ALo(30,"async"),v.qZA(),v.YNc(31,$,2,1,"mat-error",16),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.YNc(32,ot,7,4,"ng-container",20),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}2&t&&(v.xp6(10),v.Q6J("formGroup",n.utilitySummaryFormGroup),v.xp6(9),v.Q6J("formControl",n.propertyServerSideFilteringCtrl)("searching",n.searching),v.xp6(1),v.Q6J("ngForOf",v.lcZ(21,8,n.filteredServerSideProperties)),v.xp6(2),v.Q6J("ngIf",null==n.formErrors?null:n.formErrors.property_id),v.xp6(7),v.Q6J("ngForOf",v.lcZ(30,10,n.utilities$)),v.xp6(2),v.Q6J("ngIf",null==n.formErrors?null:n.formErrors.utility_id),v.xp6(1),v.Q6J("ngIf",n.utilitySummaryFormGroup.valid))},directives:[p._Y,p.JL,p.sg,q.KE,q.hX,w.gD,p.JJ,p.u,U.ey,k.nu,p.oH,F.sg,F.O5,q.TO,E.VQ,p.On,E.U0,S.lW,N.gM,I.Hw,p.CE,p.x0,R.Nt,p.Fj,J.hl,J.nW,q.R9,J.Mq,q.bx,p.qQ,p.wV,Q.pW],pipes:[F.Ov],encapsulation:2}),t})();var at=e(1581);class lt extends at.y{constructor(t){super(t)}}function ct(t,n){1&t&&(v.ynx(0),v.TgZ(1,"mat-icon",22),v._uU(2,"error_outline"),v.qZA(),v.BQk())}function st(t,n){if(1&t&&(v.TgZ(0,"h5",20),v._uU(1,"Edit Utility Reading "),v.YNc(2,ct,3,0,"ng-container",21),v.ALo(3,"async"),v.qZA()),2&t){const t=v.oxw();v.xp6(2),v.Q6J("ngIf",v.lcZ(3,1,t.formError$))}}function dt(t,n){if(1&t&&(v.TgZ(0,"mat-error",23),v._uU(1),v.qZA()),2&t){const t=v.oxw();v.xp6(1),v.Oqu(t.formErrors.current_reading)}}function gt(t,n){if(1&t&&(v.TgZ(0,"mat-error",23),v._uU(1),v.qZA()),2&t){const t=v.oxw();v.xp6(1),v.Oqu(t.formErrors.reading_date)}}function ut(t,n){1&t&&(v.TgZ(0,"div",24),v._UZ(1,"mat-progress-bar",25),v.qZA())}let pt=(()=>{class t{constructor(t,n,e,i,o){this.fb=n,this.readingService=e,this.notification=i,this.dialogRef=o,this.errorInForm=new m.X(!1),this.formError$=this.errorInForm.asObservable(),this.loader=!1,this.isAdd=null==t?void 0:t.isAdd,this.reading=null==t?void 0:t.reading}ngOnInit(){var t,n,e,i,o,r,a,l,c,s,d,g;if(this.isAdd&&(this.form=this.fb.group({current_reading:["",[p.kI.required,p.kI.minLength(1)]],reading_date:[""]})),!this.isAdd){const u=(null===(n=null===(t=this.reading)||void 0===t?void 0:t.property)||void 0===n?void 0:n.property_name)+" ("+(null===(i=null===(e=this.reading)||void 0===e?void 0:e.property)||void 0===i?void 0:i.property_code)+") - "+(null===(r=null===(o=this.reading)||void 0===o?void 0:o.property)||void 0===r?void 0:r.location);this.form=this.fb.group({current_reading:[null===(a=this.reading)||void 0===a?void 0:a.current_reading,[p.kI.required,p.kI.minLength(1)]],reading_date:[null===(l=this.reading)||void 0===l?void 0:l.reading_date],property:[{value:u,disabled:!0}],utility:[{value:null===(s=null===(c=this.reading)||void 0===c?void 0:c.utility)||void 0===s?void 0:s.utility_display_name,disabled:!0}],unit:[{value:null===(g=null===(d=this.reading)||void 0===d?void 0:d.unit)||void 0===g?void 0:g.unit_name,disabled:!0}]})}}update(){const t=Object.assign({},this.reading,this.form.value);this.loader=!0,this.errorInForm.next(!1),this.readingService.update(t).subscribe(t=>{this.loader=!1,this.dialogRef.close(this.form.value),this.notification.showNotification("success","Success !! reading has been updated.")},t=>{var n;if(this.loader=!1,this.formErrors=t,this.formErrors)for(const e in this.formErrors)this.form&&(null===(n=this.form.controls[e])||void 0===n||n.markAsTouched(),this.form.controls[e].setErrors({incorrect:!0}))})}close(){this.dialogRef.close()}onSaveComplete(){this.loader=!1,this.form.reset(),this.dialogRef.close(this.form.value)}}return t.\u0275fac=function(n){return new(n||t)(v.Y36(o.WI),v.Y36(p.qu),v.Y36(T),v.Y36(P.g),v.Y36(o.so))},t.\u0275cmp=v.Xpm({type:t,selectors:[["robi-edit-reading"]],decls:41,vars:10,consts:[["mat-dialog-title","",4,"ngIf"],[1,"mat-dialog-data",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],["color","primary","appearance","legacy",1,"full-width"],["matInput","","formControlName","property"],[1,"col-6"],["matInput","","formControlName","utility"],["matInput","","formControlName","unit"],["color","primary","appearance","outline",1,"full-width"],["matInput","","type","number","formControlName","current_reading","placeholder","Current Reading"],["align","start","class","form__error",4,"ngIf"],["matInput","","formControlName","reading_date","placeholder","Reading Date",3,"matDatepicker","click"],["matSuffix","",3,"for"],["touchUi",""],["reading_date",""],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["align","center"],["mat-button","","color","primary",1,"mr-2",3,"disabled","mat-dialog-close","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-dialog-title",""],[4,"ngIf"],["color","warn"],["align","start",1,"form__error"],[1,"d-flex","justify-content-center","spinner-container"],["color","primary","mode","query","value","50","bufferValue","75"]],template:function(t,n){if(1&t){const t=v.EpF();v.YNc(0,st,4,3,"h5",0),v.TgZ(1,"mat-dialog-content",1),v.NdJ("ngSubmit",function(){return n.update()}),v.TgZ(2,"div",2),v.TgZ(3,"div",3),v.TgZ(4,"mat-form-field",4),v.TgZ(5,"mat-label"),v._uU(6," Property "),v.qZA(),v._UZ(7,"input",5),v.qZA(),v.qZA(),v.qZA(),v.TgZ(8,"div",2),v.TgZ(9,"div",6),v.TgZ(10,"mat-form-field",4),v.TgZ(11,"mat-label"),v._uU(12," Utility"),v.qZA(),v._UZ(13,"input",7),v.qZA(),v.qZA(),v.TgZ(14,"div",6),v.TgZ(15,"mat-form-field",4),v.TgZ(16,"mat-label"),v._uU(17," Unit"),v.qZA(),v._UZ(18,"input",8),v.qZA(),v.qZA(),v.qZA(),v.TgZ(19,"div",2),v.TgZ(20,"div",6),v.TgZ(21,"mat-form-field",9),v.TgZ(22,"mat-label"),v._uU(23," Current Reading"),v.qZA(),v._UZ(24,"input",10),v.YNc(25,dt,2,1,"mat-error",11),v.qZA(),v.qZA(),v.TgZ(26,"div",6),v.TgZ(27,"mat-form-field",9),v.TgZ(28,"mat-label"),v._uU(29,"Reading Date"),v.qZA(),v.TgZ(30,"input",12),v.NdJ("click",function(){return v.CHM(t),v.MAs(33).open()}),v.qZA(),v._UZ(31,"mat-datepicker-toggle",13),v._UZ(32,"mat-datepicker",14,15),v.YNc(34,gt,2,1,"mat-error",11),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.YNc(35,ut,2,0,"div",16),v.TgZ(36,"mat-dialog-actions",17),v.TgZ(37,"button",18),v.NdJ("click",function(){return n.close()}),v._uU(38,"Close"),v.qZA(),v.TgZ(39,"button",19),v.NdJ("click",function(){return n.update()}),v._uU(40,"Save"),v.qZA(),v.qZA()}if(2&t){const t=v.MAs(33);v.Q6J("ngIf",!n.isAdd),v.xp6(1),v.Q6J("formGroup",n.form),v.xp6(24),v.Q6J("ngIf",null==n.formErrors?null:n.formErrors.current_reading),v.xp6(5),v.Q6J("matDatepicker",t),v.xp6(1),v.Q6J("for",t),v.xp6(3),v.Q6J("ngIf",null==n.formErrors?null:n.formErrors.reading_date),v.xp6(1),v.Q6J("ngIf",n.loader),v.xp6(2),v.Q6J("disabled",n.loader)("mat-dialog-close",!0),v.xp6(2),v.Q6J("disabled",!n.form.valid||n.loader)}},directives:[F.O5,o.xY,p.JL,p.sg,q.KE,q.hX,R.Nt,p.Fj,p.JJ,p.u,p.wV,J.hl,J.nW,q.R9,J.Mq,o.H8,S.lW,o.ZT,o.uh,I.Hw,q.TO,Q.pW],pipes:[F.Ov],encapsulation:2}),t})();var mt=e(32802),ft=e(32789),ht=e(29790);const Zt=["search"],_t=function(){return["create"]};function bt(t,n){1&t&&(v.TgZ(0,"div",36),v.TgZ(1,"button",37),v.TgZ(2,"mat-icon"),v._uU(3,"add"),v.qZA(),v.qZA(),v.qZA()),2&t&&(v.xp6(1),v.Q6J("routerLink",v.DdM(1,_t)))}function xt(t,n){if(1&t&&(v.ynx(0),v.TgZ(1,"button",38),v.ALo(2,"async"),v.TgZ(3,"mat-icon"),v._uU(4,"add"),v.qZA(),v._uU(5,"Add Utility Bill "),v.qZA(),v.BQk()),2&t){const t=v.oxw();v.xp6(1),v.Q6J("disabled",v.lcZ(2,2,null==t.dataSource?null:t.dataSource.loading$))("routerLink",v.DdM(4,_t))}}function Ct(t,n){if(1&t){const t=v.EpF();v.TgZ(0,"button",39),v.NdJ("click",function(){return v.CHM(t),v.oxw().clearSearch()}),v.TgZ(1,"mat-icon"),v._uU(2,"close"),v.qZA(),v.qZA()}}function vt(t,n){1&t&&(v.TgZ(0,"mat-header-cell",40),v._uU(1," Reading "),v.qZA())}function yt(t,n){if(1&t){const t=v.EpF();v.TgZ(0,"mat-cell"),v.TgZ(1,"button",41),v.NdJ("click",function(){const n=v.CHM(t).$implicit;return v.oxw().onSelected(n)}),v.TgZ(2,"span",42),v._uU(3),v.qZA(),v.qZA(),v.qZA()}if(2&t){const t=n.$implicit;v.xp6(1),v.s9C("routerLink",t.id),v.xp6(2),v.Oqu(t.current_reading)}}function Ot(t,n){1&t&&(v.TgZ(0,"mat-header-cell",40),v._uU(1," Utility "),v.qZA())}function Mt(t,n){if(1&t&&(v.TgZ(0,"mat-cell"),v._uU(1),v.qZA()),2&t){const t=n.$implicit;v.xp6(1),v.hij(" ",null==t.utility?null:t.utility.utility_display_name," ")}}function At(t,n){1&t&&(v.TgZ(0,"mat-header-cell",40),v._uU(1," Reading Date "),v.qZA())}function Tt(t,n){if(1&t&&(v.TgZ(0,"mat-cell"),v._uU(1),v.qZA()),2&t){const t=n.$implicit;v.xp6(1),v.hij(" ",t.reading_date," ")}}function Pt(t,n){1&t&&(v.TgZ(0,"mat-header-cell",40),v._uU(1," Property Name "),v.qZA())}function qt(t,n){if(1&t&&(v.TgZ(0,"mat-cell"),v._uU(1),v.qZA()),2&t){const t=n.$implicit;v.xp6(1),v.hij(" ",null==t.property?null:t.property.property_name," ")}}function wt(t,n){1&t&&(v.TgZ(0,"mat-header-cell",40),v._uU(1," Unit "),v.qZA())}function Ut(t,n){if(1&t&&(v.TgZ(0,"mat-cell"),v._uU(1),v.qZA()),2&t){const t=n.$implicit;v.xp6(1),v.hij(" ",null==t.unit?null:t.unit.unit_name," ")}}function kt(t,n){1&t&&(v.TgZ(0,"mat-header-cell"),v._uU(1,"Actions"),v.qZA())}function Ft(t,n){if(1&t){const t=v.EpF();v.ynx(0),v.TgZ(1,"button",47),v.NdJ("click",function(){v.CHM(t);const n=v.oxw().$implicit;return v.oxw().editDialog(!1,n)}),v.TgZ(2,"i",45),v._uU(3,"edit"),v.qZA(),v.qZA(),v.BQk()}2&t&&(v.xp6(1),v.Q6J("matTooltipPosition","above"))}const Et=function(){return["edit-reading","delete-reading"]};function St(t,n){if(1&t){const t=v.EpF();v.TgZ(0,"mat-cell",43),v.TgZ(1,"button",44),v.NdJ("click",function(){const n=v.CHM(t).$implicit;return v.oxw().onSelected(n)}),v.TgZ(2,"i",45),v._uU(3,"expand_more"),v.qZA(),v.qZA(),v.YNc(4,Ft,4,1,"ng-container",11),v.TgZ(5,"button",46),v.NdJ("click",function(){const n=v.CHM(t).$implicit;return v.oxw().openConfirmationDialog(n)}),v.TgZ(6,"i",45),v._uU(7,"delete"),v.qZA(),v.qZA(),v.qZA()}if(2&t){const t=n.$implicit;v.xp6(1),v.s9C("routerLink",t.id),v.Q6J("matTooltipPosition","above"),v.xp6(3),v.Q6J("robiPermission",v.DdM(4,Et)),v.xp6(1),v.Q6J("matTooltipPosition","above")}}function Nt(t,n){1&t&&v._UZ(0,"mat-header-row")}function It(t,n){1&t&&v._UZ(0,"mat-row")}function Rt(t,n){1&t&&(v.TgZ(0,"span"),v._uU(1,"No Data"),v.qZA())}function Jt(t,n){1&t&&(v.TgZ(0,"div",48),v._UZ(1,"mat-progress-bar",49),v.qZA())}const Qt=function(){return["create-reading"]};let Dt=(()=>{class t{constructor(t,n,e){this.readingService=t,this.notification=n,this.dialog=e,this.displayedColumns=["current_reading","utility_id","reading_date","property_id","unit_id","actions"],this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100]}ngOnInit(){this.dataSource=new lt(this.readingService),this.dataSource.meta$.subscribe(t=>this.meta=t),this.dataSource.load("",0,0,"property_id","desc")}ngAfterViewInit(){(0,l.R)(this.search.nativeElement,"keyup").pipe((0,s.b)(1e3),(0,d.x)(),(0,g.b)(()=>{this.paginator.pageIndex=0,this.loadData()})).subscribe(),this.paginator.page.pipe((0,g.b)(()=>this.loadData())).subscribe(),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,c.T)(this.sort.sortChange,this.paginator.page).pipe((0,g.b)(()=>this.loadData())).subscribe()}clearSearch(){this.search.nativeElement.value="",this.loadData()}loadData(){this.dataSource.load(this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction)}addDialog(t,n){const e=new o.vA;e.disableClose=!0,e.autoFocus=!0,e.data={reading:n,mode:t},this.dialog.open(rt,e).afterClosed().subscribe(t=>{})}openConfirmationDialog(t){this.dialogRef=this.dialog.open(u.z,{disableClose:!0}),this.dialogRef.afterClosed().subscribe(n=>{n&&this.delete(t),this.dialogRef=null})}delete(t){this.readingService.delete(t).subscribe(t=>{this.loader=!1,this.loadData(),this.notification.showNotification("success","Success !! Reading has been deleted.")},t=>{this.loader=!1,this.notification.showNotification("danger",t.error.error?"Delete Error !! ":"Connection Error !! Nothing deleted. Check Connection and retry. ")})}editDialog(t=!0,n){const e=new o.vA;e.disableClose=!0,e.autoFocus=!0,e.data={reading:n,isAdd:t},this.dialog.open(pt,e).afterClosed().subscribe(t=>{t&&this.loadData()})}onSelected(t){this.readingService.changeSelectedReading(t)}}return t.\u0275fac=function(n){return new(n||t)(v.Y36(T),v.Y36(P.g),v.Y36(o.uw))},t.\u0275cmp=v.Xpm({type:t,selectors:[["robi-utility-bills"]],viewQuery:function(t,n){if(1&t&&(v.Gf(Zt,5),v.Gf(r.NW,7),v.Gf(a.YE,7)),2&t){let t;v.iGM(t=v.CRH())&&(n.search=t.first),v.iGM(t=v.CRH())&&(n.paginator=t.first),v.iGM(t=v.CRH())&&(n.sort=t.first)}},decls:48,vars:22,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],["class","fab-container",4,"robiPermission"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-body"],[1,"row","search-form-section"],[1,"col-5"],[4,"robiPermission"],[1,"col-7"],[1,"search-form-field"],["matInput","","autocomplete","off",3,"placeholder","disabled"],["search",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-responsive"],["matSort","","matSortActive","property_id","matSortDirection","desc","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","current_reading"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","utility_id"],["matColumnDef","reading_date"],["matColumnDef","property_id"],["matColumnDef","unit_id"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["class","button-row",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSizeOptions"],["pagination",""],[1,"fab-container"],["mat-fab","",1,"fab-toggler",3,"routerLink"],["mat-button","","matPrefix","","mat-stroked-button","","aria-label","add new",3,"disabled","routerLink"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-sort-header",""],["mat-flat-button","",3,"routerLink","click"],[1,"link"],[1,"button-row"],["mat-raised-button","","type","button","matTooltip","View Readings",1,"btn","btn-link","btn-sm","btn-just-icon",3,"matTooltipPosition","routerLink","click"],[1,"material-icons"],["mat-raised-button","","type","button","matTooltip","Delete Readings","color","warn",1,"btn","btn-link","btn-sm","btn-just-icon",3,"matTooltipPosition","click"],["mat-raised-button","","type","button","matTooltip","Edit Readings",1,"btn","btn-link","btn-sm","btn-just-icon",3,"matTooltipPosition","click"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,n){if(1&t&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.YNc(3,bt,4,2,"div",3),v.TgZ(4,"div",4),v.TgZ(5,"div",5),v.TgZ(6,"div",6),v.TgZ(7,"h4",7),v._uU(8),v.ALo(9,"translate"),v.qZA(),v.qZA(),v.TgZ(10,"div",8),v.TgZ(11,"div",9),v.TgZ(12,"div",10),v.YNc(13,xt,6,5,"ng-container",11),v.qZA(),v.TgZ(14,"div",12),v.TgZ(15,"mat-form-field",13),v._UZ(16,"input",14,15),v.ALo(18,"translate"),v.YNc(19,Ct,3,0,"button",16),v.qZA(),v.qZA(),v.qZA(),v.TgZ(20,"div",17),v.TgZ(21,"mat-table",18,19),v.ynx(23,20),v.YNc(24,vt,2,0,"mat-header-cell",21),v.YNc(25,yt,4,2,"mat-cell",22),v.BQk(),v.ynx(26,23),v.YNc(27,Ot,2,0,"mat-header-cell",21),v.YNc(28,Mt,2,1,"mat-cell",22),v.BQk(),v.ynx(29,24),v.YNc(30,At,2,0,"mat-header-cell",21),v.YNc(31,Tt,2,1,"mat-cell",22),v.BQk(),v.ynx(32,25),v.YNc(33,Pt,2,0,"mat-header-cell",21),v.YNc(34,qt,2,1,"mat-cell",22),v.BQk(),v.ynx(35,26),v.YNc(36,wt,2,0,"mat-header-cell",21),v.YNc(37,Ut,2,1,"mat-cell",22),v.BQk(),v.ynx(38,27),v.YNc(39,kt,2,0,"mat-header-cell",28),v.YNc(40,St,8,5,"mat-cell",29),v.BQk(),v.YNc(41,Nt,1,0,"mat-header-row",30),v.YNc(42,It,1,0,"mat-row",31),v.qZA(),v.YNc(43,Rt,2,0,"span",32),v.YNc(44,Jt,2,0,"div",33),v.ALo(45,"async"),v._UZ(46,"mat-paginator",34,35),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&t){const t=v.MAs(17);v.xp6(3),v.Q6J("robiPermission",v.DdM(20,Qt)),v.xp6(5),v.Oqu(v.lcZ(9,14,"robi.utilities.title")),v.xp6(5),v.Q6J("robiPermission",v.DdM(21,Qt)),v.xp6(3),v.s9C("placeholder",v.lcZ(18,16,"robi.filter")),v.Q6J("disabled",0===(null==n.meta?null:n.meta.total)),v.xp6(3),v.Q6J("ngIf",t.value),v.xp6(2),v.Q6J("dataSource",n.dataSource),v.xp6(20),v.Q6J("matHeaderRowDef",n.displayedColumns),v.xp6(1),v.Q6J("matRowDefColumns",n.displayedColumns),v.xp6(1),v.Q6J("ngIf",0===(null==n.meta?null:n.meta.total)),v.xp6(1),v.Q6J("ngIf",v.lcZ(45,18,null==n.dataSource?null:n.dataSource.loading$)||n.loader),v.xp6(2),v.Q6J("length",null==n.meta?null:n.meta.total)("pageIndex",n.pageIndex)("pageSizeOptions",n.pageSizeOptions)}},directives:[mt.A,q.KE,R.Nt,F.O5,ft.BZ,a.YE,ft.w1,ft.fO,ft.Dz,ft.as,ft.nj,r.NW,S.lW,i.rH,I.Hw,q.qo,q.R9,ft.ge,a.nU,ft.ev,N.gM,ft.XQ,ft.Gk,Q.pW],pipes:[ht.X$,F.Ov],styles:[".fab-container[_ngcontent-%COMP%]{position:fixed;bottom:35px;right:35px;z-index:100;display:flex;flex-direction:column-reverse;align-items:center}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;margin-bottom:5px}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:17px}.fab-toggler[_ngcontent-%COMP%]{float:right;z-index:100}.card[_ngcontent-%COMP%]{background:none repeat scroll 0 0 #FFFFFF;border-radius:4px;color:#444}.card-container[_ngcontent-%COMP%], .front[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%;height:390px;border-radius:4px}.card[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{height:105px;overflow:hidden;border-radius:4px 4px 0 0}.card[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.user[_ngcontent-%COMP%]{border-radius:50%;display:block;height:120px;margin:-55px auto 0;overflow:hidden;width:120px;box-shadow:0 16px 38px -12px rgba(0,0,0,.561),0 4px 25px rgba(0,0,0,.122),0 8px 10px -5px rgba(0,0,0,.2)}.card[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background:none repeat scroll 0 0 #FFFFFF;border:4px solid #FFFFFF;width:100%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:rgba(0,0,0,0);box-shadow:none;padding:10px 20px 20px}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{min-height:160px}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{height:215px}.card[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:22px;line-height:28px;margin:10px 0 0;text-align:center;text-transform:capitalize}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:5px 0;font-weight:400;line-height:20px}.card[_ngcontent-%COMP%]   .profession[_ngcontent-%COMP%]{color:#999;text-align:center;margin-bottom:20px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{border-top:1px solid #EEEEEE;color:#999;margin:0;padding:10px 0 0;text-align:center}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{font-size:18px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 7px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .btn-simple[_ngcontent-%COMP%]{margin-top:-6px}.card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:15px 20px;height:90px}.card[_ngcontent-%COMP%]   .motto[_ngcontent-%COMP%]{border-bottom:1px solid #EEEEEE;color:#999;font-size:14px;font-weight:400;padding-bottom:10px;text-align:center}.card[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{width:100%;margin-top:20px;display:flex;justify-content:center}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]{display:block;float:left;width:33.333333%;text-align:center}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]:first-child{border-right:1px solid #EEEEEE}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]:last-child{border-left:1px solid #EEEEEE}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:300;margin-bottom:5px}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777}.title[_ngcontent-%COMP%]{color:#506a85;text-align:center;font-weight:300;font-size:44px;margin-bottom:90px;line-height:90%}.title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:17px;color:#999;text-transform:uppercase;margin:0}.space-30[_ngcontent-%COMP%]{height:30px;display:block}.space-50[_ngcontent-%COMP%]{height:50px;display:block}.space-200[_ngcontent-%COMP%]{height:200px;display:block}.white-board[_ngcontent-%COMP%]{background-color:#fff;min-height:200px;padding:60px 60px 20px}.ct-heart[_ngcontent-%COMP%]{color:#f74933}pre.prettyprint[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #999;margin-top:20px;padding:20px;text-align:left}.atv[_ngcontent-%COMP%], .str[_ngcontent-%COMP%]{color:#05ae0e}.tag[_ngcontent-%COMP%], .pln[_ngcontent-%COMP%], .kwd[_ngcontent-%COMP%]{color:#3472f7}.atn[_ngcontent-%COMP%]{color:#2c93ff}.pln[_ngcontent-%COMP%]{color:#333}.com[_ngcontent-%COMP%]{color:#999}.btn-simple[_ngcontent-%COMP%]{opacity:.8;color:#666;background-color:transparent}.btn-simple[_ngcontent-%COMP%]:hover, .btn-simple[_ngcontent-%COMP%]:focus{background-color:transparent;box-shadow:none;opacity:1}.btn-simple[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.navbar-brand-logo[_ngcontent-%COMP%]{padding:0}.navbar-brand-logo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{border:1px solid #333333;border-radius:50%;float:left;overflow:hidden;width:60px}.navbar[_ngcontent-%COMP%]   .navbar-brand-logo[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#fff;float:left;font-size:18px;font-weight:400;line-height:20px;margin-left:10px;margin-top:10px;width:60px}.navbar-default[_ngcontent-%COMP%]   .navbar-brand-logo[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#555}.clickable[_ngcontent-%COMP%]{cursor:pointer}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none){.front[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{-webkit-backface-visibility:visible;backface-visibility:visible}.back[_ngcontent-%COMP%]{visibility:hidden;-ms-transition:all .2s cubic-bezier(.92,.01,.83,.67)}.front[_ngcontent-%COMP%]{z-index:4}.card-container[_ngcontent-%COMP%]:not(.manual-flip):hover   .back[_ngcontent-%COMP%], .card-container.manual-flip.hover[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{z-index:5;visibility:visible}}"]}),t})();var Yt=e(65939);function Bt(t,n){1&t&&(v.TgZ(0,"div",3),v.TgZ(1,"mat-icon"),v._uU(2,"error"),v.qZA(),v._uU(3," Not Found "),v.qZA())}const Lt=function(){return{exact:!0}};function $t(t,n){if(1&t&&(v.TgZ(0,"div",4),v.TgZ(1,"div",5),v.TgZ(2,"div",6),v.TgZ(3,"div",7),v.TgZ(4,"div",8),v.TgZ(5,"h4",9),v._uU(6,"Utility Reading Details"),v.qZA(),v.TgZ(7,"p",9),v._uU(8),v.qZA(),v.TgZ(9,"p",10),v._uU(10),v.qZA(),v.qZA(),v.TgZ(11,"div",11),v.TgZ(12,"nav",12),v.TgZ(13,"a",13,14),v.TgZ(15,"span",15),v._uU(16," Info "),v.qZA(),v.qZA(),v.qZA(),v._UZ(17,"router-outlet"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&t){const t=n.ngIf,e=v.MAs(14),i=v.oxw();v.xp6(8),v.lnq("",null==t||null==t.property?null:t.property.property_name," - ",null==t||null==t.property?null:t.property.location,", ",null==t||null==t.unit?null:t.unit.unit_name," "),v.xp6(2),v.AsE(" ",null==t||null==t.utility?null:t.utility.utility_display_name," on ",null==t?null:t.reading_date," "),v.xp6(3),v.MGl("routerLink","/readings/",i.readingID,""),v.Q6J("active",e.isActive)("routerLinkActiveOptions",v.DdM(8,Lt))}}const Gt=i.Bz.forChild([{path:"",component:Dt},{path:"create",component:rt},{path:":id",component:(()=>{class t{constructor(t,n,e,i,o,r){this.fb=t,this.dialog=n,this.notification=e,this.readingService=i,this.router=o,this.route=r,this.loader=!1}ngOnInit(){this.readingID=this.route.snapshot.paramMap.get("id"),this.readingService.selectedReadingChanges$.subscribe(t=>{t&&(this.readingData$=(0,f.of)(t)),t||this.readingService.getById(this.readingID).subscribe(t=>{this.readingData$=(0,f.of)(t),this.readingService.changeSelectedReading(t)})})}addDialog(t,n){const e=new o.vA;e.disableClose=!0,e.autoFocus=!0,e.data={reading:n,mode:t},this.dialog.open(rt,e).afterClosed().subscribe(t=>{})}onOutletActivated(t){}ngAfterViewInit(){}}return t.\u0275fac=function(n){return new(n||t)(v.Y36(p.qu),v.Y36(o.uw),v.Y36(P.g),v.Y36(T),v.Y36(i.F0),v.Y36(i.gz))},t.\u0275cmp=v.Xpm({type:t,selectors:[["robi-view-reading"]],decls:5,vars:4,consts:[[1,"main-content"],["no_data",""],["class","container-fluid",4,"ngIf","ngIfElse"],[1,"not-found"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-category"],[1,"card-body"],["mat-tab-nav-bar",""],["mat-tab-link","","routerLinkActive","",3,"active","routerLinkActiveOptions","routerLink"],["general","routerLinkActive"],[1,"nav-text"]],template:function(t,n){if(1&t&&(v.TgZ(0,"div",0),v.YNc(1,Bt,4,0,"ng-template",null,1,v.W1O),v.YNc(3,$t,18,9,"div",2),v.ALo(4,"async"),v.qZA()),2&t){const t=v.MAs(2);v.xp6(3),v.Q6J("ngIf",v.lcZ(4,2,n.readingData$))("ngIfElse",t)}},directives:[F.O5,I.Hw,Yt.BU,i.yS,Yt.Nj,i.Od,i.lC],pipes:[F.Ov],styles:[".fab-container[_ngcontent-%COMP%]{position:fixed;bottom:35px;right:35px;z-index:100;display:flex;flex-direction:column-reverse;align-items:center}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;margin-bottom:5px}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:17px}.fab-toggler[_ngcontent-%COMP%]{float:right;z-index:100}.card[_ngcontent-%COMP%]{background:none repeat scroll 0 0 #FFFFFF;border-radius:4px;color:#444}.card-container[_ngcontent-%COMP%], .front[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%;height:390px;border-radius:4px}.card[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{height:105px;overflow:hidden;border-radius:4px 4px 0 0}.card[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.user[_ngcontent-%COMP%]{border-radius:50%;display:block;height:120px;margin:-55px auto 0;overflow:hidden;width:120px;box-shadow:0 16px 38px -12px rgba(0,0,0,.561),0 4px 25px rgba(0,0,0,.122),0 8px 10px -5px rgba(0,0,0,.2)}.card[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background:none repeat scroll 0 0 #FFFFFF;border:4px solid #FFFFFF;width:100%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:rgba(0,0,0,0);box-shadow:none;padding:10px 20px 20px}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{min-height:160px}.card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{height:215px}.card[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:22px;line-height:28px;margin:10px 0 0;text-align:center;text-transform:capitalize}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:5px 0;font-weight:400;line-height:20px}.card[_ngcontent-%COMP%]   .profession[_ngcontent-%COMP%]{color:#999;text-align:center;margin-bottom:20px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{border-top:1px solid #EEEEEE;color:#999;margin:0;padding:10px 0 0;text-align:center}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{font-size:18px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 7px}.card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .btn-simple[_ngcontent-%COMP%]{margin-top:-6px}.card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:15px 20px;height:90px}.card[_ngcontent-%COMP%]   .motto[_ngcontent-%COMP%]{border-bottom:1px solid #EEEEEE;color:#999;font-size:14px;font-weight:400;padding-bottom:10px;text-align:center}.card[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{width:100%;margin-top:20px;display:flex;justify-content:center}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]{display:block;float:left;width:33.333333%;text-align:center}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]:first-child{border-right:1px solid #EEEEEE}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]:last-child{border-left:1px solid #EEEEEE}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:300;margin-bottom:5px}.card[_ngcontent-%COMP%]   .property-stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777}.title[_ngcontent-%COMP%]{color:#506a85;text-align:center;font-weight:300;font-size:44px;margin-bottom:90px;line-height:90%}.title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:17px;color:#999;text-transform:uppercase;margin:0}.space-30[_ngcontent-%COMP%]{height:30px;display:block}.space-50[_ngcontent-%COMP%]{height:50px;display:block}.space-200[_ngcontent-%COMP%]{height:200px;display:block}.white-board[_ngcontent-%COMP%]{background-color:#fff;min-height:200px;padding:60px 60px 20px}.ct-heart[_ngcontent-%COMP%]{color:#f74933}pre.prettyprint[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #999;margin-top:20px;padding:20px;text-align:left}.atv[_ngcontent-%COMP%], .str[_ngcontent-%COMP%]{color:#05ae0e}.tag[_ngcontent-%COMP%], .pln[_ngcontent-%COMP%], .kwd[_ngcontent-%COMP%]{color:#3472f7}.atn[_ngcontent-%COMP%]{color:#2c93ff}.pln[_ngcontent-%COMP%]{color:#333}.com[_ngcontent-%COMP%]{color:#999}.btn-simple[_ngcontent-%COMP%]{opacity:.8;color:#666;background-color:transparent}.btn-simple[_ngcontent-%COMP%]:hover, .btn-simple[_ngcontent-%COMP%]:focus{background-color:transparent;box-shadow:none;opacity:1}.btn-simple[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.navbar-brand-logo[_ngcontent-%COMP%]{padding:0}.navbar-brand-logo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{border:1px solid #333333;border-radius:50%;float:left;overflow:hidden;width:60px}.navbar[_ngcontent-%COMP%]   .navbar-brand-logo[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#fff;float:left;font-size:18px;font-weight:400;line-height:20px;margin-left:10px;margin-top:10px;width:60px}.navbar-default[_ngcontent-%COMP%]   .navbar-brand-logo[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#555}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none){.front[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{-webkit-backface-visibility:visible;backface-visibility:visible}.back[_ngcontent-%COMP%]{visibility:hidden;-ms-transition:all .2s cubic-bezier(.92,.01,.83,.67)}.front[_ngcontent-%COMP%]{z-index:4}.card-container[_ngcontent-%COMP%]:not(.manual-flip):hover   .back[_ngcontent-%COMP%], .card-container.manual-flip.hover[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{z-index:5;visibility:visible}}"]}),t})(),children:[{path:"",component:(()=>{class t{constructor(t,n,e,i,o,r){this.fb=t,this.dialog=n,this.notification=e,this.readingService=i,this.router=o,this.route=r,this.memberId="",this.profilePicFileToUpload=null,this.loader=!1,this.memberShipForm=!1}ngOnInit(){this.readingID=this.route.snapshot.paramMap.get("id"),this.readingService.selectedReadingChanges$.subscribe(t=>{t&&(this.readingData$=(0,f.of)(t)),t||this.readingService.getById(this.readingID).subscribe(t=>{this.readingData$=(0,f.of)(t),this.readingService.changeSelectedReading(t)})})}}return t.\u0275fac=function(n){return new(n||t)(v.Y36(p.qu),v.Y36(o.uw),v.Y36(P.g),v.Y36(T),v.Y36(i.F0),v.Y36(i.gz))},t.\u0275cmp=v.Xpm({type:t,selectors:[["robi-view-reading-general"]],decls:43,vars:21,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"col-sm-4"],["color","primary","appearance","legacy",1,"full-width"],["matInput","","disabled","",3,"value"],["matInput","","placeholder","First Name","disabled","",3,"value"],["matInput","","placeholder","Middle Name","disabled","",3,"value"],["matInput","","placeholder","Last Name","disabled","",3,"value"]],template:function(t,n){if(1&t&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.TgZ(3,"div",3),v.TgZ(4,"div",0),v.TgZ(5,"div",4),v.TgZ(6,"mat-form-field",5),v.TgZ(7,"mat-label"),v._uU(8,"Property Name / Unit"),v.qZA(),v._UZ(9,"input",6),v.ALo(10,"async"),v.ALo(11,"async"),v.qZA(),v.qZA(),v.TgZ(12,"div",4),v.TgZ(13,"mat-form-field",5),v.TgZ(14,"mat-label"),v._uU(15,"Property Code"),v.qZA(),v._UZ(16,"input",6),v.ALo(17,"async"),v.qZA(),v.qZA(),v.TgZ(18,"div",4),v.TgZ(19,"mat-form-field",5),v.TgZ(20,"mat-label"),v._uU(21,"Location"),v.qZA(),v._UZ(22,"input",6),v.ALo(23,"async"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(24,"div",0),v.TgZ(25,"div",4),v.TgZ(26,"mat-form-field",5),v.TgZ(27,"mat-label"),v._uU(28,"Utility"),v.qZA(),v._UZ(29,"input",7),v.ALo(30,"async"),v.qZA(),v.qZA(),v.TgZ(31,"div",4),v.TgZ(32,"mat-form-field",5),v.TgZ(33,"mat-label"),v._uU(34,"Reading Date"),v.qZA(),v._UZ(35,"input",8),v.ALo(36,"async"),v.qZA(),v.qZA(),v.TgZ(37,"div",4),v.TgZ(38,"mat-form-field",5),v.TgZ(39,"mat-label"),v._uU(40,"Current Reading"),v.qZA(),v._UZ(41,"input",9),v.ALo(42,"async"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&t){let t,e,i,o,r,a;v.xp6(9),v.hYB("value","",null==(t=v.lcZ(10,7,n.readingData$))||null==t.property?null:t.property.property_name,"\n                             (",null==(t=v.lcZ(11,9,n.readingData$))||null==t.unit?null:t.unit.unit_name,")"),v.xp6(7),v.s9C("value",null==(e=v.lcZ(17,11,n.readingData$))||null==e.property?null:e.property.property_code),v.xp6(6),v.s9C("value",null==(i=v.lcZ(23,13,n.readingData$))||null==i.property?null:i.property.location),v.xp6(7),v.s9C("value",null==(o=v.lcZ(30,15,n.readingData$))||null==o.utility?null:o.utility.utility_display_name),v.xp6(6),v.s9C("value",null==(r=v.lcZ(36,17,n.readingData$))?null:r.reading_date),v.xp6(6),v.s9C("value",null==(a=v.lcZ(42,19,n.readingData$))?null:a.current_reading)}},directives:[q.KE,q.hX,R.Nt],pipes:[F.Ov],styles:[".image[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}"]}),t})()}]}]);var Ht=e(83893);let zt=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=v.oAB({type:t}),t.\u0275inj=v.cJS({imports:[[Ht.m,Gt,k.Co]]}),t})()}}]);