"use strict";(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[954],{14954:function(e,i,t){t.r(i),t.d(i,{LeaseGeneralSettingModule:function(){return y}});var o=t(39895),n=t(99692),r=t(11494),s=t(3679),a=t(86710),l=t(8606),d=t(37716),m=t(85996),c=t(57404),u=t(98295),g=t(49983),f=t(67441),_=t(38583),h=t(7539),p=t(51095),v=t(72458),Z=t(12178);const b=["search"];function q(e,i){if(1&e&&(d.TgZ(0,"mat-option",23),d._uU(1),d.qZA()),2&e){const e=i.$implicit;d.Q6J("value",e),d.xp6(1),d.hij(" ",e," ")}}function T(e,i){if(1&e&&(d.TgZ(0,"mat-error",24),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Oqu(e.formErrors.generate_invoice_on)}}function A(e,i){1&e&&(d.TgZ(0,"div",25),d._UZ(1,"mat-progress-bar",26),d.qZA())}const x=o.Bz.forChild([{path:"",component:(()=>{class e{constructor(e,i,t,o,n){this.store=e,this.fb=i,this.route=t,this.leaseSettingService=o,this.notification=n,this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100],this.roles=[],this.employees=[],this.branches=[],this.dueON=Array.from({length:28},(e,i)=>i+1),this.color="accent",this.form=this.fb.group({lease_number_prefix:["",[s.kI.required]],next_lease_number:[""],invoice_number_prefix:[""],invoice_footer:[""],invoice_terms:[""],show_payment_method_on_invoice:[""],generate_invoice_on:[""],next_period_billing:[""],skip_starting_period:[""]})}ngOnInit(){this.settings$=this.store.pipe((0,a.Ys)(l.vi)),this.route.snapshot.data.leaseSetting&&(this.setting=this.route.snapshot.data.leaseSetting,this.prePopulateForm(this.setting),this.settingId=this.setting.id)}prePopulateForm(e){var i,t,o,n,r,s,a,l,d,m;this.setting=e,this.form.patchValue({lease_number_prefix:null===(i=this.setting)||void 0===i?void 0:i.lease_number_prefix,next_lease_number:null===(t=this.setting)||void 0===t?void 0:t.next_lease_number,invoice_number_prefix:null===(o=this.setting)||void 0===o?void 0:o.invoice_number_prefix,invoice_footer:null===(n=this.setting)||void 0===n?void 0:n.invoice_footer,invoice_terms:null===(r=this.setting)||void 0===r?void 0:r.invoice_terms,show_payment_method_on_invoice:null===(s=this.setting)||void 0===s?void 0:s.show_payment_method_on_invoice,generate_invoice_on:null===(a=this.setting)||void 0===a?void 0:a.generate_invoice_on,next_period_billing:null===(l=this.setting)||void 0===l?void 0:l.next_period_billing,skip_starting_period:null===(d=this.setting)||void 0===d?void 0:d.skip_starting_period}),this.nextPeriodBilling=null===(m=this.setting)||void 0===m?void 0:m.next_period_billing}onSubmit(){}update(){const e=Object.assign({},this.setting,this.form.value);(new FormData).append("id",e.id),this.loader=!0,this.leaseSettingService.update(e).subscribe(e=>{this.loader=!1,this.notification.showNotification("success","Success !! Lease Setting has been updated.")},e=>{var i;if(this.loader=!1,0!==e.payment&&(this.formErrors=e,this.formErrors))for(const t in this.formErrors)this.form&&(null===(i=this.form.controls[t])||void 0===i||i.markAsTouched(),this.form.controls[t].setErrors({incorrect:!0}))})}}return e.\u0275fac=function(i){return new(i||e)(d.Y36(a.yh),d.Y36(s.qu),d.Y36(o.gz),d.Y36(m.G),d.Y36(c.g))},e.\u0275cmp=d.Xpm({type:e,selectors:[["robi-lease-general-setting"]],viewQuery:function(e,i){if(1&e&&(d.Gf(b,7),d.Gf(n.NW,7),d.Gf(r.YE,7)),2&e){let e;d.iGM(e=d.CRH())&&(i.search=e.first),d.iGM(e=d.CRH())&&(i.paginator=e.first),d.iGM(e=d.CRH())&&(i.sort=e.first)}},decls:62,vars:5,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],["color","primary","appearance","outline",1,"full-width"],["matInput","","placeholder","Lease Number Prefix","formControlName","lease_number_prefix"],["matInput","","placeholder","Invoice Number Prefix","formControlName","invoice_number_prefix"],["matInput","","placeholder","Invoice Footer","formControlName","invoice_footer"],["matInput","","placeholder","Invoice Terms","formControlName","invoice_terms"],[1,"col-12"],["formControlName","generate_invoice_on"],[3,"value",4,"ngFor","ngForOf"],["align","start","class","form__error",4,"ngIf"],[1,"col-12","mat-form-field","mt-3","mb-3"],["formControlName","show_payment_method_on_invoice"],["formControlName","next_period_billing"],[1,"col-12","mat-form-field"],["formControlName","skip_starting_period"],[1,"divider","divider-md"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["mat-raised-button","","type","submit","color","accent",1,"btn","pull-right",3,"disabled","click"],[1,"clearfix"],[3,"value"],["align","start",1,"form__error"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(e,i){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"form",4),d.NdJ("ngSubmit",function(){return i.onSubmit()}),d.TgZ(5,"div",0),d.TgZ(6,"div",1),d.TgZ(7,"mat-form-field",5),d.TgZ(8,"mat-label"),d._uU(9,"Lease Number Prefix"),d.qZA(),d._UZ(10,"input",6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",0),d.TgZ(12,"div",1),d.TgZ(13,"mat-form-field",5),d.TgZ(14,"mat-label"),d._uU(15,"Invoice Number Prefix"),d.qZA(),d._UZ(16,"input",7),d.qZA(),d.qZA(),d.qZA(),d.TgZ(17,"div",0),d.TgZ(18,"div",1),d.TgZ(19,"mat-form-field",5),d.TgZ(20,"mat-label"),d._uU(21,"Invoice Footer"),d.qZA(),d._UZ(22,"input",8),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"div",0),d.TgZ(24,"div",1),d.TgZ(25,"mat-form-field",5),d.TgZ(26,"mat-label"),d._uU(27,"Invoice Terms"),d.qZA(),d._UZ(28,"input",9),d.qZA(),d.qZA(),d.qZA(),d.TgZ(29,"div",0),d.TgZ(30,"div",10),d.TgZ(31,"mat-form-field",5),d.TgZ(32,"mat-label"),d._uU(33,"Generate Invoice On (Day of Month)"),d.qZA(),d.TgZ(34,"mat-select",11),d.YNc(35,q,2,2,"mat-option",12),d.qZA(),d.TgZ(36,"mat-hint"),d._uU(37,"Day of each month when invoices are generated and sent to tenants."),d.qZA(),d.YNc(38,T,2,1,"mat-error",13),d.qZA(),d.qZA(),d.qZA(),d.TgZ(39,"div",14),d.TgZ(40,"mat-checkbox",15),d._uU(41," Show Payment Methods On Invoice "),d.qZA(),d.qZA(),d.TgZ(42,"div",14),d.TgZ(43,"mat-checkbox",16),d._uU(44," Next Period Billing "),d.qZA(),d.TgZ(45,"div"),d.TgZ(46,"mat-hint"),d.TgZ(47,"small"),d._uU(48,"When billing, invoice period is set as next month."),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(49,"div",17),d.TgZ(50,"mat-checkbox",18),d._uU(51," Skip Starting Period "),d.qZA(),d.TgZ(52,"div"),d.TgZ(53,"mat-hint"),d.TgZ(54,"small"),d._uU(55,"For new lease, do not bill the first period."),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(56,"div",19),d.YNc(57,A,2,0,"div",20),d.TgZ(58,"div"),d.TgZ(59,"button",21),d.NdJ("click",function(){return i.update()}),d._uU(60,"Update Settings"),d.qZA(),d.qZA(),d._UZ(61,"div",22),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.Q6J("formGroup",i.form),d.xp6(31),d.Q6J("ngForOf",i.dueON),d.xp6(3),d.Q6J("ngIf",null==i.formErrors?null:i.formErrors.generate_invoice_on),d.xp6(19),d.Q6J("ngIf",i.loader),d.xp6(2),d.Q6J("disabled",!i.form.valid||i.loader))},directives:[s._Y,s.JL,s.sg,u.KE,u.hX,g.Nt,s.Fj,s.JJ,s.u,f.gD,_.sg,u.bx,_.O5,h.oG,p.lW,v.ey,u.TO,Z.pW],styles:[""]}),e})()}]);var N=t(83893);let y=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[N.m,x]]}),e})()}}]);