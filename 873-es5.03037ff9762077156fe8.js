!function(){"use strict";function t(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,o)}return a}function e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[873],{18873:function(n,i,r){r.r(i),r.d(i,{GeneralSettingModule:function(){return j}});var l=r(39895),s=r(3679),c=r(25917),u=r(86710),m=r(1015),d=r(8606),g=r(40005),p=r(2603),h=r(4919),f=r(37716),Z=r(14469),v=r(57404),T=r(38583),A=r(98295),b=r(49983),_=r(67441),q=r(51095),y=r(72458),U=r(12178),E=r(29790);function k(t,e){if(1&t&&(f.TgZ(0,"mat-option",37),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&t){var a=e.$implicit;f.Q6J("value",a.value),f.xp6(1),f.hij(" ",f.lcZ(2,2,"robi.settings.themes."+a.label)," ")}}function w(t,e){if(1&t&&(f.TgZ(0,"figure",38),f._UZ(1,"img",39),f.ALo(2,"async"),f.qZA()),2&t){var a=f.oxw(2);f.xp6(1),f.Q6J("src",f.lcZ(2,1,a.showPhoto),f.LSH)}}function P(t,e){if(1&t&&(f.TgZ(0,"mat-option",37),f._uU(1),f.qZA()),2&t){var a=e.$implicit;f.Q6J("value",a.name),f.xp6(1),f.hij(" ",a.display_name," ")}}function S(t,e){if(1&t&&(f.TgZ(0,"mat-option",37),f._uU(1),f.qZA()),2&t){var a=e.$implicit;f.Q6J("value",a.name),f.xp6(1),f.hij(" ",a.display_name," ")}}function N(t,e){if(1&t&&(f.TgZ(0,"mat-option",37),f._uU(1),f.qZA()),2&t){var a=e.$implicit;f.Q6J("value",a.name),f.xp6(1),f.hij(" ",a.display_name," ")}}function C(t,e){if(1&t&&(f.TgZ(0,"mat-option",37),f._uU(1),f.qZA()),2&t){var a=e.$implicit;f.Q6J("value",a.name),f.xp6(1),f.hij(" ",a.display_name," ")}}function O(t,e){1&t&&(f.TgZ(0,"div",40),f._UZ(1,"mat-progress-bar",41),f.qZA())}function x(t,e){if(1&t){var a=f.EpF();f.ynx(0),f.TgZ(1,"form",7),f.NdJ("ngSubmit",function(){return f.CHM(a),f.oxw().onSubmit()}),f.TgZ(2,"div",0),f.TgZ(3,"div",8),f.TgZ(4,"div",0),f.TgZ(5,"div",1),f.TgZ(6,"mat-form-field",9),f.TgZ(7,"mat-label"),f._uU(8,"Company Name"),f.qZA(),f._UZ(9,"input",10),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"div",0),f.TgZ(11,"div",11),f.TgZ(12,"mat-form-field",9),f.TgZ(13,"mat-label"),f._uU(14,"Contact Email"),f.qZA(),f._UZ(15,"input",12),f.qZA(),f.qZA(),f.TgZ(16,"div",11),f.TgZ(17,"mat-form-field",9),f.TgZ(18,"mat-label"),f._uU(19,"Phone"),f.qZA(),f._UZ(20,"input",13),f.qZA(),f.qZA(),f.qZA(),f.TgZ(21,"div",0),f.TgZ(22,"div",1),f.TgZ(23,"mat-form-field",9),f.TgZ(24,"mat-label"),f._uU(25,"Default Currency"),f.qZA(),f._UZ(26,"input",14),f.qZA(),f.qZA(),f.qZA(),f.TgZ(27,"div",0),f.TgZ(28,"div",1),f.TgZ(29,"mat-form-field",9),f.TgZ(30,"mat-label"),f._uU(31),f.ALo(32,"translate"),f.qZA(),f.TgZ(33,"mat-select",15),f.NdJ("selectionChange",function(t){return f.CHM(a),f.oxw().onThemeSelect(t)}),f.YNc(34,k,3,4,"mat-option",16),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(35,"div",17),f.TgZ(36,"div",18),f.YNc(37,w,3,3,"figure",19),f.TgZ(38,"div"),f.TgZ(39,"input",20,21),f.NdJ("change",function(t){return f.CHM(a),f.oxw().onProfilePhotoSelect(t.target.files)}),f.qZA(),f.TgZ(41,"button",22),f.NdJ("click",function(){return f.CHM(a),f.MAs(40).click()}),f.TgZ(42,"i",23),f._uU(43,"attachment"),f.qZA(),f._uU(44," Logo"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(45,"div",0),f.TgZ(46,"div",1),f.TgZ(47,"mat-form-field",9),f.TgZ(48,"mat-label"),f._uU(49,"Physical Address"),f.qZA(),f._UZ(50,"input",24),f.qZA(),f.qZA(),f.qZA(),f.TgZ(51,"div",0),f.TgZ(52,"div",1),f.TgZ(53,"mat-form-field",9),f.TgZ(54,"mat-label"),f._uU(55,"Postal Address"),f.qZA(),f._UZ(56,"input",25),f.qZA(),f.qZA(),f.qZA(),f.TgZ(57,"div",0),f.TgZ(58,"div",1),f.TgZ(59,"mat-form-field",9),f.TgZ(60,"mat-label"),f._uU(61,"Website Url"),f.qZA(),f._UZ(62,"input",26),f.qZA(),f.qZA(),f.qZA(),f.TgZ(63,"div",0),f.TgZ(64,"div",11),f.TgZ(65,"mat-form-field",9),f.TgZ(66,"mat-label"),f._uU(67,"ZIP / Postal Code"),f.qZA(),f._UZ(68,"input",27),f.qZA(),f.qZA(),f.TgZ(69,"div",11),f.TgZ(70,"mat-form-field",9),f.TgZ(71,"mat-label"),f._uU(72,"Date Format"),f.qZA(),f.TgZ(73,"mat-select",28),f.YNc(74,P,2,2,"mat-option",16),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(75,"div",0),f.TgZ(76,"div",29),f.TgZ(77,"mat-form-field",9),f.TgZ(78,"mat-label"),f._uU(79,"Amount Thousand Separator"),f.qZA(),f.TgZ(80,"mat-select",30),f.YNc(81,S,2,2,"mat-option",16),f.qZA(),f.qZA(),f.qZA(),f.TgZ(82,"div",29),f.TgZ(83,"mat-form-field",9),f.TgZ(84,"mat-label"),f._uU(85,"Amount Decimal Separator"),f.qZA(),f.TgZ(86,"mat-select",31),f.YNc(87,N,2,2,"mat-option",16),f.qZA(),f.qZA(),f.qZA(),f.TgZ(88,"div",29),f.TgZ(89,"mat-form-field",9),f.TgZ(90,"mat-label"),f._uU(91,"Amount Decimals"),f.qZA(),f.TgZ(92,"mat-select",32),f.YNc(93,C,2,2,"mat-option",16),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(94,"div",33),f.YNc(95,O,2,0,"div",34),f.TgZ(96,"div"),f.TgZ(97,"button",35),f.NdJ("click",function(){return f.CHM(a),f.oxw().update()}),f._uU(98,"Update Settings"),f.qZA(),f.qZA(),f._UZ(99,"div",36),f.qZA(),f.BQk()}if(2&t){var o=e.ngIf,n=f.oxw();f.xp6(1),f.Q6J("formGroup",n.form),f.xp6(30),f.Oqu(f.lcZ(32,11,"robi.settings.themes.placeholder")),f.xp6(2),f.Q6J("ngModel",o.theme),f.xp6(1),f.Q6J("ngForOf",n.themes),f.xp6(3),f.Q6J("ngIf",n.showPhoto),f.xp6(37),f.Q6J("ngForOf",n.dateFormats),f.xp6(7),f.Q6J("ngForOf",n.amountThousandSeparators),f.xp6(6),f.Q6J("ngForOf",n.amountDecimalSeparators),f.xp6(6),f.Q6J("ngForOf",n.amountDecimals),f.xp6(2),f.Q6J("ngIf",n.loader),f.xp6(2),f.Q6J("disabled",!n.form.valid||n.loader)}}var I,F=l.Bz.forChild([{path:"",component:(I=function(){function n(t,e,o,i,r){a(this,n),this.store=t,this.fb=e,this.route=o,this.generalSettingService=i,this.notification=r,this.loader=!1,this.logoToUpload=null,this.logoUrl="",this.photoToUpload=null,this.photoUrl="",this.routeAnimationsElements=m.rd,this.themes=[{value:"DEFAULT-THEME",label:"blue"},{value:"LIGHT-THEME",label:"light"},{value:"NATURE-THEME",label:"nature"},{value:"BLACK-THEME",label:"dark"},{value:"ORANGE-THEME",label:"orange"},{value:"RED-THEME",label:"red"},{value:"PURPLE-THEME",label:"purple"},{value:"GREEN-THEME",label:"green"},{value:"BROWN-THEME",label:"brown"},{value:"GREY-THEME",label:"grey"},{value:"PINK-THEME",label:"pink"}],this.languages=[{value:"en",label:"en"},{value:"de",label:"de"},{value:"sk",label:"sk"},{value:"fr",label:"fr"},{value:"es",label:"es"},{value:"pt-br",label:"pt-br"},{value:"zh-cn",label:"zh-cn"},{value:"he",label:"he"}],this.form=this.fb.group({theme:[""],language:[""],company_name:["",[s.kI.required,s.kI.minLength(3)]],email:["",[s.kI.required,s.kI.minLength(3)]],currency:[""],phone:[""],physical_address:[""],postal_address:[""],website_url:[""],postal_code:[""],date_format:[""],amount_thousand_separator:[""],amount_decimal_separator:[""],amount_decimal:[""]})}var i,r,l;return i=n,(r=[{key:"ngOnInit",value:function(){this.settings$=this.store.pipe((0,u.Ys)(d.vi)),this.route.snapshot.data.setting&&(this.setting=this.route.snapshot.data.setting,this.prePopulateForm(this.setting),this.settingId=this.setting.id,this.getImageFromService(),this.dateFormats=this.setting.date_formats,this.amountThousandSeparators=this.setting.amount_thousand_separators,this.amountDecimalSeparators=this.setting.amount_decimal_separators,this.amountDecimals=this.setting.amount_decimals)}},{key:"onLanguageSelect",value:function(t){var e=t.value;this.store.dispatch((0,g.tH)({language:e}))}},{key:"onThemeSelect",value:function(t){var e=t.value;this.store.dispatch((0,g.qA)({theme:e}))}},{key:"onAutoNightModeToggle",value:function(t){var e=t.checked;this.store.dispatch((0,g.E3)({autoNightMode:e}))}},{key:"onStickyHeaderToggle",value:function(t){var e=t.checked;this.store.dispatch((0,g.ZV)({stickyHeader:e}))}},{key:"onPageAnimationsToggle",value:function(t){var e=t.checked;this.store.dispatch((0,g.oI)({pageAnimations:e}))}},{key:"onElementsAnimationsToggle",value:function(t){var e=t.checked;this.store.dispatch((0,g.TO)({elementsAnimations:e}))}},{key:"prePopulateForm",value:function(t){this.setting=t,this.form.patchValue({theme:"",language:"",company_name:this.setting.company_name,email:this.setting.email,currency:this.setting.currency,phone:this.setting.phone,country:this.setting.country,county:this.setting.county,town:this.setting.town,physical_address:this.setting.physical_address,postal_address:this.setting.postal_address,postal_code:this.setting.postal_code,website_url:this.setting.website_url,logo:this.setting.logo,date_format:this.setting.date_format,amount_thousand_separator:this.setting.amount_thousand_separator,amount_decimal_separator:this.setting.amount_decimal_separator,amount_decimal:this.setting.amount_decimal})}},{key:"onSubmit",value:function(){}},{key:"onLogoSelect",value:function(t){var e=this;if(t.length>0){this.logoToUpload=t.item(0);var a=new FileReader;a.onload=function(t){e.logoUrl=t.target.result},a.readAsDataURL(this.logoToUpload)}}},{key:"onProfilePhotoSelect",value:function(t){var e=this;if(t.length>0){this.photoToUpload=t.item(0),this.photoName=t.item(0).name;var a=new FileReader;a.onload=function(t){e.photoUrl=t.target.result},a.readAsDataURL(this.photoToUpload),this.loader=!0;var o=new FormData;o.append("logo",this.photoToUpload),o.append("id",this.settingId),this.uploadPhoto(o)}}},{key:"getImageFromService",value:function(){var t=this;this.setting&&null!==this.setting.logo&&this.generalSettingService.fetchPhoto(this.settingId).subscribe(function(e){t.createImageFromBlob(e)},function(t){})}},{key:"createImageFromBlob",value:function(t){var e=this,a=new FileReader;a.addEventListener("load",function(){e.showPhoto=(0,c.of)(a.result)},!1),t&&a.readAsDataURL(t)}},{key:"uploadPhoto",value:function(t){var e=this;this.generalSettingService.updatePhoto(t).subscribe(function(t){e.loader=!1,e.getImageFromService(),e.notification.showNotification("success","Success !! Logo has been updated.")},function(t){if(e.loader=!1,0!==t.payment&&(e.formErrors=t,e.formErrors))for(var a in e.formErrors)e.form&&e.form.controls[a].setErrors({incorrect:!0})})}},{key:"update",value:function(){var a=this,o=Object.assign({},this.setting,this.form.value);this.store.pipe((0,u.Ys)(h.XG)).subscribe(function(n){var i=function(a){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?t(Object(n),!0).forEach(function(t){e(a,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(n,t))})}return a}({},n);i.g_settings=o,a.authenticatedUser=i}),this.store.dispatch(p.u.actionLogin({user:this.authenticatedUser}));var n=new FormData;n.append("logo",this.logoToUpload),n.append("id",o.id),this.loader=!0,this.generalSettingService.update(o).subscribe(function(t){a.loader=!1,a.notification.showNotification("success","Success !! Setting has been updated.")},function(t){if(a.loader=!1,0!==t.payment&&(a.formErrors=t,a.formErrors))for(var e in a.formErrors)a.form&&a.form.controls[e].setErrors({incorrect:!0})})}}])&&o(i.prototype,r),l&&o(i,l),n}(),I.\u0275fac=function(t){return new(t||I)(f.Y36(u.yh),f.Y36(s.qu),f.Y36(l.gz),f.Y36(Z.E),f.Y36(v.g))},I.\u0275cmp=f.Xpm({type:I,selectors:[["robi-general-setting"]],decls:10,vars:6,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-category"],[1,"card-body"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"col-md-7"],["color","primary","appearance","outline",1,"full-width"],["matInput","","placeholder","Company Name","formControlName","company_name"],[1,"col-md-6"],["matInput","","placeholder","Contact Email","formControlName","email"],["matInput","","placeholder","Phone","formControlName","phone"],["matInput","","placeholder","Currency","formControlName","currency"],["formControlName","theme",3,"ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-5"],[1,"logo","centerTop"],["class","item simple-text",4,"ngIf"],["type","file","accept","image/*",1,"file-input",3,"change"],["logoFileInput",""],["mat-button","",1,"mat-raised-button",3,"click"],[1,"material-icons"],["matInput","","placeholder","Physical Address","formControlName","physical_address"],["matInput","","placeholder","Postal Address","formControlName","postal_address"],["matInput","","placeholder","Website Url","formControlName","website_url"],["matInput","","placeholder","ZIP / Postal Code","formControlName","postal_code"],["placeholder","Date Format","formControlName","date_format"],[1,"col-md-4"],["placeholder","Amount Thousand Separator","formControlName","amount_thousand_separator"],["placeholder","Amount Decimal Separator","formControlName","amount_decimal_separator"],["placeholder","Amount Decimals","formControlName","amount_decimal"],[1,"divider","divider-md"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["mat-raised-button","","type","submit","color","accent",1,"btn","pull-right",3,"disabled","click"],[1,"clearfix"],[3,"value"],[1,"item","simple-text"],["alt","Logo",1,"img",3,"src"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"p",4),f._uU(5),f.ALo(6,"translate"),f.qZA(),f.qZA(),f.TgZ(7,"div",5),f.YNc(8,x,100,13,"ng-container",6),f.ALo(9,"async"),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(5),f.hij(" ",f.lcZ(6,2,"robi.settings.general.title"),""),f.xp6(3),f.Q6J("ngIf",f.lcZ(9,4,e.settings$)))},directives:[T.O5,s._Y,s.JL,s.sg,A.KE,A.hX,b.Nt,s.Fj,s.JJ,s.u,_.gD,T.sg,q.lW,y.ey,U.pW],pipes:[E.X$,T.Ov],styles:["figure.item[_ngcontent-%COMP%]{vertical-align:top;display:inline-block;text-align:center}img[_ngcontent-%COMP%]{width:150px;height:150px;background-color:gray}.caption[_ngcontent-%COMP%]{display:block}.centerTop[_ngcontent-%COMP%]{text-align:center;padding-top:25px}"]}),I)}]),J=r(83893);r(39075);var M=function(){var t=function t(){a(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[T.ez]]}),t}(),j=function(){var t=function t(){a(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[J.m,F,M]]}),t}()}}])}();