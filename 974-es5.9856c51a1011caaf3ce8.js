!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[974],{24974:function(a,r,o){o.r(r),o.d(r,{AccountingModule:function(){return st}});var l,s=o(39895),d=o(37716),p=o(65939),f=function(){return{exact:!0}},m=function(){return["ledger"]},g=function(){return["journal"]},h=((l=function(){function e(){c(this,e)}return u(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||l)},l.\u0275cmp=d.Xpm({type:l,selectors:[["app-accounting"]],decls:23,vars:9,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-body"],["mat-tab-nav-bar",""],["mat-tab-link","","routerLinkActive","","routerLink","/reports",3,"active","routerLinkActiveOptions"],["general","routerLinkActive"],[1,"nav-text"],["mat-tab-link","","routerLinkActive","","routerLink","/ledger",3,"active","routerLink"],["ledger","routerLinkActive"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink"],["journal","routerLinkActive"]],template:function(e,t){if(1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"div",4),d.TgZ(5,"div",5),d.TgZ(6,"h4",6),d._uU(7,"Reports"),d.qZA(),d.qZA(),d.TgZ(8,"div",7),d.TgZ(9,"nav",8),d.TgZ(10,"a",9,10),d.TgZ(12,"span",11),d._uU(13," Property Report "),d.qZA(),d.qZA(),d.TgZ(14,"a",12,13),d.TgZ(16,"span",11),d._uU(17," General Ledger "),d.qZA(),d.qZA(),d.TgZ(18,"a",14,15),d.TgZ(20,"span",11),d._uU(21," Journal "),d.qZA(),d.qZA(),d.qZA(),d._UZ(22,"router-outlet"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var n=d.MAs(11),a=d.MAs(15),i=d.MAs(19);d.xp6(10),d.Q6J("active",n.isActive)("routerLinkActiveOptions",d.DdM(6,f)),d.xp6(4),d.Q6J("active",a.isActive)("routerLink",d.DdM(7,m)),d.xp6(4),d.Q6J("active",i.isActive)("routerLink",d.DdM(8,g))}},directives:[p.BU,s.yS,p.Nj,s.Od,s.lC],styles:[""]}),l),v=o(22238),Z=o(99692),b=o(11494),y=o(1581),A=function(e){n(a,e);var t=i(a);function a(e){return c(this,a),t.call(this,e)}return a}(y.y),_=o(3679),T=o(83558),w=o(57404),q=o(38583),x=o(51095),S=o(4885),C=o(32789),D=["stepper"];function Y(e,t){1&e&&(d.TgZ(0,"div",7),d._uU(1," Statement ... "),d._UZ(2,"mat-spinner",8),d.qZA()),2&e&&(d.xp6(2),d.Q6J("diameter",40))}function k(e,t){if(1&e&&(d.TgZ(0,"div",9),d.TgZ(1,"div"),d.TgZ(2,"span"),d._uU(3," Account Statement "),d.qZA(),d.qZA(),d.TgZ(4,"div",10),d.TgZ(5,"div",11),d.TgZ(6,"div",12),d._uU(7),d.qZA(),d.TgZ(8,"div",12),d._uU(9),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var n=d.oxw();d.xp6(7),d.hij("A/C Name: ",null==n.account?null:n.account.account_display_name,""),d.xp6(2),d.hij("A/C Number: ",null==n.account?null:n.account.account_number,"")}}function N(e,t){1&e&&(d.TgZ(0,"mat-header-cell",30),d._uU(1," Date "),d.qZA())}function O(e,t){if(1&e&&(d.TgZ(0,"mat-cell",30),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.created_at," ")}}function U(e,t){1&e&&(d.TgZ(0,"mat-header-cell",31),d._uU(1," Narration "),d.qZA())}function J(e,t){if(1&e&&(d.TgZ(0,"mat-cell",31),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.narration," ")}}function Q(e,t){1&e&&(d.TgZ(0,"mat-header-cell",32),d._uU(1," Debit "),d.qZA())}function I(e,t){if(1&e&&(d.TgZ(0,"mat-cell",32),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.is_dr?n.display_amount:"0.00"," ")}}function j(e,t){1&e&&(d.TgZ(0,"mat-header-cell",32),d._uU(1," Credit "),d.qZA())}function R(e,t){if(1&e&&(d.TgZ(0,"mat-cell",32),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.is_cr?n.display_amount:"0.00"," ")}}function P(e,t){1&e&&(d.TgZ(0,"mat-header-cell",32),d._uU(1," Balance "),d.qZA())}function L(e,t){if(1&e&&(d.TgZ(0,"mat-cell",32),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.balance," ")}}function M(e,t){1&e&&d._UZ(0,"mat-header-row")}function B(e,t){1&e&&d._UZ(0,"mat-row")}function F(e,t){1&e&&(d.TgZ(0,"span"),d._uU(1,"No Activity"),d.qZA())}function H(e,t){if(1&e&&(d.TgZ(0,"div",13),d.TgZ(1,"mat-table",14,15),d.ynx(3,16),d.YNc(4,N,2,0,"mat-header-cell",17),d.YNc(5,O,2,1,"mat-cell",18),d.BQk(),d.ynx(6,19),d.YNc(7,U,2,0,"mat-header-cell",20),d.YNc(8,J,2,1,"mat-cell",21),d.BQk(),d.ynx(9,22),d.YNc(10,Q,2,0,"mat-header-cell",23),d.YNc(11,I,2,1,"mat-cell",24),d.BQk(),d.ynx(12,25),d.YNc(13,j,2,0,"mat-header-cell",23),d.YNc(14,R,2,1,"mat-cell",24),d.BQk(),d.ynx(15,26),d.YNc(16,P,2,0,"mat-header-cell",23),d.YNc(17,L,2,1,"mat-cell",24),d.BQk(),d.YNc(18,M,1,0,"mat-header-row",27),d.YNc(19,B,1,0,"mat-row",28),d.qZA(),d.YNc(20,F,2,0,"span",29),d.qZA()),2&e){var n=d.oxw();d.xp6(1),d.Q6J("dataSource",n.dataSource),d.xp6(17),d.Q6J("matHeaderRowDef",n.tableColumns)("matHeaderRowDefSticky",!0),d.xp6(1),d.Q6J("matRowDefColumns",n.tableColumns),d.xp6(1),d.Q6J("ngIf",0===n.dataSource.length)}}function $(e,t){1&e&&d.GkF(0,33)}var E=function(){var e=function(){function e(t,n,a,i,r){c(this,e),this.fb=n,this.accountingService=a,this.notification=i,this.dialogRef=r,this.loader=!1,this.tableColumns=["date","narration","debit","credit","balance"],this.id=t.id,this.type=t.type}return u(e,[{key:"ngOnInit",value:function(){switch(this.loader=!0,this.type){case"general":this.generalAccountStatement(this.id,!1);break;case"member":this.depositAccountStatement(this.id,!1);break;case"lease":this.leaseAccountStatement(this.id,!1)}}},{key:"downloadPdf",value:function(){switch(this.type){case"general":this.generalAccountStatement(this.id,!0);break;case"member":this.depositAccountStatement(this.id,!0);break;case"loan":this.leaseAccountStatement(this.id,!0)}}},{key:"showFile",value:function(e){var t=new Blob([e],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(t);else{var n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="statement.pdf",a.click(),setTimeout(function(){window.URL.revokeObjectURL(n)},100)}}},{key:"depositAccountStatement",value:function(e,t){var n=this;!0===t&&(this.loader=!0,this.accountingService.downloadMemberAccountStatement({id:e,pdf:t}).subscribe(function(e){n.dialogRef.close(),n.showFile(e)},function(){n.loader=!1,n.dialogRef.close()})),this.accountingService.getDepositAccountStatement({id:e,pdf:t}).subscribe(function(e){n.loader=!1,n.dataSource=e.statement,n.account=e},function(){n.loader=!1,n.dataSource=[]})}},{key:"leaseAccountStatement",value:function(e,t){var n=this;!0===t&&(this.loader=!0,this.accountingService.downloadLeaseAccountStatement({id:e,pdf:t}).subscribe(function(e){n.dialogRef.close(),n.showFile(e)},function(){n.loader=!1,n.dialogRef.close()})),this.accountingService.getLeaseAccountStatement({id:e,pdf:t}).subscribe(function(e){n.loader=!1,n.dataSource=e.statement,n.account=e},function(){n.loader=!1,n.dataSource=[]})}},{key:"generalAccountStatement",value:function(e,t){var n=this;!0===t&&(this.loader=!0,this.accountingService.downloadGeneralAccountStatement({id:e,pdf:t}).subscribe(function(e){n.dialogRef.close(),n.showFile(e)},function(){n.loader=!1,n.dialogRef.close()})),this.accountingService.getGeneralAccountStatement({id:e,pdf:t}).subscribe(function(e){n.loader=!1,n.dataSource=e.statement,n.account=e},function(){n.loader=!1,n.dataSource=[]})}},{key:"close",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(v.WI),d.Y36(_.qu),d.Y36(T.S),d.Y36(w.g),d.Y36(v.so))},e.\u0275cmp=d.Xpm({type:e,selectors:[["robi-statement"]],viewQuery:function(e,t){var n;(1&e&&d.Gf(D,7),2&e)&&(d.iGM(n=d.CRH())&&(t.stepper=n.first))},decls:8,vars:5,consts:[["class","d-flex justify-content-center spinner-container",4,"ngIf"],["class","card-header align-center small-font",4,"ngIf"],[1,"mat-dialog-data"],["class","table-responsive",4,"ngIf"],["align","center"],["mat-button","",1,"mat-raised-button","button-separate",3,"mat-dialog-close"],["align","right",4,"ngIf"],[1,"d-flex","justify-content-center","spinner-container"],[3,"diameter"],[1,"card-header","align-center","small-font"],[1,"row","col-12"],[1,"col-12"],[1,"row"],[1,"table-responsive"],[3,"dataSource"],["table",""],["matColumnDef","date"],["class","date",4,"matHeaderCellDef"],["class","date",4,"matCellDef"],["matColumnDef","narration"],["class","narration",4,"matHeaderCellDef"],["class","narration",4,"matCellDef"],["matColumnDef","debit"],["class","money-cell",4,"matHeaderCellDef"],["class","money-cell",4,"matCellDef"],["matColumnDef","credit"],["matColumnDef","balance"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[1,"date"],[1,"narration"],[1,"money-cell"],["align","right"]],template:function(e,t){1&e&&(d.YNc(0,Y,3,1,"div",0),d.YNc(1,k,10,2,"div",1),d.TgZ(2,"mat-dialog-content",2),d.YNc(3,H,21,5,"div",3),d.qZA(),d.TgZ(4,"mat-dialog-actions",4),d.TgZ(5,"button",5),d._uU(6,"Close"),d.qZA(),d.YNc(7,$,1,0,"ng-container",6),d.qZA()),2&e&&(d.Q6J("ngIf",t.loader),d.xp6(1),d.Q6J("ngIf",!t.loader),d.xp6(2),d.Q6J("ngIf",!t.loader),d.xp6(2),d.Q6J("mat-dialog-close",!0),d.xp6(2),d.Q6J("ngIf",!t.loader))},directives:[q.O5,v.xY,v.H8,x.lW,v.ZT,S.$g,C.BZ,C.w1,C.fO,C.Dz,C.as,C.nj,C.ge,C.ev,C.XQ,C.Gk],styles:["mat-table[_ngcontent-%COMP%]{min-width:600px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{font-weight:bold}.mat-cell[_ngcontent-%COMP%]{font-size:12px}.narration[_ngcontent-%COMP%]{min-width:200px}.date[_ngcontent-%COMP%]{min-width:150px}.header[_ngcontent-%COMP%]{background-color:transparent;padding:0 5px;height:20px}.fx-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.align-center[_ngcontent-%COMP%]{text-align:center}.small-font[_ngcontent-%COMP%]{font-size:small}.money-cell[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),e}(),G=o(22759),z=o(66682),W=o(54395),X=o(87519),V=o(68307),K=o(22958),ee=o(65),te=o(91841),ne=function(){var e=function(e){n(a,e);var t=i(a);function a(e){return c(this,a),t.call(this,e,"journals")}return a}(ee.b);return e.\u0275fac=function(t){return new(t||e)(d.LFG(te.eN))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),ae=o(63385),ie=o(98295),re=o(67441),oe=o(49983),ce=o(72458),le=o(76627),ue=o(11436),se=o(12178),de=["search"];function pe(e,t){if(1&e&&(d.TgZ(0,"mat-option",33),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.Q6J("value",n.id),d.xp6(1),d.hij(" ",n.property_name," ")}}function fe(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"button",34),d.NdJ("click",function(){return d.CHM(n),d.oxw().clearSearch()}),d.TgZ(1,"mat-icon"),d._uU(2,"close"),d.qZA(),d.qZA()}}function me(e,t){1&e&&(d.TgZ(0,"mat-header-cell",35),d._uU(1," Account Number "),d.qZA())}function ge(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.account_number," ")}}function he(e,t){1&e&&(d.TgZ(0,"mat-header-cell",35),d._uU(1," Account Name "),d.qZA())}function ve(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.account_display_name," ")}}function Ze(e,t){1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1," Balance "),d.qZA())}function be(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.accountBalance," ")}}function ye(e,t){1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1," Statement "),d.qZA())}function Ae(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"mat-cell",36),d.TgZ(1,"button",37),d.NdJ("click",function(){var e=d.CHM(n).$implicit;return d.oxw().viewStatement(e)}),d.TgZ(2,"mat-icon",38),d._uU(3,"visibility"),d.qZA(),d.qZA(),d.TgZ(4,"button",39),d.NdJ("click",function(){var e=d.CHM(n).$implicit;return d.oxw().viewPdfStatement(e)}),d.TgZ(5,"mat-icon"),d._uU(6,"picture_as_pdf"),d.qZA(),d.qZA(),d.qZA()}if(2&e){var a=d.oxw();d.xp6(1),d.Q6J("disabled",a.loader)("matTooltipPosition","above"),d.xp6(3),d.Q6J("disabled",a.loader)("matTooltipPosition","above")}}function _e(e,t){1&e&&d._UZ(0,"mat-header-row")}function Te(e,t){1&e&&d._UZ(0,"mat-row")}function we(e,t){1&e&&(d.TgZ(0,"span"),d._uU(1,"No Data"),d.qZA())}function qe(e,t){1&e&&(d.TgZ(0,"div",40),d._UZ(1,"mat-progress-bar",41),d.qZA())}var xe=function(){var e=function(){function e(t,n,a,i,r,o,l){c(this,e),this.fb=t,this.service=n,this.generalJournalService=a,this.notification=i,this.dialog=r,this.memberService=o,this.propertyService=l,this.displayedColumns=["account_number","account_name","balance","actions"],this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100]}return u(e,[{key:"ngOnInit",value:function(){var e=this;this.dataSource=new A(this.service),this.dataSource.meta$.subscribe(function(t){return e.meta=t}),this.dataSource.load("",0,0,"account_number","desc","property_id",this.propertyID),this.properties$=this.propertyService.list(["property_name"]),this.form=this.fb.group({property_id:[this.propertyID],include_members:[""]})}},{key:"onPropertyChange",value:function(e){this.propertyID=e,this.loadData()}},{key:"viewStatement",value:function(e){var t=e.id,n=new v.vA;n.disableClose=!0,n.autoFocus=!0,n.data={id:t,type:"general"},this.dialog.open(E,n)}},{key:"viewPdfStatement",value:function(e){var t=null==e?void 0:e.id,n=new v.vA;n.disableClose=!0,n.autoFocus=!0,n.data={id:t},n.width="600px",this.dialog.open(K.K,n)}},{key:"loadData",value:function(){this.dataSource.load(this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction,"property_id",this.propertyID)}},{key:"ngAfterViewInit",value:function(){var e=this;(0,G.R)(this.search.nativeElement,"keyup").pipe((0,W.b)(1e3),(0,X.x)(),(0,V.b)(function(){e.paginator.pageIndex=0,e.loadData()})).subscribe(),this.paginator.page.pipe((0,V.b)(function(){return e.loadData()})).subscribe(),this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),(0,z.T)(this.sort.sortChange,this.paginator.page).pipe((0,V.b)(function(){return e.loadData()})).subscribe()}},{key:"clearSearch",value:function(){this.search.nativeElement.value="",this.loadData()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(_.qu),d.Y36(T.S),d.Y36(ne),d.Y36(w.g),d.Y36(v.uw),d.Y36(w.g),d.Y36(ae.b))},e.\u0275cmp=d.Xpm({type:e,selectors:[["robi-ledger"]],viewQuery:function(e,t){var n;(1&e&&(d.Gf(de,5),d.Gf(Z.NW,7),d.Gf(b.YE,7)),2&e)&&(d.iGM(n=d.CRH())&&(t.search=n.first),d.iGM(n=d.CRH())&&(t.paginator=n.first),d.iGM(n=d.CRH())&&(t.sort=n.first))},decls:40,vars:16,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[3,"formGroup"],[1,"col-5"],["color","primary",1,"search-form-field"],["placeholder","Property","formControlName","property_id",3,"selectionChange"],["propertySelect",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","search-form-section"],[1,"col-11"],[1,"search-form-field"],["matInput","","placeholder","Filter","autocomplete","off",3,"disabled"],["search",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-responsive"],["matSort","","matSortActive","account_number","matSortDirection","desc","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","account_number"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","account_name"],["matColumnDef","balance"],[4,"matHeaderCellDef"],["matColumnDef","actions"],["class","button-row",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSizeOptions"],["pagination",""],[3,"value"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-sort-header",""],[1,"button-row"],["mat-icon-button","","matTooltip","View Account Statement.",3,"disabled","matTooltipPosition","click"],["color","primary"],["mat-icon-button","","matTooltip","Download Account Statement.",3,"disabled","matTooltipPosition","click"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"form",4),d.TgZ(5,"div",0),d.TgZ(6,"div",5),d.TgZ(7,"mat-form-field",6),d.TgZ(8,"mat-select",7,8),d.NdJ("selectionChange",function(){d.CHM(n);var e=d.MAs(9);return t.onPropertyChange(e.value)}),d.YNc(10,pe,2,2,"mat-option",9),d.ALo(11,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"div",10),d.TgZ(13,"div",11),d.TgZ(14,"mat-form-field",12),d._UZ(15,"input",13,14),d.YNc(17,fe,3,0,"button",15),d.qZA(),d.qZA(),d.qZA(),d.TgZ(18,"div",16),d.TgZ(19,"mat-table",17,18),d.ynx(21,19),d.YNc(22,me,2,0,"mat-header-cell",20),d.YNc(23,ge,2,1,"mat-cell",21),d.BQk(),d.ynx(24,22),d.YNc(25,he,2,0,"mat-header-cell",20),d.YNc(26,ve,2,1,"mat-cell",21),d.BQk(),d.ynx(27,23),d.YNc(28,Ze,2,0,"mat-header-cell",24),d.YNc(29,be,2,1,"mat-cell",21),d.BQk(),d.ynx(30,25),d.YNc(31,ye,2,0,"mat-header-cell",24),d.YNc(32,Ae,7,4,"mat-cell",26),d.BQk(),d.YNc(33,_e,1,0,"mat-header-row",27),d.YNc(34,Te,1,0,"mat-row",28),d.qZA(),d.YNc(35,we,2,0,"span",29),d.YNc(36,qe,2,0,"div",30),d.ALo(37,"async"),d._UZ(38,"mat-paginator",31,32),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var a=d.MAs(16);d.xp6(4),d.Q6J("formGroup",t.form),d.xp6(6),d.Q6J("ngForOf",d.lcZ(11,12,t.properties$)),d.xp6(5),d.Q6J("disabled",0===(null==t.meta?null:t.meta.total)),d.xp6(2),d.Q6J("ngIf",a.value),d.xp6(2),d.Q6J("dataSource",t.dataSource),d.xp6(14),d.Q6J("matHeaderRowDef",t.displayedColumns),d.xp6(1),d.Q6J("matRowDefColumns",t.displayedColumns),d.xp6(1),d.Q6J("ngIf",0===(null==t.meta?null:t.meta.total)),d.xp6(1),d.Q6J("ngIf",d.lcZ(37,14,null==t.dataSource?null:t.dataSource.loading$)||t.loader),d.xp6(2),d.Q6J("length",null==t.meta?null:t.meta.total)("pageIndex",t.pageIndex)("pageSizeOptions",t.pageSizeOptions)}},directives:[_._Y,_.JL,_.sg,ie.KE,re.gD,_.JJ,_.u,q.sg,oe.Nt,q.O5,C.BZ,b.YE,C.w1,C.fO,C.Dz,C.as,C.nj,Z.NW,ce.ey,x.lW,ie.R9,le.Hw,C.ge,b.nU,C.ev,ue.gM,C.XQ,C.Gk,se.pW],pipes:[q.Ov],styles:[""]}),e}(),Se=function(e){n(a,e);var t=i(a);function a(e){return c(this,a),t.call(this,e)}return a}(y.y),Ce=o(86710),De=["search"];function Ye(e,t){if(1&e&&(d.TgZ(0,"mat-option",34),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.Q6J("value",n.id),d.xp6(1),d.hij(" ",n.property_name," ")}}function ke(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"button",35),d.NdJ("click",function(){return d.CHM(n),d.oxw().clearSearch()}),d.TgZ(1,"mat-icon"),d._uU(2,"close"),d.qZA(),d.qZA()}}function Ne(e,t){1&e&&(d.TgZ(0,"mat-header-cell",36),d._uU(1," Date "),d.qZA())}function Oe(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.created_at," ")}}function Ue(e,t){1&e&&(d.TgZ(0,"mat-header-cell",36),d._uU(1," Narration "),d.qZA())}function Je(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.narration," ")}}function Qe(e,t){1&e&&(d.TgZ(0,"mat-header-cell",36),d._uU(1," Debit Account "),d.qZA())}function Ie(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.debitAccount.account_display_name," ")}}function je(e,t){1&e&&(d.TgZ(0,"mat-header-cell",36),d._uU(1," Credit Account "),d.qZA())}function Re(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.creditAccount.account_display_name," ")}}function Pe(e,t){1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1," Amount "),d.qZA())}function Le(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.amount," ")}}function Me(e,t){1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1," Prepared By "),d.qZA())}function Be(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.xp6(1),d.hij(" ",n.preparedBy?null==n.preparedBy?null:n.preparedBy.first_name:"-"," ")}}function Fe(e,t){1&e&&d._UZ(0,"mat-header-row")}function He(e,t){1&e&&d._UZ(0,"mat-row")}function $e(e,t){1&e&&(d.TgZ(0,"span"),d._uU(1,"No Data"),d.qZA())}function Ee(e,t){1&e&&(d.TgZ(0,"div",37),d._UZ(1,"mat-progress-bar",38),d.qZA())}var Ge=function(){var e=function(){function e(t,n,a,i,r,o,l,u){c(this,e),this.fb=t,this.service=n,this.generalJournalService=a,this.store=i,this.notification=r,this.dialog=o,this.memberService=l,this.propertyService=u,this.journalColumns=["created_at","narration","debit_account_id","credit_account_id","amount","prepared_by"],this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100]}return u(e,[{key:"ngOnInit",value:function(){var e=this;this.dataSourceJournal=new Se(this.generalJournalService),this.dataSourceJournal.meta$.subscribe(function(t){return e.metaLedger=t}),this.dataSourceJournal.load("",0,0,"created_at","desc","property_id",this.propertyID),this.properties$=this.propertyService.list(["property_name"]),this.form=this.fb.group({property_id:[this.propertyID],include_members:[""]})}},{key:"onPropertyChange",value:function(e){this.propertyID=e,this.loadData()}},{key:"loadData",value:function(){this.dataSourceJournal.load(this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction,"property_id",this.propertyID)}},{key:"ngAfterViewInit",value:function(){var e=this;(0,G.R)(this.search.nativeElement,"keyup").pipe((0,W.b)(1e3),(0,X.x)(),(0,V.b)(function(){e.paginator.pageIndex=0,e.loadData()})).subscribe(),this.paginator.page.pipe((0,V.b)(function(){return e.loadData()})).subscribe(),this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),(0,z.T)(this.sort.sortChange,this.paginator.page).pipe((0,V.b)(function(){return e.loadData()})).subscribe()}},{key:"clearSearch",value:function(){this.search.nativeElement.value="",this.loadData()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(_.qu),d.Y36(T.S),d.Y36(ne),d.Y36(Ce.yh),d.Y36(w.g),d.Y36(v.uw),d.Y36(w.g),d.Y36(ae.b))},e.\u0275cmp=d.Xpm({type:e,selectors:[["robi-journal"]],viewQuery:function(e,t){var n;(1&e&&(d.Gf(De,5),d.Gf(Z.NW,7),d.Gf(b.YE,7)),2&e)&&(d.iGM(n=d.CRH())&&(t.search=n.first),d.iGM(n=d.CRH())&&(t.paginator=n.first),d.iGM(n=d.CRH())&&(t.sort=n.first))},decls:46,vars:16,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[3,"formGroup"],[1,"col-5"],["color","primary",1,"search-form-field"],["placeholder","Property","formControlName","property_id",3,"selectionChange"],["propertySelect",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","search-form-section"],[1,"col-11"],[1,"search-form-field"],["matInput","","placeholder","Filter","autocomplete","off",3,"disabled"],["search",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-responsive"],["matSort","","matSortActive","created_at","matSortDirection","desc","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","created_at"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","narration"],["matColumnDef","debit_account_id"],["matColumnDef","credit_account_id"],["matColumnDef","amount"],[4,"matHeaderCellDef"],["matColumnDef","prepared_by"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSizeOptions"],["pagination",""],[3,"value"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-sort-header",""],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"form",4),d.TgZ(5,"div",0),d.TgZ(6,"div",5),d.TgZ(7,"mat-form-field",6),d.TgZ(8,"mat-select",7,8),d.NdJ("selectionChange",function(){d.CHM(n);var e=d.MAs(9);return t.onPropertyChange(e.value)}),d.YNc(10,Ye,2,2,"mat-option",9),d.ALo(11,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"div",10),d.TgZ(13,"div",11),d.TgZ(14,"mat-form-field",12),d._UZ(15,"input",13,14),d.YNc(17,ke,3,0,"button",15),d.qZA(),d.qZA(),d.qZA(),d.TgZ(18,"div",16),d.TgZ(19,"mat-table",17,18),d.ynx(21,19),d.YNc(22,Ne,2,0,"mat-header-cell",20),d.YNc(23,Oe,2,1,"mat-cell",21),d.BQk(),d.ynx(24,22),d.YNc(25,Ue,2,0,"mat-header-cell",20),d.YNc(26,Je,2,1,"mat-cell",21),d.BQk(),d.ynx(27,23),d.YNc(28,Qe,2,0,"mat-header-cell",20),d.YNc(29,Ie,2,1,"mat-cell",21),d.BQk(),d.ynx(30,24),d.YNc(31,je,2,0,"mat-header-cell",20),d.YNc(32,Re,2,1,"mat-cell",21),d.BQk(),d.ynx(33,25),d.YNc(34,Pe,2,0,"mat-header-cell",26),d.YNc(35,Le,2,1,"mat-cell",21),d.BQk(),d.ynx(36,27),d.YNc(37,Me,2,0,"mat-header-cell",26),d.YNc(38,Be,2,1,"mat-cell",21),d.BQk(),d.YNc(39,Fe,1,0,"mat-header-row",28),d.YNc(40,He,1,0,"mat-row",29),d.qZA(),d.YNc(41,$e,2,0,"span",30),d.YNc(42,Ee,2,0,"div",31),d.ALo(43,"async"),d._UZ(44,"mat-paginator",32,33),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var a=d.MAs(16);d.xp6(4),d.Q6J("formGroup",t.form),d.xp6(6),d.Q6J("ngForOf",d.lcZ(11,12,t.properties$)),d.xp6(5),d.Q6J("disabled",0===(null==t.metaLedger?null:t.metaLedger.total)),d.xp6(2),d.Q6J("ngIf",a.value),d.xp6(2),d.Q6J("dataSource",t.dataSourceJournal),d.xp6(20),d.Q6J("matHeaderRowDef",t.journalColumns),d.xp6(1),d.Q6J("matRowDefColumns",t.journalColumns),d.xp6(1),d.Q6J("ngIf",0===(null==t.meta?null:t.meta.total)),d.xp6(1),d.Q6J("ngIf",d.lcZ(43,14,null==t.dataSourceJournal?null:t.dataSourceJournal.loading$)||t.loader),d.xp6(2),d.Q6J("length",null==t.metaLedger?null:t.metaLedger.total)("pageIndex",t.pageIndex)("pageSizeOptions",t.pageSizeOptions)}},directives:[_._Y,_.JL,_.sg,ie.KE,re.gD,_.JJ,_.u,q.sg,oe.Nt,q.O5,C.BZ,b.YE,C.w1,C.fO,C.Dz,C.as,C.nj,Z.NW,ce.ey,x.lW,ie.R9,le.Hw,C.ge,b.nU,C.ev,C.XQ,C.Gk,se.pW],pipes:[q.Ov],styles:[""]}),e}(),ze=o(88229),We=o(79765),Xe=o(45435),Ve=o(46782),Ke=o(88002),et=o(65792),tt=o(39075),nt=o(52218);function at(e,t){if(1&e&&(d.TgZ(0,"mat-option",18),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.Q6J("value",n.id),d.xp6(1),d.AsE(" ",n.property_name," - ",n.property_code," ")}}function it(e,t){if(1&e&&(d.TgZ(0,"mat-option",18),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.Q6J("value",n.id),d.xp6(1),d.hij(" ",n.name," ")}}function rt(e,t){1&e&&(d.TgZ(0,"div",19),d._uU(1," downloading report ... "),d.qZA())}function ot(e,t){1&e&&(d.TgZ(0,"div",19),d._UZ(1,"mat-progress-bar",20),d.qZA())}function ct(e,t){if(1&e&&d._UZ(0,"iframe",21),2&e){var n=d.oxw();d.Q6J("src",n.pdfSrc,d.uOi)}}var lt=s.Bz.forChild([{path:"",component:h,children:[{path:"",component:function(){var n=function(){function n(e,t,a,i,r,o,l,u){c(this,n),this.fb=e,this.service=t,this.generalJournalService=a,this.notification=r,this.dialog=o,this.memberService=l,this.propertyService=u,this.loader=!1,this.propertyServerSideFilteringCtrl=new _.NI,this.searching=!1,this.filteredServerSideProperties=new ze.t(1),this._onDestroy=new We.xQ,this.domSanitizer=i}return u(n,[{key:"ngOnInit",value:function(){var e=this;this.form=this.fb.group({property_id:[""],period_id:[""]}),this.propertyServerSideFilteringCtrl.valueChanges.pipe((0,Xe.h)(function(e){return!!e}),(0,V.b)(function(){return e.searching=!0}),(0,Ve.R)(this._onDestroy),(0,W.b)(2e3),(0,X.x)(),(0,Ke.U)(function(t){t=t.toLowerCase(),e.propertiesFiltered$=e.propertyService.search(t)}),(0,et.g)(500)).subscribe(function(t){e.searching=!1,e.filteredServerSideProperties.next(t)},function(t){e.searching=!1})}},{key:"onPropertyItemChange",value:function(e){this.periods$=this.propertyService.periods(e)}},{key:"onPeriodItemChange",value:function(e){}},{key:"fetchReport",value:function(){var n=this,a=function(n){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?e(Object(i),!0).forEach(function(e){t(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}({},this.form.value);this.loader=!0,this.propertyService.report(a).subscribe(function(e){n.pdfSrc=n.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(e)),n.loader=!1},function(){n.loader=!1,n.notification.showNotification("danger","Error downloading Report !")})}}]),n}();return n.\u0275fac=function(e){return new(e||n)(d.Y36(_.qu),d.Y36(T.S),d.Y36(ne),d.Y36(tt.H7),d.Y36(w.g),d.Y36(v.uw),d.Y36(w.g),d.Y36(ae.b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["robi-property-report"]],decls:36,vars:13,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"col-4"],[3,"formGroup"],[1,"col-12"],["color","primary","appearance","outline"],["formControlName","property_id",3,"selectionChange"],["propertySelect",""],["placeholderLabel","Find Property...","noEntriesFoundLabel","No matching Property found ...",3,"formControl","searching"],[3,"value",4,"ngFor","ngForOf"],["formControlName","period_id",3,"selectionChange"],["periodSelect",""],["mat-raised-button","","color","primary",1,"float-right",3,"disabled","click"],[1,"col-8"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["width","500","height","600","style","width: 100%","type","application/pdf",3,"src",4,"ngIf"],[3,"value"],[1,"d-flex","justify-content-center","spinner-container"],["color","primary","mode","query","value","50","bufferValue","75"],["width","500","height","600","type","application/pdf",2,"width","100%",3,"src"]],template:function(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"div",0),d.TgZ(5,"div",4),d.TgZ(6,"form",5),d.TgZ(7,"div",0),d.TgZ(8,"div",6),d.TgZ(9,"mat-form-field",7),d.TgZ(10,"mat-label"),d._uU(11,"Property"),d.qZA(),d.TgZ(12,"mat-select",8,9),d.NdJ("selectionChange",function(){d.CHM(n);var e=d.MAs(13);return t.onPropertyItemChange(e.value)}),d.TgZ(14,"mat-option"),d._UZ(15,"ngx-mat-select-search",10),d.qZA(),d.YNc(16,at,2,3,"mat-option",11),d.ALo(17,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(18,"div",0),d.TgZ(19,"div",6),d.TgZ(20,"mat-form-field",7),d.TgZ(21,"mat-label"),d._uU(22,"Period"),d.qZA(),d.TgZ(23,"mat-select",12,13),d.NdJ("selectionChange",function(){d.CHM(n);var e=d.MAs(24);return t.onPeriodItemChange(e.value)}),d.YNc(25,it,2,2,"mat-option",11),d.ALo(26,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(27,"div",0),d.TgZ(28,"div",6),d.TgZ(29,"button",14),d.NdJ("click",function(){return t.fetchReport()}),d.TgZ(30,"span"),d._uU(31,"Download"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(32,"div",15),d.YNc(33,rt,2,0,"div",16),d.YNc(34,ot,2,0,"div",16),d.YNc(35,ct,1,1,"iframe",17),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(6),d.Q6J("formGroup",t.form),d.xp6(9),d.Q6J("formControl",t.propertyServerSideFilteringCtrl)("searching",t.searching),d.xp6(1),d.Q6J("ngForOf",d.lcZ(17,9,t.propertiesFiltered$)),d.xp6(9),d.Q6J("ngForOf",d.lcZ(26,11,t.periods$)),d.xp6(4),d.Q6J("disabled",!t.form.valid||t.loader),d.xp6(4),d.Q6J("ngIf",t.loader),d.xp6(1),d.Q6J("ngIf",t.loader),d.xp6(1),d.Q6J("ngIf",t.pdfSrc))},directives:[_._Y,_.JL,_.sg,ie.KE,ie.hX,re.gD,_.JJ,_.u,ce.ey,nt.nu,_.oH,q.sg,x.lW,q.O5,se.pW],pipes:[q.Ov],styles:[""]}),n}()},{path:"ledger",component:xe},{path:"journal",component:Ge}]}]),ut=o(83893),st=function(){var e=function e(){c(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[ut.m,lt,nt.Co]]}),e}()}}])}();