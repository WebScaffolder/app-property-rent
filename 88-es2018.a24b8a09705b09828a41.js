"use strict";(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[88],{27088:function(t,e,a){a.r(e),a.d(e,{EmailGeneralSettingModule:function(){return et}});var i=a(39895),n=a(22238),o=a(99692),s=a(11494),l=a(28292),r=a(22759),c=a(66682),m=a(54395),d=a(87519),u=a(68307),p=a(1581);class g extends p.y{constructor(t){super(t)}}var h=a(3679),f=a(37716),Z=a(26215),b=a(65),S=a(91841);let T=(()=>{class t extends b.b{constructor(t){super(t,"system_notifications"),this.selectedEmailGeneralSource=new Z.X(null),this.selectedEmailGeneralChanges$=this.selectedEmailGeneralSource.asObservable(),this.localHttpClient=t}changeSelectedEmailGeneral(t){this.selectedEmailGeneralSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)(f.LFG(S.eN))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=a(57404),_=a(98295),A=a(49983),x=a(38583),q=a(93738),y=a(45396),N=a(51095),C=a(12178);function w(t,e){if(1&t&&(f.TgZ(0,"mat-error",14),f._uU(1),f.qZA()),2&t){const t=f.oxw();f.xp6(1),f.Oqu(t.formErrors.display_name)}}function Y(t,e){1&t&&(f.TgZ(0,"div",15),f._UZ(1,"mat-progress-bar",16),f.qZA())}let D=(()=>{class t{constructor(t,e,a,i,n){this.fb=e,this.communicationGeneralSettingService=a,this.notification=i,this.dialogRef=n,this.loader=!1,this.options=[{id:!0,name:"Yes"},{id:!1,name:"No"}],this.emailTemplates=[],this.smsTemplates=[],this.communicationSetting=t.communicationSetting,this.emailTemplates=t.emailTemplates,this.smsTemplates=t.smsTemplates,this.form=e.group({display_name:[{value:this.communicationSetting.display_name,disabled:!0},[h.kI.required,h.kI.minLength(3)]],send_email:[this.communicationSetting.send_email],send_sms:[this.communicationSetting.send_sms]})}ngOnInit(){}close(){this.dialogRef.close()}updateType(){const t=Object.assign({},this.communicationSetting,this.form.value);this.loader=!0,this.communicationGeneralSettingService.update(t).subscribe(t=>{this.loader=!1,this.dialogRef.close(this.form.value),this.notification.showNotification("success","Success !! Setting has been updated.")},t=>{var e;if(this.loader=!1,0!==t.type&&(this.formErrors=t,this.formErrors))for(const a in this.formErrors)this.form&&(null===(e=this.form.controls[a])||void 0===e||e.markAsTouched(),this.form.controls[a].setErrors({incorrect:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(f.Y36(n.WI),f.Y36(h.qu),f.Y36(T),f.Y36(v.g),f.Y36(n.so))},t.\u0275cmp=f.Xpm({type:t,selectors:[["robi-edit-email-general"]],decls:27,vars:6,consts:[["mat-dialog-title",""],[1,"mat-dialog-data",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],["color","primary","appearance","outline",1,"full-width"],["matInput","","formControlName","display_name","placeholder","Display Name"],["align","start","class","form__error",4,"ngIf"],[1,"col-6"],["formControlName","send_email","color","primary"],["formControlName","send_sms","color","primary"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["align","center"],["mat-button","","color","accent",1,"mr-2",3,"disabled","mat-dialog-close","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["align","start",1,"form__error"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,e){1&t&&(f.TgZ(0,"h5",0),f._uU(1,"Edit Setting"),f.qZA(),f.TgZ(2,"mat-dialog-content",1),f.NdJ("ngSubmit",function(){return e.updateType()}),f.TgZ(3,"div",2),f.TgZ(4,"div",3),f.TgZ(5,"mat-form-field",4),f.TgZ(6,"mat-label"),f._uU(7,"Display Name"),f.qZA(),f._UZ(8,"input",5),f.YNc(9,w,2,1,"mat-error",6),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"h5"),f._uU(11,"Send notification via : "),f.qZA(),f.TgZ(12,"mat-card"),f.TgZ(13,"mat-card-content"),f.TgZ(14,"div",2),f.TgZ(15,"div",7),f.TgZ(16,"mat-slide-toggle",8),f._uU(17,"Email"),f.qZA(),f.qZA(),f.TgZ(18,"div",7),f.TgZ(19,"mat-slide-toggle",9),f._uU(20,"SMS"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(21,Y,2,0,"div",10),f.TgZ(22,"mat-dialog-actions",11),f.TgZ(23,"button",12),f.NdJ("click",function(){return e.close()}),f._uU(24,"Cancel"),f.qZA(),f.TgZ(25,"button",13),f.NdJ("click",function(){return e.updateType()}),f._uU(26,"Save"),f.qZA(),f.qZA()),2&t&&(f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(7),f.Q6J("ngIf",null==e.formErrors?null:e.formErrors.display_name),f.xp6(12),f.Q6J("ngIf",e.loader),f.xp6(2),f.Q6J("disabled",e.loader)("mat-dialog-close",!0),f.xp6(2),f.Q6J("disabled",!e.form.valid||e.loader))},directives:[n.uh,n.xY,h.JL,h.sg,_.KE,_.hX,A.Nt,h.Fj,h.JJ,h.u,x.O5,q.a8,q.dn,y.Rr,n.H8,N.lW,n.ZT,_.TO,C.pW],encapsulation:2}),t})();var I=a(32789),E=a(76627),U=a(11436);const J=["search"];function j(t,e){if(1&t){const t=f.EpF();f.TgZ(0,"button",27),f.NdJ("click",function(){return f.CHM(t),f.oxw().clearSearch()}),f.TgZ(1,"mat-icon"),f._uU(2,"close"),f.qZA(),f.qZA()}}function k(t,e){1&t&&(f.TgZ(0,"mat-header-cell",28),f._uU(1," Event "),f.qZA())}function Q(t,e){if(1&t&&(f.TgZ(0,"mat-cell"),f._uU(1),f.qZA()),2&t){const t=e.$implicit;f.xp6(1),f.hij(" ",t.display_name," ")}}function G(t,e){1&t&&(f.TgZ(0,"mat-header-cell",28),f._uU(1," Email "),f.qZA())}function O(t,e){1&t&&(f.TgZ(0,"span"),f.TgZ(1,"i",29),f._uU(2,"done"),f.qZA(),f.qZA())}function R(t,e){1&t&&(f.TgZ(0,"span"),f.TgZ(1,"i",29),f._uU(2,"clear"),f.qZA(),f.qZA())}function H(t,e){if(1&t&&(f.TgZ(0,"mat-cell"),f.YNc(1,O,3,0,"span",23),f.YNc(2,R,3,0,"span",23),f.qZA()),2&t){const t=e.$implicit;f.xp6(1),f.Q6J("ngIf",1==t.send_email),f.xp6(1),f.Q6J("ngIf",0==t.send_email)}}function z(t,e){1&t&&(f.TgZ(0,"mat-header-cell",28),f._uU(1," Sms "),f.qZA())}function M(t,e){1&t&&(f.TgZ(0,"span"),f.TgZ(1,"i",29),f._uU(2,"done"),f.qZA(),f.qZA())}function $(t,e){1&t&&(f.TgZ(0,"span"),f.TgZ(1,"i",29),f._uU(2,"clear"),f.qZA(),f.qZA())}function B(t,e){if(1&t&&(f.TgZ(0,"mat-cell"),f.YNc(1,M,3,0,"span",23),f.YNc(2,$,3,0,"span",23),f.qZA()),2&t){const t=e.$implicit;f.xp6(1),f.Q6J("ngIf",1==t.send_sms),f.xp6(1),f.Q6J("ngIf",0==t.send_sms)}}function X(t,e){1&t&&(f.TgZ(0,"mat-header-cell"),f._uU(1," Actions "),f.qZA())}function W(t,e){if(1&t){const t=f.EpF();f.TgZ(0,"mat-cell",30),f.TgZ(1,"button",31),f.NdJ("click",function(){const e=f.CHM(t).$implicit;return f.oxw().editDialog(e)}),f.TgZ(2,"i",29),f._uU(3,"edit"),f.qZA(),f.qZA(),f.qZA()}2&t&&(f.xp6(1),f.Q6J("matTooltipPosition","above"))}function F(t,e){1&t&&f._UZ(0,"mat-header-row")}function L(t,e){1&t&&f._UZ(0,"mat-row")}function K(t,e){1&t&&(f.TgZ(0,"span"),f._uU(1,"No Data"),f.qZA())}function V(t,e){1&t&&(f.TgZ(0,"div",32),f._UZ(1,"mat-progress-bar",33),f.qZA())}const P=i.Bz.forChild([{path:"",component:(()=>{class t{constructor(t,e,a){this.emailGeneralService=t,this.notification=e,this.dialog=a,this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100],this.displayedColumns=["display_name","send_email","send_sms","actions"]}ngOnInit(){this.dataSource=new g(this.emailGeneralService),this.dataSource.meta$.subscribe(t=>this.meta=t),this.dataSource.load("",0,0,"display_name","asc")}editDialog(t){const e=new n.vA;e.disableClose=!0,e.autoFocus=!0,e.width="500px",e.height="350px",e.data={communicationSetting:t,emailTemplates:this.emailTemplates,smsTemplates:this.smsTemplates},this.dialog.open(D,e).afterClosed().subscribe(t=>{t&&this.loadData()})}loadData(){this.dataSource.load(this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction)}ngAfterViewInit(){(0,r.R)(this.search.nativeElement,"keyup").pipe((0,m.b)(1e3),(0,d.x)(),(0,u.b)(()=>{this.paginator.pageIndex=0,this.loadData()})).subscribe(),this.paginator.page.pipe((0,u.b)(()=>this.loadData())).subscribe(),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,c.T)(this.sort.sortChange,this.paginator.page).pipe((0,u.b)(()=>this.loadData())).subscribe()}openConfirmationDialog(t){this.dialogRef=this.dialog.open(l.z,{disableClose:!0}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=null})}delete(t){this.loader=!0,this.emailGeneralService.delete(t).subscribe(t=>{this.loader=!1,this.loadData(),this.notification.showNotification("success","Success !! Communication Setting has been deleted.")},t=>{this.loader=!1,this.notification.showNotification("danger",t.error.error?"Delete Error !! ":"Connection Error !! Nothing deleted. Check Connection and retry. ")})}clearSearch(){this.search.nativeElement.value="",this.loadData()}}return t.\u0275fac=function(e){return new(e||t)(f.Y36(T),f.Y36(v.g),f.Y36(n.uw))},t.\u0275cmp=f.Xpm({type:t,selectors:[["robi-system-email-setting"]],viewQuery:function(t,e){if(1&t&&(f.Gf(J,7),f.Gf(o.NW,7),f.Gf(s.YE,7)),2&t){let t;f.iGM(t=f.CRH())&&(e.search=t.first),f.iGM(t=f.CRH())&&(e.paginator=t.first),f.iGM(t=f.CRH())&&(e.sort=t.first)}},decls:32,vars:12,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","search-form-section"],[1,"col-10"],[1,"search-form-field"],["matInput","","placeholder","Search","autocomplete","off",3,"disabled"],["search",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-responsive"],["matSort","","matSortActive","display_name","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","display_name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","send_email"],["matColumnDef","send_sms"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["class","button-row",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSizeOptions"],["pagination",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-sort-header",""],[1,"material-icons"],[1,"button-row"],["mat-raised-button","","type","button","matTooltip","Edit",1,"btn","btn-primary","btn-link","btn-sm","btn-just-icon",3,"matTooltipPosition","click"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,e){if(1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"mat-form-field",6),f._UZ(7,"input",7,8),f.YNc(9,j,3,0,"button",9),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"div",10),f.TgZ(11,"mat-table",11,12),f.ynx(13,13),f.YNc(14,k,2,0,"mat-header-cell",14),f.YNc(15,Q,2,1,"mat-cell",15),f.BQk(),f.ynx(16,16),f.YNc(17,G,2,0,"mat-header-cell",14),f.YNc(18,H,3,2,"mat-cell",15),f.BQk(),f.ynx(19,17),f.YNc(20,z,2,0,"mat-header-cell",14),f.YNc(21,B,3,2,"mat-cell",15),f.BQk(),f.ynx(22,18),f.YNc(23,X,2,0,"mat-header-cell",19),f.YNc(24,W,4,1,"mat-cell",20),f.BQk(),f.YNc(25,F,1,0,"mat-header-row",21),f.YNc(26,L,1,0,"mat-row",22),f.qZA(),f.YNc(27,K,2,0,"span",23),f.YNc(28,V,2,0,"div",24),f.ALo(29,"async"),f._UZ(30,"mat-paginator",25,26),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t){const t=f.MAs(8);f.xp6(7),f.Q6J("disabled",0===(null==e.meta?null:e.meta.total)),f.xp6(2),f.Q6J("ngIf",t.value),f.xp6(2),f.Q6J("dataSource",e.dataSource),f.xp6(14),f.Q6J("matHeaderRowDef",e.displayedColumns),f.xp6(1),f.Q6J("matRowDefColumns",e.displayedColumns),f.xp6(1),f.Q6J("ngIf",0===(null==e.meta?null:e.meta.total)),f.xp6(1),f.Q6J("ngIf",f.lcZ(29,10,null==e.dataSource?null:e.dataSource.loading$)||e.loader),f.xp6(2),f.Q6J("length",null==e.meta?null:e.meta.total)("pageIndex",e.pageIndex)("pageSizeOptions",e.pageSizeOptions)}},directives:[_.KE,A.Nt,x.O5,I.BZ,s.YE,I.w1,I.fO,I.Dz,I.as,I.nj,o.NW,N.lW,_.R9,E.Hw,I.ge,s.nU,I.ev,U.gM,I.XQ,I.Gk,C.pW],pipes:[x.Ov],styles:[""]}),t})()}]);var tt=a(83893);let et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[tt.m,P]]}),t})()},1581:function(t,e,a){a.d(e,{y:function(){return l}});var i=a(26215),n=a(25917),o=a(5304),s=a(68939);class l{constructor(t){this.service=t,this.dataSubject=new i.X([]),this.loadingSubject=new i.X(!1),this.loading$=this.loadingSubject.asObservable(),this.metaSubject=new i.X({}),this.meta$=this.metaSubject.asObservable()}load(t,e,a,i="",l="",r="",c=""){this.loadingSubject.next(!0),this.service.getAll(t,e,a,i,l,r,c).pipe((0,o.K)(()=>(0,n.of)([])),(0,s.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{this.dataSubject.next(t.data),this.metaSubject.next(t.meta)})}loadNested(t,e,a,i,l="",r="",c="",m=""){this.loadingSubject.next(!0),this.service.getNested(t,e,a,i,l,r,c,m).pipe((0,o.K)(()=>(0,n.of)([])),(0,s.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{this.dataSubject.next(t.data),this.metaSubject.next(t.meta)})}connect(t){return this.dataSubject.asObservable()}disconnect(t){this.dataSubject.complete(),this.loadingSubject.complete()}}}}]);