"use strict";(self.webpackChunkmaterial_dashboard_angular=self.webpackChunkmaterial_dashboard_angular||[]).push([[677],{69677:function(t,e,i){i.r(e),i.d(e,{AmenitySettingModule:function(){return ut}});var a=i(39895),n=i(22238),o=i(99692),r=i(11494),s=i(28292),l=i(22759),c=i(66682),m=i(54395),d=i(87519),u=i(68307),f=i(3679),p=i(26215),h=i(37716),g=i(88211),Z=i(57404),b=i(38583),A=i(98295),y=i(49983),v=i(51095),_=i(76627),x=i(12178);function T(t,e){1&t&&(h.ynx(0),h.TgZ(1,"mat-icon",18),h._uU(2,"error_outline"),h.qZA(),h.BQk())}function q(t,e){if(1&t&&(h.TgZ(0,"h5",16),h._uU(1,"New Amenity "),h.YNc(2,T,3,0,"ng-container",17),h.ALo(3,"async"),h.qZA()),2&t){const t=h.oxw();h.xp6(2),h.Q6J("ngIf",h.lcZ(3,1,t.formError$))}}function S(t,e){1&t&&(h.ynx(0),h.TgZ(1,"mat-icon",18),h._uU(2,"error_outline"),h.qZA(),h.BQk())}function w(t,e){if(1&t&&(h.TgZ(0,"h5",16),h._uU(1,"Edit Amenity "),h.YNc(2,S,3,0,"ng-container",17),h.ALo(3,"async"),h.qZA()),2&t){const t=h.oxw();h.xp6(2),h.Q6J("ngIf",h.lcZ(3,1,t.formError$))}}function N(t,e){if(1&t&&(h.TgZ(0,"mat-error",19),h._uU(1),h.qZA()),2&t){const t=h.oxw();h.xp6(1),h.Oqu(t.formErrors.amenity_name)}}function I(t,e){if(1&t&&(h.TgZ(0,"mat-error",19),h._uU(1),h.qZA()),2&t){const t=h.oxw();h.xp6(1),h.Oqu(t.formErrors.amenity_display_name)}}function U(t,e){if(1&t&&(h.TgZ(0,"mat-error",19),h._uU(1),h.qZA()),2&t){const t=h.oxw();h.xp6(1),h.Oqu(t.formErrors.amenity_description)}}function C(t,e){1&t&&(h.TgZ(0,"div",20),h._UZ(1,"mat-progress-bar",21),h.qZA())}let D=(()=>{class t{constructor(t,e,i,a,n){this.fb=e,this.amenityService=i,this.notification=a,this.dialogRef=n,this.errorInForm=new p.X(!1),this.formError$=this.errorInForm.asObservable(),this.loader=!1,this.isAdd=t.isAdd,this.amenity=t.amenity}ngOnInit(){var t,e,i;this.isAdd&&(this.form=this.fb.group({amenity_name:["",[f.kI.required,f.kI.minLength(2)]],amenity_display_name:["",[f.kI.required,f.kI.minLength(2)]],amenity_description:[""]})),this.isAdd||(this.form=this.fb.group({amenity_name:[null===(t=this.amenity)||void 0===t?void 0:t.amenity_name,[f.kI.required,f.kI.minLength(3)]],amenity_display_name:[null===(e=this.amenity)||void 0===e?void 0:e.amenity_display_name],amenity_description:[null===(i=this.amenity)||void 0===i?void 0:i.amenity_description]}))}create(){this.errorInForm.next(!1);const t=Object.assign({},this.amenity,this.form.value);this.loader=!0,this.amenityService.create(t).subscribe(t=>{this.onSaveComplete(),this.notification.showNotification("success","Success !! Amenity created.")},t=>{var e,i;if(this.loader=!1,this.errorInForm.next(!0),this.formErrors=t,this.formErrors)for(const a in this.formErrors)this.form&&(null===(e=this.form.controls[a])||void 0===e||e.markAsTouched(),null===(i=this.form.controls[a])||void 0===i||i.setErrors({incorrect:!0}))})}update(){const t=Object.assign({},this.amenity,this.form.value);delete t.membership_form,this.loader=!0,this.errorInForm.next(!1),this.amenityService.update(t).subscribe(t=>{this.loader=!1,this.dialogRef.close(this.form.value),this.notification.showNotification("success","Success !! Amenity has been updated.")},t=>{var e,i;if(this.loader=!1,this.errorInForm.next(!0),this.formErrors=t,this.formErrors)for(const a in this.formErrors)this.form&&(null===(e=this.form.controls[a])||void 0===e||e.markAsTouched(),null===(i=this.form.controls[a])||void 0===i||i.setErrors({incorrect:!0}))})}createOrUpdate(){this.isAdd?this.create():this.update()}close(){this.dialogRef.close()}onSaveComplete(){this.loader=!1,this.form.reset(),this.dialogRef.close(this.form.value)}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(n.WI),h.Y36(f.qu),h.Y36(g.p),h.Y36(Z.g),h.Y36(n.so))},t.\u0275cmp=h.Xpm({type:t,selectors:[["robi-add-amenity"]],decls:32,vars:11,consts:[["mat-dialog-title","",4,"ngIf"],[1,"mat-dialog-data",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],["color","primary","appearance","outline",1,"full-width"],["matInput","","formControlName","amenity_name","placeholder","Name"],["align","start","class","form__error",4,"ngIf"],["matInput","","formControlName","amenity_display_name","placeholder","Display Name"],[1,"col-sm-12"],["formControlName","amenity_description","matInput","","placeholder","Description","maxlength","150","rows","2"],["amenity_description",""],["align","end"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["align","center"],["mat-button","","color","accent",1,"mr-2",3,"disabled","mat-dialog-close","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-dialog-title",""],[4,"ngIf"],["color","warn"],["align","start",1,"form__error"],[1,"d-flex","justify-content-center","spinner-container"],["color","primary","mode","query","value","50","bufferValue","75"]],template:function(t,e){if(1&t&&(h.YNc(0,q,4,3,"h5",0),h.YNc(1,w,4,3,"h5",0),h.TgZ(2,"mat-dialog-content",1),h.NdJ("ngSubmit",function(){return e.create()}),h.TgZ(3,"div",2),h.TgZ(4,"div",3),h.TgZ(5,"mat-form-field",4),h.TgZ(6,"mat-label"),h._uU(7,"Name"),h.qZA(),h._UZ(8,"input",5),h.YNc(9,N,2,1,"mat-error",6),h.qZA(),h.qZA(),h.TgZ(10,"div",3),h.TgZ(11,"mat-form-field",4),h.TgZ(12,"mat-label"),h._uU(13,"Display Name"),h.qZA(),h._UZ(14,"input",7),h.YNc(15,I,2,1,"mat-error",6),h.qZA(),h.qZA(),h.qZA(),h.TgZ(16,"div",2),h.TgZ(17,"div",8),h.TgZ(18,"mat-form-field",4),h.TgZ(19,"mat-label"),h._uU(20,"Description"),h.qZA(),h._UZ(21,"textarea",9,10),h.TgZ(23,"mat-hint",11),h._uU(24),h.qZA(),h.YNc(25,U,2,1,"mat-error",6),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(26,C,2,0,"div",12),h.TgZ(27,"mat-dialog-actions",13),h.TgZ(28,"button",14),h.NdJ("click",function(){return e.close()}),h._uU(29,"Cancel"),h.qZA(),h.TgZ(30,"button",15),h.NdJ("click",function(){return e.createOrUpdate()}),h._uU(31,"Save"),h.qZA(),h.qZA()),2&t){const t=h.MAs(22);h.Q6J("ngIf",e.isAdd),h.xp6(1),h.Q6J("ngIf",!e.isAdd),h.xp6(1),h.Q6J("formGroup",e.form),h.xp6(7),h.Q6J("ngIf",null==e.formErrors?null:e.formErrors.amenity_name),h.xp6(6),h.Q6J("ngIf",null==e.formErrors?null:e.formErrors.amenity_display_name),h.xp6(9),h.hij("",t.value.length," / 150"),h.xp6(1),h.Q6J("ngIf",null==e.formErrors?null:e.formErrors.amenity_description),h.xp6(1),h.Q6J("ngIf",e.loader),h.xp6(2),h.Q6J("disabled",e.loader)("mat-dialog-close",!0),h.xp6(2),h.Q6J("disabled",!e.form.valid||e.loader)}},directives:[b.O5,n.xY,f.JL,f.sg,A.KE,A.hX,y.Nt,f.Fj,f.JJ,f.u,f.nD,A.bx,n.H8,v.lW,n.ZT,n.uh,_.Hw,A.TO,x.pW],pipes:[b.Ov],encapsulation:2}),t})();var k=i(1581);class E extends k.y{constructor(t){super(t)}}var J=i(32789),Y=i(33935),Q=i(11436),j=i(29790);const O=["search"];function H(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",31),h.NdJ("click",function(){return h.CHM(t),h.oxw().clearSearch()}),h.TgZ(1,"mat-icon"),h._uU(2,"close"),h.qZA(),h.qZA()}}function R(t,e){1&t&&(h.TgZ(0,"mat-header-cell",32),h._uU(1," Name "),h.qZA())}function $(t,e){if(1&t&&(h.TgZ(0,"mat-cell"),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.xp6(1),h.hij(" ",t.amenity_name," ")}}function F(t,e){1&t&&(h.TgZ(0,"mat-header-cell",32),h._uU(1," Display Name "),h.qZA())}function L(t,e){if(1&t&&(h.TgZ(0,"mat-cell"),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.xp6(1),h.hij(" ",t.amenity_display_name," ")}}function M(t,e){1&t&&(h.TgZ(0,"mat-header-cell"),h._uU(1," Description "),h.qZA())}function G(t,e){if(1&t&&(h.TgZ(0,"mat-cell"),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.xp6(1),h.hij(" ",t.amenity_description,"")}}function P(t,e){1&t&&(h.TgZ(0,"mat-header-cell"),h._uU(1," Actions "),h.qZA())}function z(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"mat-cell",33),h.TgZ(1,"button",34),h.TgZ(2,"mat-icon"),h._uU(3,"more_vert"),h.qZA(),h.qZA(),h.TgZ(4,"mat-menu",null,35),h.TgZ(6,"button",36),h.NdJ("click",function(){const e=h.CHM(t).$implicit;return h.oxw().addDialog(!1,e)}),h.TgZ(7,"mat-icon",37),h._uU(8,"edit"),h.qZA(),h.TgZ(9,"span"),h._uU(10,"Edit"),h.qZA(),h.qZA(),h.TgZ(11,"button",38),h.NdJ("click",function(){const e=h.CHM(t).$implicit;return h.oxw().openConfirmationDialog(e)}),h.TgZ(12,"mat-icon",39),h._uU(13,"delete"),h.qZA(),h.TgZ(14,"span"),h._uU(15,"Delete"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.MAs(5);h.xp6(1),h.Q6J("matMenuTriggerFor",t),h.xp6(5),h.Q6J("matTooltipPosition","above"),h.xp6(5),h.Q6J("matTooltipPosition","above")}}function B(t,e){1&t&&h._UZ(0,"mat-header-row")}function X(t,e){1&t&&h._UZ(0,"mat-row")}function W(t,e){1&t&&(h.TgZ(0,"span"),h._uU(1,"No Data"),h.qZA())}function K(t,e){1&t&&(h.TgZ(0,"div",40),h._UZ(1,"mat-progress-bar",41),h.qZA())}const V=a.Bz.forChild([{path:"",component:(()=>{class t{constructor(t,e,i){this.amenityService=t,this.notification=e,this.dialog=i,this.displayedColumns=["amenity_name","amenity_display_name","amenity_description","actions"],this.loader=!1,this.pageIndex=0,this.pageSizeOptions=[5,10,25,50,100]}ngOnInit(){this.dataSource=new E(this.amenityService),this.dataSource.meta$.subscribe(t=>this.meta=t),this.dataSource.load("",0,0,"amenity_name","desc")}ngAfterViewInit(){(0,l.R)(this.search.nativeElement,"keyup").pipe((0,m.b)(1e3),(0,d.x)(),(0,u.b)(()=>{this.paginator.pageIndex=0,this.loadData()})).subscribe(),this.paginator.page.pipe((0,u.b)(()=>this.loadData())).subscribe(),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,c.T)(this.sort.sortChange,this.paginator.page).pipe((0,u.b)(()=>this.loadData())).subscribe()}loadData(){this.dataSource.load(this.search.nativeElement.value,this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction)}clearSearch(){this.search.nativeElement.value="",this.loadData()}addDialog(t=!0,e){const i=new n.vA;i.disableClose=!0,i.autoFocus=!0,i.data={amenity:e,isAdd:t},this.dialog.open(D,i).afterClosed().subscribe(t=>{t&&this.loadData()})}openConfirmationDialog(t){this.dialogRef=this.dialog.open(s.z,{disableClose:!0}),this.dialogRef.afterClosed().subscribe(e=>{e&&this.delete(t),this.dialogRef=null})}delete(t){this.loader=!0,this.amenityService.delete(t).subscribe(t=>{this.loader=!1,this.loadData(),this.notification.showNotification("success","Success !! Amenity has been deleted.")},t=>{this.loader=!1,this.notification.showNotification("danger",t.error.message?t.error.message:"Delete Error !! ")})}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(g.p),h.Y36(Z.g),h.Y36(n.uw))},t.\u0275cmp=h.Xpm({type:t,selectors:[["robi-amenity-setting"]],viewQuery:function(t,e){if(1&t&&(h.Gf(O,5),h.Gf(o.NW,7),h.Gf(r.YE,7)),2&t){let t;h.iGM(t=h.CRH())&&(e.search=t.first),h.iGM(t=h.CRH())&&(e.paginator=t.first),h.iGM(t=h.CRH())&&(e.sort=t.first)}},decls:42,vars:15,consts:[[1,"row"],[1,"fab-container"],["mat-fab","",1,"fab-toggler",3,"click"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"row","search-form-section"],[1,"col-3"],["mat-button","","matPrefix","","mat-stroked-button","","aria-label","add new",3,"click"],[1,"col-9"],[1,"search-form-field"],["matInput","","autocomplete","off",3,"placeholder","disabled"],["search",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-responsive"],["matSort","","matSortActive","amenity_name","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","amenity_name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","amenity_display_name"],["matColumnDef","amenity_description"],[4,"matHeaderCellDef"],["matColumnDef","actions"],["class","button-row",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["class","d-flex justify-content-center spinner-container",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSizeOptions"],["pagination",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-sort-header",""],[1,"button-row"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","matTooltip","Edit Amenity.",3,"matTooltipPosition","click"],["color","primary"],["mat-menu-item","","matTooltip","Delete Amenity.",3,"matTooltipPosition","click"],["color","warn"],[1,"d-flex","justify-content-center","spinner-container"],["color","green","mode","query","value","50","bufferValue","75"]],template:function(t,e){if(1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"button",2),h.NdJ("click",function(){return e.addDialog()}),h.TgZ(3,"mat-icon"),h._uU(4,"add"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(5,"div",3),h.TgZ(6,"div",4),h.TgZ(7,"div",5),h.TgZ(8,"div",6),h.TgZ(9,"div",7),h.TgZ(10,"button",8),h.NdJ("click",function(){return e.addDialog()}),h.TgZ(11,"mat-icon"),h._uU(12,"add"),h.qZA(),h._uU(13," New Amenity "),h.qZA(),h.qZA(),h.TgZ(14,"div",9),h.TgZ(15,"mat-form-field",10),h._UZ(16,"input",11,12),h.ALo(18,"translate"),h.YNc(19,H,3,0,"button",13),h.qZA(),h.qZA(),h.qZA(),h.TgZ(20,"div",14),h.TgZ(21,"mat-table",15,16),h.ynx(23,17),h.YNc(24,R,2,0,"mat-header-cell",18),h.YNc(25,$,2,1,"mat-cell",19),h.BQk(),h.ynx(26,20),h.YNc(27,F,2,0,"mat-header-cell",18),h.YNc(28,L,2,1,"mat-cell",19),h.BQk(),h.ynx(29,21),h.YNc(30,M,2,0,"mat-header-cell",22),h.YNc(31,G,2,1,"mat-cell",19),h.BQk(),h.ynx(32,23),h.YNc(33,P,2,0,"mat-header-cell",22),h.YNc(34,z,16,3,"mat-cell",24),h.BQk(),h.YNc(35,B,1,0,"mat-header-row",25),h.YNc(36,X,1,0,"mat-row",26),h.qZA(),h.YNc(37,W,2,0,"span",27),h.YNc(38,K,2,0,"div",28),h.ALo(39,"async"),h._UZ(40,"mat-paginator",29,30),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const t=h.MAs(17);h.xp6(16),h.s9C("placeholder",h.lcZ(18,11,"robi.filter")),h.Q6J("disabled",0===(null==e.meta?null:e.meta.total)),h.xp6(3),h.Q6J("ngIf",t.value),h.xp6(2),h.Q6J("dataSource",e.dataSource),h.xp6(14),h.Q6J("matHeaderRowDef",e.displayedColumns),h.xp6(1),h.Q6J("matRowDefColumns",e.displayedColumns),h.xp6(1),h.Q6J("ngIf",0===(null==e.meta?null:e.meta.total)),h.xp6(1),h.Q6J("ngIf",h.lcZ(39,13,null==e.dataSource?null:e.dataSource.loading$)||e.loader),h.xp6(2),h.Q6J("length",null==e.meta?null:e.meta.total)("pageIndex",e.pageIndex)("pageSizeOptions",e.pageSizeOptions)}},directives:[v.lW,_.Hw,A.qo,A.KE,y.Nt,b.O5,J.BZ,r.YE,J.w1,J.fO,J.Dz,J.as,J.nj,o.NW,A.R9,J.ge,r.nU,J.ev,Y.p6,Y.VK,Y.OP,Q.gM,J.XQ,J.Gk,x.pW],pipes:[j.X$,b.Ov],styles:[""]}),t})()}]);var tt=i(83893),et=i(85322),it=i(86710);const at=(0,it.PH)("[Amenities Resolver] Load All Amenities"),nt=(0,it.PH)("[Load Amenities Effect] All Amenities Loaded",(0,it.Ky)()),ot=(0,it.PH)("[Amenities Resolver] Load Paginated Amenities",(0,it.Ky)());var rt=i(94612),st=i(88002);let lt=(()=>{class t{constructor(t,e){this.actions$=t,this.amenitiesHttpService=e,this.loadAmenities$=(0,et.GW)(()=>this.actions$.pipe((0,et.l4)(at),(0,rt.b)(t=>this.amenitiesHttpService.getAll("",0,3)),(0,st.U)(t=>nt({amenities:t})))),this.loadPaginatedAmenities$=(0,et.GW)(()=>this.actions$.pipe((0,et.l4)(ot),(0,rt.b)(t=>{var e,i;return this.amenitiesHttpService.getAll("",null===(e=t.page)||void 0===e?void 0:e.pageIndex,null===(i=t.page)||void 0===i?void 0:i.pageSize)}),(0,st.U)(t=>nt({amenities:t}))))}}return t.\u0275fac=function(e){return new(e||t)(h.LFG(et.eX),h.LFG(g.p))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac}),t})();const ct=(0,i(80273).H)({sortComparer:function(t,e){const i=t.amenity_name<e.amenity_name;return!0===i?1:!1===i?-1:void 0}}),mt=ct.getInitialState({pagination:{}}),dt=(0,it.Lq)(mt,(0,it.on)(nt,(t,e)=>ct.addMany(e.amenities.data,{...t,pagination:e.amenities.meta})));ct.getSelectors();let ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[tt.m,V,et.sQ.forFeature([lt]),it.Aw.forFeature("amenities",dt)]]}),t})()},1581:function(t,e,i){i.d(e,{y:function(){return s}});var a=i(26215),n=i(25917),o=i(5304),r=i(68939);class s{constructor(t){this.service=t,this.dataSubject=new a.X([]),this.loadingSubject=new a.X(!1),this.loading$=this.loadingSubject.asObservable(),this.metaSubject=new a.X({}),this.meta$=this.metaSubject.asObservable()}load(t,e,i,a="",s="",l="",c=""){this.loadingSubject.next(!0),this.service.getAll(t,e,i,a,s,l,c).pipe((0,o.K)(()=>(0,n.of)([])),(0,r.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{this.dataSubject.next(t.data),this.metaSubject.next(t.meta)})}loadNested(t,e,i,a,s="",l="",c="",m=""){this.loadingSubject.next(!0),this.service.getNested(t,e,i,a,s,l,c,m).pipe((0,o.K)(()=>(0,n.of)([])),(0,r.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{this.dataSubject.next(t.data),this.metaSubject.next(t.meta)})}connect(t){return this.dataSubject.asObservable()}disconnect(t){this.dataSubject.complete(),this.loadingSubject.complete()}}}}]);